<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
   <TITLE>Brazilian Hackers Journal</TITLE>
   <META NAME="Author" CONTENT="Liquid Byte">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.0b1 (WinNT; I) [Netscape]">
   <META NAME="Description" CONTENT="This is a first edition.">
</HEAD>
<BODY TEXT="#FFFF00" BGCOLOR="#000000" LINK="#0000FF" VLINK="#8080FF" ALINK="#00FF00">

<CENTER><P><IMG SRC="jornal.JPG" ALT="BHJ" HEIGHT=143 WIDTH=453></P></CENTER>

<P><A HREF="Eletronica.html"><IMG SRC="Eletronica.JPG" BORDER=0 HEIGHT=71 WIDTH=263></A></P>

<P><IMG SRC="MetallicRule15.gif" HEIGHT=16 WIDTH=525></P>

<UL>
<H1><FONT COLOR="#FF66CC"><FONT SIZE=+3>Desmistificando o Barramento do
PC</FONT></FONT></H1>

<ADDRESS><FONT COLOR="#FF66CC">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<FONT SIZE=+1>Por Maverick</FONT></FONT></ADDRESS>

<P><FONT SIZE=+1>&nbsp;Desde o in&iacute;cio, nas primeiras configura&ccedil;&otilde;es
dos mais velhos PC’s, o m&eacute;todo mais pr&aacute;tico de identificar
jumpers de placas perif&eacute;ricas, que muitas vezes n&atilde;o tinhamos
manuais ou sequer faziamos id&eacute;ia de quais IRQ’s ou endere&ccedil;os
usar, &eacute; a identifica&ccedil;&atilde;o&nbsp; dos pinos do barramento.</FONT></P>

<P><FONT SIZE=+1>&nbsp;O velho e bom&nbsp; PC (bom ?), conta com uma arquitetura
de slots p/ expans&atilde;o simples e completa. Mesmo com as &uacute;ltimas
mudan&ccedil;as (PCI, Local Bus, etc) ainda temos formas exatamente iguais
ao pr&iacute;ncipio. Temos pinos de dados (cada vez mais), pinos de endere&ccedil;os,
IRQ’s, DMA’s, tens&otilde;es e pinos de controle de fluxo de dados (o BUS
propriamente dito).</FONT></P>

<P><FONT SIZE=+1>&nbsp;Quantas e quantas noites n&atilde;o perdemos, tentando
configurar aquele modem que n&atilde;o lembravamos aonde tinhamos enfiado
os manuais, que nem sequer tinham identifica&ccedil;&otilde;es na placa.
Sem falar naqueles manuais que esqueceram de atualizar e sa&iacute;ram
completamente errados da f&aacute;brica.</FONT></P>

<P><FONT SIZE=+1>&nbsp;Muitas vezes nos deparamos na necessidade de trabalhar
determinadas placas em IRQ’s diferentes e n&atilde;o podemos faz&ecirc;-lo.
O Plug and Play, ainda est&aacute; longe de estar maduro e ainda apanharemos
muito (at&eacute; que &eacute; divertido) configurando placas.</FONT></P>

<P><FONT SIZE=+1>&nbsp;Tentarei passar algumas dicas que aliviaram minhas
dores de cabe&ccedil;a para configurar v&aacute;rias placas nos &uacute;ltimos
dez anos. Todas foram testadas e muitas vezes a &uacute;nica solu&ccedil;&atilde;o
encontrada para botar alguma josta para funcionar.</FONT></P>

<P><FONT SIZE=+2>Identificando jumpers de controle de IRQ em placas perif&eacute;ricas:</FONT></P>

<P><FONT SIZE=+1>&nbsp;Normalmente, os conjuntos de jumpers para a configura&ccedil;&atilde;o
de IRQ’s, consiste no desvio direto de um pino de sa&iacute;da do CI orientador
da placa perif&eacute;rica (que solicitar&aacute; uma interrup&ccedil;&atilde;o
p/ a placa m&atilde;e) diretamente ligado ao pino de IRQ do bus do PC:</FONT></P>

<P><FONT SIZE=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
/------------ jump 1-------- Pino XX do barramento (IRQ 3)</FONT></P>

<P><FONT SIZE=+1>CI (placa perif&eacute;rica) -------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|------------ jump 2-------- Pino XX do barramento (IRQ 4)</FONT></P>

<P><FONT SIZE=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|------------ jump 3-------- Pino XX do barramento (IRQ 5)</FONT></P>

<P><FONT SIZE=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
\------------ jump 4-------- Pino XX do barramento (IRQ 7)</FONT></P>

<P><FONT SIZE=+1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
.... e assim por diante.....</FONT></P>

<P><FONT SIZE=+1>&nbsp;Fica f&aacute;cil identificar as liga&ccedil;&otilde;es.
Sempre teremos um s&oacute; jumper ligado (fechando o circuito). Por exemplo.
O diagrama acima utiliza IRQ 3 (COM 2 por exemplo) e deve ter o jump 1
fechado e os demais abertos. Caso existam dois ou mais jumpers, o 8259
(antigo controlador de interrup&ccedil;&otilde;es do XT) ficar&aacute;
loquinho. Todos os pedidos de interrup&ccedil;&atilde;o vieram do mesmo
lugar. Algum pau vai dar......</FONT></P>

<P><FONT SIZE=+1>&nbsp;Com um miter em escala ohmica ou de continuidade,
verifique que um dos lados do conjunto de jumpers estar&aacute; em &quot;curto&quot;
(todos ligados ao mesmo ponto), certamente na sa&iacute;da do CI da placa
&agrave; configurar. As outras pontas dos jumpers dever&atilde;o cada uma
ir direto para um ponto espec&iacute;fico do slot. Associe o ponto encontrado
&agrave; tabela de pinos e IRQ’s mais adiante, para verificar a configura&ccedil;&atilde;o
atual.</FONT></P>

<P><FONT SIZE=+1>&nbsp;Est&aacute; simples a identifica&ccedil;&atilde;o
dos demais jumpers de IRQ’s.</FONT></P>

<P><FONT SIZE=+1>&nbsp;Este caso serve para quando temos um conjunto de
jumpers. Quando n&atilde;o temos jumpers, nem software de configura&ccedil;&atilde;o,
utilize o m&eacute;todo &agrave; seguir:</FONT></P>

<P><FONT SIZE=+1>&nbsp;Fiz isto a primeira vez, porque precisei alterar
o IRQ da minha velha placa Super IDE, padr&atilde;o ISA. Precisava usar
as duas COM’s (p/ mouse e para um cabo tipo LAP LINK). Meu modem s&oacute;
permitia IRQ 3 ou 4. Ou seja, qualquer posi&ccedil;&atilde;o geraria conflito
com uma das duas COM’s.&nbsp;</FONT></P>

<P><FONT SIZE=+1>&nbsp;Como quase toda Super IDE, com os jumpers eu podia
apenas habilitar ou disabilitar as COM’s, ou selecionar COM1 / COM 3 ou
COM 2 / COM 4. Mas e o IRQ ? Tinha que ser 5 ou 7. OK, vamos l&aacute;.
Queria que meu Modem ficasse em COM 4 (IRQ 3), meu mouse na COM 1 (IRQ
4) e por &uacute;ltimo o cabo na COM 2 (IRQ 5 ou 7), sendo que o Windows
permite que o software seja configurado com os IRQ’s desejados. Identifiquei
o pino da placa que era ligado ao slot na conex&atilde;o IRQ 3. Com uma
l&acirc;mina, cortei a trilha que unia o slot ao CI que controla as seriais,
ligando depois um jumper do pino do CI direto ao pino do slot que controlava
o IRQ 5. Note que nestes casos, as placas perif&eacute;ricas tem um monte
de pinos que ficam flutuando (n&atilde;o utilizados). Todos os IRQ’s, DMA’s
e pinos de Endere&ccedil;os n&atilde;o utilizados estavam vazios, sem nenhuma
conex&atilde;o. &Eacute; quase sempre assim. Antes de cortar a trilha,
use o miter para procurar em que pino de qual CI a trilha &eacute; ligada.&nbsp;</FONT></P>

<P><FONT SIZE=+1>&nbsp;A placa quase nunca sabe em que IRQ ela est&aacute;.
Isto influi p/ a placa M&atilde;e e p/ o software que gerencia o dispositivo.
Quando o software que controla o dispositivo n&atilde;o permite muitos
IRQ’s, encontre o arquivo INF, e an&aacute;lise-o bem, mudando as configura&ccedil;&otilde;es
para os novos IRQ’s.</FONT></P>

<P><FONT SIZE=+1>&nbsp;Segue os principais pinos dos SLOT’s, com os IRQ’s
e DMA’s. Na pr&oacute;xima tem mais. At&eacute; la,</FONT></P>

<P><FONT SIZE=+1>DIAGRAMA DO SLOT 16 BITS DO PC (ISA) - LADO A (ESQUERDO)&nbsp;&nbsp;</FONT></P>

<PRE><FONT SIZE=+1>PINO FUN&Ccedil;&Atilde;O</FONT></PRE>

<DD><FONT COLOR="#FFFF00">1 GND</FONT></DD>

<DD><FONT COLOR="#FFFF00">2 RESET</FONT></DD>

<DD><FONT COLOR="#FFFF00">3 + 5 VOLTS</FONT></DD>

<DD><FONT COLOR="#FFFF00">4 IRQ 9</FONT></DD>

<DD><FONT COLOR="#FFFF00">5 - 5 VOLTS</FONT></DD>

<DD><FONT COLOR="#FFFF00">6 DREQ 2</FONT></DD>

<DD><FONT COLOR="#FFFF00">7&nbsp; - 12 VOLTS</FONT></DD>

<DD><FONT COLOR="#FFFF00">8 0WS</FONT></DD>

<DD><FONT COLOR="#FFFF00">9 + 12 VOLTS</FONT></DD>

<DD><FONT COLOR="#FFFF00">10 GND&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">11 SMEMW&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">12 SMEMR&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">13 IOW&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">14 IOR&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">15&nbsp; DACK 3&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">16 DREQ 3&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">17 DACK 1&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">18 DREQ 1&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">19 REFRESH&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">20 CLOCK&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">21 IRQ 7&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">22 IRQ 6&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">23 IRQ 5&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">24 IRQ 4&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">25 IRQ 3&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">26 DACK 2&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">27 TC&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">28 ALE&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">29 + 5 VOLTS&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">30 OSC&nbsp;</FONT></DD>

<DD><FONT COLOR="#FFFF00">31 GND</FONT></DD>

<P><FONT SIZE=+1>O pino 1 &eacute; o primeiro do topo do slot, do lado
mais perto do fundo do micro.&nbsp; Os IRQ’s mais altos (10, 11, 12, 15
e 14 s&atilde;o encontrados nos pinos 3, 4, 5, 6 e 7 respectivamente, na
expans&atilde;o do slot (na parte menor do slot de 16 bits. Tamb&eacute;m
s&atilde;o pinos do lado direito)</FONT></P>

<P><FONT SIZE=+1>&nbsp;* N&agrave;o use os IRQ’s&nbsp; 1, 2, 8, 9 e 13.
Note que eles n&atilde;o aparecem nas listas. O 2 funciona como cascata
para o segundo 8259 que foi implementado com a vinda do 286 (algu&eacute;m
tem saudades ?).&nbsp; Os demais n&atilde;o est&atilde;o dispon&iacute;veis
para placas perif&eacute;ricas. (talvez em alguns casos)....</FONT></P>

<P><FONT SIZE=+1>[ ] Maverick.</FONT></P>

<P><FONT SIZE=+1>&nbsp;</FONT></P>

<P><A HREF="indice.html"><IMG SRC="bullet.gif" BORDER=0 HEIGHT=26 WIDTH=26 ALIGN=ABSCENTER></A><FONT SIZE=+1><A HREF="indice.html">Volta
para o &iacute;ndice</A></FONT></P>
</UL>

</BODY>
</HTML>
