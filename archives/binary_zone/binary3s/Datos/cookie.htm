<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">
<title>Como programar nuestras cookies</title>
</head>

<body bgcolor="#000000" text="#FFFFFF">

<p align="center"><br>
<img src="up'dn.gif" width="623" height="18"></p>

<p align="center"><img src="cookies.jpg"></p>

<p align="left"><font size="2" face="Tahoma">Como habeis
observado al iniciar la revista, el navegador os pedia vuestro
nombre para poder completar el saludo que aparecia en la parte
superior de la pagina de inicio, pero... ¿que pasa si cerrais
del navegador y volveis a arrancar la magazine? Ya no os pregunta
vuestro nombre, lo incluye en el saludo sin ningun tipo de
pregunta. ¿Y como he hecho esto? Con una poco de </font><font
color="#0080FF" size="2" face="Tahoma">JavaScript</font><font
size="2" face="Tahoma">, claro.</font></p>

<p align="left"><font size="2" face="Tahoma">Para los que no
controlen el ingles, hay que decir que <u>cookie traducido al
castellano significa galleta</u>, pero como queda bastante mal
decir que voy a enseñar a hacer galletas... mejor lo llamare por
su nombre original &quot;cookie&quot; ;) Una cookie es un
elemento de una lista que se guarda en el fichero <i>cookies.txt </i>en
el ordenador del visitante (en el caso de usar Netscape) o en el
directorio <em>cookies</em> (si nuestro navegador es el Explorer)
. Solo el servidor que ha enviado al usuario una determinada
cookie podra consultarla, teniendo en cuenta que cada una tiene
un tamaño maximo de 4Kb y solo puede haber un maximo de 300
cookies en el disco duro.</font></p>

<p align="left"><font size="2" face="Tahoma">Los elementos de
lista de los que hablabamos antes deben tener dos campo
obigatorios: el nombre y su valor; y uno opcional: la fecha de
caducidad. Este ultimo campo sireve para establecer la fecha en
la cual la cookie sera eliminada de nuestro disco duro. El
formato es el siguiente:</font></p>

<p align="center"><font color="#FF0000" size="2" face="Tahoma">nombre=valor;[expires=caducidad;]</font></p>

<p align="center">&nbsp;</p>

<p align="left"><font color="#0080FF" size="3" face="Tahoma"><strong><u>Comenzamos
la programacion:</u></strong></font></p>

<p align="left"><font size="2" face="Tahoma">Para poder hacer
algo con las cookies necesitamos, logicamente, dos funciones. Una
que se encargue de enviarla y otra de leer su contenido.</font></p>

<p align="left"><font color="#C0C0C0" size="2" face="Tahoma">function
enviarCookie(nombre, valor, caducidad) { <br>
&nbsp; document.cookie = nombre + &quot;=&quot; + escape(valor) <br>
&nbsp;&nbsp;&nbsp; + ((caducidad == null) ? &quot;&quot; :
(&quot;; expires=&quot; + caducidad.toGMTString())) <br>
}</font></p>

<p><font size="2" face="Tahoma">Esta es la funcion encargada de
enviar la cookie. Vemos que el valor es codificado por medio de
la función <i>escape</i> y que la caducidad (en caso de decidir
ponerla) debe ser convertida a formato GMT. Esto se hace mediante
el metodo <i>toGMTString()</i> del objeto Date.</font></p>

<p><font color="#C0C0C0" size="2" face="Tahoma">function
consultarCookie(nombre) { <br>
&nbsp; var buscamos = nombre + &quot;=&quot;; <br>
&nbsp; if (document.cookie.length &gt; 0) { <br>
&nbsp;&nbsp;&nbsp; i = document.cookie.indexOf(buscamos); <br>
&nbsp;&nbsp;&nbsp; if (i != -1) { <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i += buscamos.length; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; j = document.cookie.indexOf(&quot;;&quot;,
i); <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (j == -1) <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; j = document.cookie.length;
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return unescape(document.cookie.substring(i,j));
<br>
&nbsp;&nbsp;&nbsp; } <br>
&nbsp; } <br>
}</font></p>

<p><font size="2" face="Tahoma">Ahora declaramos la variable <em>buscamos</em>
que contiene el nombre de la cookie que deseamos buscar más el
signo igual que se escribe justo después de cada nombre, para
que así no encontremos por error un valor o una subcadena de
otro nombre que sea igual al nombre de la galleta que buscamos.
Una vez encontrada extraemos la subcadena que hay entre el igual
que separa el nombre y el valor y el punto y coma con que termina
dicho valor.</font></p>

<p>&nbsp;</p>

<p><font color="#0080FF" size="3" face="Tahoma"><strong><u>Y
ahora un ejemplo:</u></strong></font></p>

<p><font size="2" face="Tahoma">El ejemplo que viene a
continuacion nos sireve para conocer por completo el
funcionamiento de las cookies. Este ejemplo es muy usado en las
paginas web y se utiliza para saber cuantes veces a sido visitada
por una persona.</font></p>

<p><font color="#C0C0C0" size="2" face="Tahoma">&lt;HTML&gt; <br>
&lt;HEAD&gt; <br>
&nbsp; &lt;SCRIPT LANGUAGE=&quot;JavaScript&quot;&gt; <br>
&nbsp; &lt;!-- Se usan los comentarios para esconder el código a
navegadores sin JavaScript <br>
&nbsp;&nbsp;&nbsp; function Contador() { <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var fecha=new Date (99, 12, 31); <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!(num=consultarCookie(&quot;VisitasAlCursoDeCookies&quot;)))
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; num = 0; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; num++; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mandarCookie(&quot;VisitasAlCursoDeCookies&quot;,
num, fecha); <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (num==1) <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; document.write(&quot;esta
es la primera vez que lees esta seccion.&quot;); <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else { <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; document.write(&quot;has
visitado esta seccion&quot;+num+&quot; veces.&quot;); <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <br>
&nbsp;&nbsp;&nbsp; } <br>
&nbsp; // --&gt; <br>
&nbsp; &lt;/SCRIPT&gt; <br>
&lt;/HEAD&gt; <br>
&lt;BODY&gt; <br>
Segun parece, <br>
&lt;SCRIPT LANGUAGE=&quot;JavaScript&quot;&gt; <br>
&lt;!-- <br>
&nbsp; Contador(); <br>
// --&gt; <br>
&lt;/SCRIPT&gt; <br>
&lt;/BODY&gt; <br>
&lt;/HTML&gt;</font></p>

<p><font color="#FFFFFF" size="2" face="Tahoma">Esta funcion
consulta el valor de la cookie incrementandola, y si no existiese
le da el valo de uno. Y por ultimo escribe en la pagina web el
numero de veces que la has visitado.</font></p>

<p align="right"><img src="Punish07.gif" width="384" height="224"></p>
</body>
</html>
