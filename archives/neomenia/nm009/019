->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->
  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú ú 
<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-

  019. Curso de programaci¢n en C (I).....................por Kapit n Sponja

->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->->
 ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú  ú ú  ú
<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-<-

        1. INTRODUCCIàN:
        ~~~~~~~~~~~~~~~~
        Bueno, antes de empezar con la materia, me gustar¡a hacer algunas
  aclaraciones para que todos podamos aprovechar al m ximo este curso.

        Antes de nada me presentar‚: Soy el Kapit n Sponja y esta es mi
  primera incursi¢n en cuanto a la escritura de art¡culos, por lo tanto
  espero que se is buenos compa¤eros y me ech‚is una mano a mejorar. NO soy
  ning£n gur£ de la inform tica ni nada por el estilo, pero creo tener el
  nivel suficiente para escribir esta secci¢n de forma que todo el mundo
  pueda tener un acceso f cil al Lenguaje C, mientras yo tambi‚n repaso mis
  conocimientos.

        En esta secci¢n no tengo previsto hacer una profunda revisi¢n de todo
  el Lenguaje C, ni hacer virger¡as, ni nada por el estilo. Simplemente voy
  a intentar dar una primera aproximaci¢n a los novatos en esto de la pro-
  gramaci¢n, de cual es la filosof¡a del C y repasar un poco todos los puntos
  b sicos que deben conocerse para poder hacer un programa en C.

        Bueno, muchos os preguntar‚is: Pero, ¨por que C? Bueno, si est is
  leyendo esta revista es que os interesa el mundo underground y supongo
  que ya habr‚is le¡do o  lguien os habr  dicho que lo mejor para el hacking
  es tener el sistema operativo Unix o Linux en su defecto, o por lo menos
  tener un amplio conocimiento de estos sistemas, ya que son los m s utili-
  zados en cuesti¢n de redes. Si, bueno y eso, ¨que tiene que ver con el
  C? Calma, calma. Unix fue dise¤ado all  por los a¤os 70 y, ¨adivin is en
  que lenguaje se program¢? Si, C. TODOS los sistemas Unix llevan incorpo-
  rado un compilador de C est ndar, por lo tanto teniendo Unix y algo de
  conocimiento de C podemos crear programas en C, compilarlos en la m quina
  que estemos y ejecut rlos sin necesidad de traer el ejecutable ya compilado
  y arriesgarnos a que no funcione, o cualquier otro rollo que se os pueda
  ocurrir. Si os d is una vuelta por otros e-zines, cosa que os recomiendo,
  no por que este sea malo, sino porque todo lo que le is y escuch‚is van a
  ser m s conocimientos sobre este interesante mundo que no deja de evolucio-
  nar, por lo tanto siempre puedes aprender muchas cosas de otra gente que
  sabe m s que tu. Pues eso, que si mir is otros os dar‚is cuenta de la
  cantidad de programas fuentes de C para Unix que hay, ah¡ es donde voy:
  mi principal objetivo en esta secci¢n es la de que cuando veas alguno de
  estos programas no te limites a borrarlo porque no te interesa, o a usarlo
  sin ni siquiera entender una l¡nea, sino que seas capaz de seguir el curso
  del programa y hasta modificarlo a tu gusto (si eres capaz, claro).

        Dicho esto comencemos un poquito con nuestro curso. Los que ya conoz-
  c is algo de C bajo DOS o Windows os recomiendo que le is la secci¢n de
  asignaci¢n de memoria, cuando lleguemos, ya que es la principal diferencia
  entre estos sistemas operativos, pues Unix gestiona la memoria de una forma
  diferente al DOS. Los que no teng is ni idea de C, segu¡dlo desde el prin-
  cipio y no os salt‚is cap¡tulos, ya que los cap¡tulos siguientes se apo-
  yar n en los anteriores.


        1.1 COMPILADOR DE C:
        ~~~~~~~~~~~~~~~~~~~~
        El compilador que vamos a usar ser  el que trae por defecto el sis-
  tema operativo Unix, el CC o el GCC. Estos compiladores entienden un C
  est ndar, pero... ¨que significa esto? Pues esto quiere decir que los pro-
  gramas en C que hagamos ser n entendidos por cualquier compilador de C.
  Esto quita un poco de facilidad en algunos aspectos, por ejemplo no tendre-
  mos manejo de gr ficos, ni de pantalla, ya que estas librer¡as no son es-
  t ndares, pero as¡ nos aseguramos de que nuestro programa funcionar  tanto
  en casa, en la Universidad o en un sistema que estamos hackeando. Si no
  ten‚is Unix o Linux, tambi‚n pod‚is seguir este cursillo, ya que lo daremos
  m s a un nivel te¢rico que con muchos ejemplos (aunque siempre es bueno
  poder practicar, claro esta).

        Para compilar nuestros programas debemos escribir el c¢digo fuente
  con un editor cualquiera, y luego escribir desde el sistema operativo (GCC
  o CC, dependiendo del compilador que usemos):

  gcc nombre.c

        Esto genera un fichero llamado a.out donde tendremos nuestro ejecuta-
  ble. Para dirigir el ejecutable a otro archivo usad la opci¢n -o:

  gcc nombre.c -o nombre.x

        Para ejecutar el programa, escribid nombre.x


        1.2. PRIMEROS PASOS EN C:
        ~~~~~~~~~~~~~~~~~~~~~~~~~
        Pues s¡. All  vamos: En este primer cap¡tulo veremos el esquema ge-
  neral de un programa en C, para que vay is tomando contacto con este len-
  guaje.

        Un programa en C se compone de tres partes principales:

        -Directivas al preprocesador y variables globales.
        -Funci¢n principal.
        -Zona de funciones.


        1.2.1. DIRECTIVAS AL PREPROCESADOR Y VARIABLES GLOBALES:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~            
        Primero y antes de nada, defin mos los t‚rminos. Una directiva al
  preprocesador es una instrucci¢n que se evalua antes de compilar el progra-
  ma. Hay distintas directivas, ya iremos viendo algunas de ellas, y para que
  sirven. Por ahora saber que una directiva viene precedida de # por lo tanto
  si v‚is alguna instrucci¢n en C con este simbolo ya sab‚is lo que es.

        Una variable global, es una variable que es reconocida por todo el
  programa, es decir, tanto el principal como las funciones a las que llame.
  Dicho esto pasamos a definir esta zona, en un principio localizamos las
  directivas, posteriormente los prototipos de las funciones que creemos, que
  no he hablado antes de ellas porque se incluyen en las directivas, y por
  £ltimo las variables globales. Esto es solo por est‚tica y intentar guardar
  un orden, si no quer‚is hacerlo as¡ no est is obligados.


        1.2.2. FUNCIàN PRINCIPAL:
        ~~~~~~~~~~~~~~~~~~~~~~~~~            
        Aqu¡ tenemos el c¢digo de nuestro programa. En C, la funci¢n princi-
  pal debe tener el nombre "main", si no es as¡ nos dar  un error. Tras main
  se abrir  una llave, y se escribir n las variables locales, que son las
  conocidas solo por la funci¢n donde son declaradas, y las sentencias del
  programa. Al final se termina cerrando una llave.


        1.2.3. ZONA DE FUNCIONES:
        ~~~~~~~~~~~~~~~~~~~~~~~~~            
        En esta zona tendremos las funciones que hay mos creado para nuestro
  programa. Cada funci¢n debe tener su prototipo declarado en la zona de
  directivas, y posteriormente, debajo del main se desarrolla el c¢digo para
  cada funci¢n. Pero esto lo veremos con m s detalle en pr¢ximos cap¡tulos.


        1.3. PEQUE¥AS PARTICULARIDADES DE C:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~          
        -Los comentarios en C se ponen de esta forma: /*comentario*/.
        -El Lenguaje C diferencia may£sculas de min£sculas, por lo tanto ser 
         diferente la variable d1 de D1, mucho cuidado con esto.
        -Excepto las directivas, el resto de las sentencias en C terminan con
         un ; que no se nos olvide, o dar  un error en la compilaci¢n.
        

        Para finalizar esta primera entrega, os doy este programita en C para
  que vay is mirando lo aprendido y aclar‚is algunas dudas:

/*Este es el programa m s visto del mundo*/
/*COMIENZA LA ZONA DE DIRECTIVAS*/
#include "stdio.h"
#include "stdlib.h"
/*FIN DE LA ZONA DE DIRECTIVAS*/
/*COMIENZO DEL MAIN*/
main()
{
        system("clear")        
        printf("Esto funciona porque soy un monstruo.");
}
/*FIN DEL MAIN*/
/*AL NO HABER FUNCIONES NO HAY ZONA DE FUNCIONES Y EL PROGRAMA SE TERMINA Y
ESTA LISTO PARA SER COMPILADO*/


        Comentarios sobre el programa:

        Pasamos a ver l¡nea a l¡nea que hace este programa:

        Las dos primeras l¡neas, como pod‚is ver, son de comentarios, ya que
  vienen encerradas entre /* y */ como dije antes.

        Las siguientes dos l¡neas son directivas include. Este tipo de di-
  rectivas nos sirve para incluir un archivo dentro de nuestro programa, es
  como si a¤adi‚ramos el c¢digo de este archivo al de nuestro programa. Por
  lo tanto, lo que hacemos es "a¤adir" el c¢digo de los archivos stdio.h y
  stdlib.h a nuestro programa. Y esto, ¨para qu‚? Pues muy simple, dentro de
  los archivos con extensi¢n *.h, tenemos adem s de otras cosas los proto-
  tipos de las funciones que vamosa usar en nuestro programa. Esto quiere
  decir que, por ejemplo, para poder usar la funci¢n printf(); que sirve para
  escribir por pantalla, debemos "decirle" al compilador como es esa funci¢n,
  o sea, que par metros recibe y que par metros retorna. Esto es lo que hace
  el prototipo de una funci¢n. En el fichero stdio.h, tenemos los prototipos
  de entrada y salida est ndar (standar-input-output), es decir, salida por
  pantalla y entrada por teclado. El stdlib nos da el prototipo de system();
  que llama al sistema operativo para ejecutar un comando.

        Stdlib (standard library) es un conjunto de funciones de uso general.
  Existen m s archivos de cabecera, como el math.h para operacioens matem ti-
  cas, pero stdio y stdlib nos ser n indispensables casi siempre.

        Continuamos y encontramos a main(), esto nos indica que va a comezar
  el programa principal, los par‚ntesis son necesarios aunque no pong is
  nada, pues main puede recibir datos desde la l¡nea de comandos, y estos
  ir¡an ah¡, pero por ahora limitaos a dejarlo vac¡o, ya que no loa necesita-
  remos a£n.

        Abrimos la llave y comenzamos con el c¢digo. La sentencia system();
  llama al sistema operativo para ejecutar un comando, en este caso clear,
  que es similar al cls del DOS, para limpiar la pantalla, el comando a eje-
  cutar debe ir entre comillas dobles ("").
        
        La siguiente sentencia es printf();. Esta sentencia es muy com£n ya
  que nos permite escribir en la pantalla. En este caso, escribimos lo que
  hay entre las comillas dobles. M s adelante estudiaremos m s a fondo esta
  sentencia. Cerramos la llave y por lo tanto finalizamos el main, y con ello
  el programa.


        2. TIPOS DE DATOS:
        ~~~~~~~~~~~~~~~~~~

        TIPO:           DESCRIPCIàN:            FORMATO:
                                                "i" ¢ "d"
        int             entero                  "f"
        float           real                    "c"
        char            car cter                "lf"
        double          real


        Estos son los tipos de datos b sicos que usa C:

        -int: Valor entero representado normalmente (a veces var¡a seg£n el
              compilador) por dos bytes.

        -float: Representa valores reales (admiten decimales) y se representa
                con cuatro bytes.

        -char: Variables que almacenan UN SOLO car cter en un byte. No alma-
               cenan cadenas, ya veremos esto m s adelante con atenci¢n.

        -double: Este es un tipo ampliado del real. Es igual que el real pero
                 almacena los datos en 8 bytes.


        Os estar‚is preguntando: "¨Pero que coj@#&= es eso del formato? Pues
  bueno, cuando veamos la entrada y salida de datos, veremos que por ejemplo,
  al capturar una varieble desde el teclado se le debe "decir" al compliador
  que tipo de variable vamos a coger, para que el compilador sepa como debe
  almacenarla. Por ahora no entraremos m s a fondo, pero recordad bien cada
  tipo el formato que usa ya que es un problema corriente ese de estar media
  hora delante de un programa perfecto y que este no funcione correctamente
  porque confundimos el tipo de dato.

        Sigamos. A partir de estos datos b sicos, con unos modificadores ob-
  tenemos nuevos datos. Estos modificadores son long y unsigned. El modifica-
  dor long se utiliza con int y double, obteniendo un tipo de dato de las
  mismas caracter¡sticas pero que se almacena en m s bytes, por lo tanto
  podemos almacenar un n£mero mayor.

        El otro modificador es unsigned. Este modificador se aplica a todos
  los tipos. Lo que hace es anular el bit de signo que usa el compilador para
  representar n£meros negativos, y usarlo para representar m s n£meros posi-
  tivos.

        Un £ltimo modificador es el short, pero debido a su escaso uso no lo
  vamos a ver. Lo dejo por si lo v‚is por alg£n otro lado, pero es muy
  inusual.

        Los modificadores pueden usarse en conjuntos para crear tipos como
  "unsigned long int" por ejemplo, aunque estos tipos son poco usados.
  Normalmente los b sicos y poco m s son necesarios para programar.


        3. OPERADORES ARITMETICOS:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~
        Como su propio nombre indica, vamos a ver como realizar las operacio-
  nes aritm‚ticas b sicas. El lenguaje C permite estos operadores:

        + = Operador suma.
        - = Operador resta.
        / = Divisi¢n.
        * = Producto.
        % = Operador m¢dulo.
   
        Estos operadores son los de toda la vida. S¢lo vemos uno desconocido:
  el m¢dulo. Este es un operador que retorna el resto de una divisi¢n:

        x = 15 % 6;

        Si imprimimos "x" veremos que tiene el valor 3, que es el resto de
  dividir 15 entre 6, mientras que:

        x = 15 /6;

        tendr¡a valor 2, que es el cociente de la divisi¢n. No confundir estos
  operadores, es muy corriente.

        Otros operadores menos usados son los operadores de desplazamiento de
  bits:

        >> = Desplaza los bits a la derecha.
        << = Desplaza los bits a la izquierda.

        Al desplazar a la derecha dividimos por la potencia 2, y a la izquier-
  da multiplicamos. O sea, que si tenemos n£mero >> 2 dividiremos por cuatro
  a n£mero, y con n£mero << 2 lo multiplicamos por dos. Estos operadores son
  m s r pidos que la multiplicaci¢n y la divisi¢n normal, pero al ser un poco
  complejos de usar no son habituales.

        ­Importante! El resultado del operador divisi¢n depende d elos datos
  que usemos. Una divisi¢n entre enteros da un resultado entero, si es entre
  reales ser  real. En el caso de que sean datos diferentes tiene preferencia
  el que use mayor n£mero de bits. para evitar problemas usamos un casting o
  molde, con el fin de asegurarnos de que el dato resultante es del tipo que
  queremos. Ejemplo:

        Tenemos una variable "i" que es real:

        i = a / b;

        En el caso de que "a" y "b" sean enteros "i" nunca almacena los deci-
  males a que el resultado de dividir un entero entre otro siempre es un en-
  tero. Solucionamos esto con un molde:

        i = (float) a /b;

        Esto indica que el resultado lo queremos almacenar como real. Podemos
  utilizar molde para cualquier tipo (int), (long int), etc...

        Para usar otro tipo de operaciones matem ticas m s complejas como
  potencias, senos, cosenos, tangentes, etc. se incluye el fichero cabecera
  math.h y DEBE COMPILARSE con la librer¡a matem tica, si no habr  error de
  compilaci¢n.

        Para compilar con la librer¡a matem tica:

        cc fichero.c -lm


        4. ENTRADA Y SALIDA DE DATOS:
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        Existen en lenguaje C numerosas funciones para la entrada y salida de
  datos. Nosotros nos limitaremos a las funciones m s corrientes y que, por
  otra parte, son las m s utilizadas, ya que valen para todo. Los prototipos
  de todas estas funciones est n en stdio.h.


        4.1. ENTRADA DE DATOS:
        ~~~~~~~~~~~~~~~~~~~~~~
        La entrada de datos se produce a trav‚s de la entrada est ndar stdin,
  que es el teclado. Para capturar valores num‚ricos usaremos la funci¢n:

        scanf();

        ¨Como se usa esto? Pues as¡:

        scanf("formato",&variable);
       
        Aqu¡ tenemos la import ncia del formato antes visto: si declaramos
  una variable de un tipo y el formato que ponemos es distinto NO dar  error
  el compilador, pero la forma de almacenar el dato ser  incorrecta y a la
  hora de usar ese dato no sabemos que puede contener.
        
        El ampersand (el simbolo &), por ahora limitaos a ponerlo delante de
  la variable a capturar, m s adelante veremos su utilidad, y el porqu‚ de su
  uso.

        Por ejemplo:

        scanf("%i",&v1);/*siendo v1 una variable entera*/

        Tambi‚n podemos capturar m s de una variable al mismo tiempo:
        
        scanf("%i %f",&a,&b);

        Si el dato a capturar es un car cter usaremos la funci¢n:

        getchar();

        En este caso no es necesario el formato, s¢lo igualamos la variable
  tipo char a getchar y tenemos el car cter pulsado. Por ejemplo:

        car=getchar();/*siendo car tipo char*/

        Por £ltimo, si lo que vamos a capturar es una cadena de car cteres
  usaremos:

        gets();

        Tampoco es necesario el formato. Por ejemplo:

        gets(nombre);

        Este tipo de dato lo veremos m s edalante por ser algo peculiar, pero
  no olvid‚is que cuando vay is a capturar una cadena hacerlo con gets();.

        Tanto las cadenas como los car cteres pueden capturarse con scanf();
  pero esta funci¢n da ciertos problemas con estos tipos, por lo que se usan
  funciones espec¡ficas para ellos.

        ­Importante! Cuando cambiamos de funci¢n en el momento de capturar,
  pasamos de scanf(); a gets(); o a getchar(); en ocasiones residuos en el
  b£ffer del teclado, que pueden hacer que el programa no funcione correcta-
  mente. Si ten‚is un error en la ejecuci¢n Segmentation Fault, o simplemente
  intent is capturar un dato, y el programa salta esa l¡nea sin dejar intro-
  ducirlo, entonces deb‚is borrar el b£ffer. Para esto se usa la funci¢n
  fflush();, que limpia el b£ffer que se indique, en este caso stdin, o el
  teclado. Por ejemplo:

        scanf("%f",&interes);
        opcion=getchar();

        Imaginemos que al llegar a esta secci¢n del c¢digo podemos introducir
  el inter‚s, pero cuadno llegamos al getchar, lo salta sin dejarnos introdu-
  cir el car cter. Esto lo arreglamos con el fflush:

        scan(%f",&interes);
        fflush(stdin);
        opcion=getchar();
        

        4.2. SALIDA DE DATOS:
        ~~~~~~~~~~~~~~~~~~~~~
        Para la salida de datos solo usaremos una funci¢n, lo cual nos va a
  facilitar el trabajo. Es la funci¢n printf(); que ya hemos visto por encima
  antes.

        printf();

        Esta funci¢n nos permite imprimir tanto texto como variables. Su uso
  es el siguiente:

        printf("Texto y formatos",variables);

        Los variables deben ir en orden de aparici¢n con los formatos. Ahora
  me explico con un ejemplo:

        printf("El valor de a es:%i, y de b es:%f",a,b);/*siendo a int y b
        float*/

        Esto nos dar¡a la siguiente salida por pantalla para a valor 3 y b
  valor 1.2.

        El valor de a es:3, y el de b es:1.2.

        Los formatos sustituyeron a las variables dentro de las comillas, por
  lo tanto si cambiamos el tipo o el orden NO habr  error en la compilaci¢n,
  pero el programa no funcionar  de forma correcta. Para imprimir car cteres
  tambi‚n se usa esta funci¢n, con el formato%c y %s para cadenas de car c-
  teres. La funci¢n printf(); incorpora nuevos formatos de forma que podamos
  visualizar valores num‚ricos en diferentes sistemas de numeraci¢n. El
  formato %o nos muestra el valor en forma actual, y el %X nos lo muestra en
  forma hexadecimal. Tambi‚n puede usarse %x para que aparezcan las letras
  en min£scula.

        Por £ltimo, printf(); permite secuencias de escape, que van dentro de
  las comillas, y que tienen diversas utilidades:

        \n = Provoca un salto de l¡nea.
        \t = Tabulaci¢n.
        \a = Provoca un pit¡do en el speaker.

        Existen otros, pero estos tres son los m s comunes.
        
        Bueno, pues ya vamos avanzando. Ya podemos empezar a hacer algo con
  el C, aunque no sea gran cosa. Os dejar‚ un programilla planteado para que
  lo vay is haciendo y as¡ practic is un poco. En la pr¢xima entrega ya lo
  resuelvo.

        El programa es muy simple. Debe pedir por pantalla el n£mero de lan-
  zamientos realizados por un jugador de baloncesto y el n£mero de aciertos,
  y calcular posteriormente el porcentaje de acierto del jugador e imprimirlo
  por la pantalla.

        Pues ya est , por hoy hemos terminado. Continuaremos otro d¡a que por
  hoy ya est  bien. Para cualquier consulta, duda, cr¡tica, cagarse en mis
  parientes cercanos o lo que os de la gana, escribid a:

        kapitansponja@softhome.net
