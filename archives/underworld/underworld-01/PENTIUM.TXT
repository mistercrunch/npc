

                            DIVIDE Y FALLARAS

Ciertamente , no  es  muy  frecuente observar  que el presidente de una
compa¤¡a  cuyo  valor  estimado es de unos 8 mil millones de d¢lares se
pase un fin de semana  preparando un mensaje o comunicado para enviarlo
a un grupo  de noticias de Usenet (Internet).Esto, sin ir m s  lejos es
lo que ha tenido  que hacer  Andy  Grove , presidente  de Intel Corp.

¨El motivo?.Durante todo el mes de Noviembre del 94 ha habido un enorme
revuelo  en  uno  de  los  grupos de news de Internet (comp.sys.intel),
debido a unos rumores iniciales,posteriormente confirmados,referentes a
un  error  de  la  unidad  de punto  flotante  del  procesador Pentium.

En  concreto , este  error  se produce  al utilizar la instrucci¢n FDIV
( divisi¢n  en  punto  flotante).La exactitud  de  sus resultados queda
comprometida cuando se usan determinadas combinaciones de operandos,que
se ajustan a unos patrones binarios especiales.El error se produce para
los  tres  tipos  de  precisi¢n  ( simple , doble , y extendida ) y  es
independiente el modo de redondeo.

En uno de los casos mejor documentados,Tim Coe,(Vitesse Semiconductors)
indica que este error puede llegar a afectar al 5§ d¡gito significativo
Seg£n el semanario  Infoworld  (5/12/94) Intel ha confirmado en algunos
casos en los que el error llega a afectar al 4§ d¡gito significativo.

Se  determino  que el error  se produce fundamentalmente cuando se usan
como operandos de FDIV unos  valores muy especiales,que se obtienen  al
sumar o restar incrementos muy peque¤os a determinados n£meros enteros.
Concretamente,si se parte de los enteros 3,9,15,21 y 27  y  se usan los
resultados como operandos de FDIV,el riesgo de que se produzca el error
es muy elevado.

En  Internet  circularon  muchos  programas  que  permiten comprobar si
un procesador Pentium est  afectado por este problema. Algunos de estos
programas son sencillos y  ponen  de manifiesto la severidad del error.

El "bug" fue descubierto por Thomas Nicely ,profesor de matem ticas del
Lynchburg  College.Nicely  estaba intentando calcular  valores inversos
de n£meros primos ,curiosamente con el prop¢sito  de demostrar  que los
PCs de  hoy  en d¡a deben ser tenidos  en cuenta como alternativa a los
supercomputadores a la hora de realizar c lculos matem ticos complejos.

Nicely descubri¢ los primeros errores  en Junio  de 1994, y lo comunic¢
a varios colegas atrav‚s de Mail,para que estos lo pudiesen  verificar.
El 19/10/95 ya hab¡a descartado las restantes posibilidades de error ,y
5 d¡as m s tarde contact¢ con Intel. Comprobaron en efecto, el error se
produc¡a,pero que no hab¡a explicaci¢n para el mismo.

El 30 de Octubre el asunto  se hizo p£blico cuando  alguien reenvi¢ uno
de los informes de Nicely a las   reas de mensajes  de  Compuserve . El
7  de Noviembre apareci¢ un  art¡culo del profesor Nicely en la revista
Electronics Engineering Times,en el que  se  explicaba  el problema ,y,
con ello, se confirmo una noticia de la que hasta el momento s¢lo hab¡a
rumores.

R pidamente , el  asunto  interes¢  a  los  m s  importantes medios  de
comunicaci¢n  estadounidense.El 22 de Noviembre , la cadena de noticias
CNN se convirti¢ en el primer medio no especializado que dio  cobertura
al asunto,en su programa Moneyline.En el programa  se realizaron sendas
entrevistas a  Stephen Smith, Jefe del equipo de dise¤o del Pentium y a
Cleve Moler, Director T‚cnico de The Mathworks (El creador del conocido
programa MatLab).

Smith dijo que la magnitud del error era casi comparable a  la relaci¢n
existente  entre  unos metros y la distancia que separa a la Tierra del
Sol. Por su parte, Moler insisti¢  en la  falta  de  confianza  en  los
resultados  obtenidos  al realizar  c lculos usando un Pentium. En este
programa se inform¢ sobre un descenso inicial del valor de  acciones en
bolsa de Intel Corp.Adem s,se hizo p£blico que Intel conoc¡a el problema
desde el verano.

Dos d¡as  m s tarde ,la  Agencia de  noticias Associated Press envi¢ un
flash (AP 24 Nov 94 0:10 EST V0204) a todos sus abonados a nivel mundial
en  el  que  ofrec¡an algunos detalles sobre  el bug  del Pentium y las
primeras reacciones.

Esto  supuso el  salto definitivo  de la noticia a  todos los medios de
comunicaci¢n. Entre los primeros  en hacerse  eco se encuentran diarios
tan  prestigiosos  como  The New York Times , The Wall St.Journal,y The
Washington Post.

En una nota se suavizaba notablemente el problema referi‚ndose al "bug"
encontrado como "sutil defecto", y se aseguraba que, seg£n estimaciones
propias,un usuario medio de hojas  de c lculo que realizase  unas  1000
divisiones diarias tardar¡a unos 27000 a¤os en encontrar  el error . La
empresa  tambi‚n  promet¡a  reemplazar  los procesadores  defectuosos a
aquel usuario que  demuestre  que realmente  se ven afectados por dicho
error.

En los numerosos centros de investigaci¢n, las soluciones adoptadas han
sido bastante dr sticas.Es el caso del famoso Jet Propulsion Laboratory
(JPL) de Pasadena,en el que se ha suspendido temporalmente  el  uso  de
m quinas equipadas con procesadores Pentium.

Una posible soluci¢n para evitar este error consiste  en inhabilitar la
FPU (Unidad de Punto Flotante).Para la mayor¡a de las aplicaciones  DOS
esto es posible definiendo unas variables de entorno especiales:
SET 87 = NO ( para  programas  generados por compiladores de Borland) y
SET NO87=NO87  ( Para los creados  con  compiladores  de  Microsoft).Al
inhabilitar  la FPU, el rendimiento general  se reduce notablemente.Por
supuesto esta soluci¢n no es v lida cuando se usa Windows  o la mayor¡a
de  los  extensores  del  DOS , ya que  estos ignoran  las variables de
entorno.

En  cualquier  caso , Intel ya ha corregido  este defecto,y,de hecho,el
propio Thomas Nicely fue contratado para la fase de pruebas y detecci¢n
de nuevas anomal¡as. El chip corregido ya est  en producci¢n,y   estubo
disponible en el mercado en los primeros meses de 1995.

Desde  que  se hizo  p£blico este asunto, Intel ha dado muestras de una
cierta transparencia en  la informacion , sobre todo en  los canales de
informaci¢n accesibles a trav‚s Internet : Cuando se  accede al nodo de
Intel atrav‚s del World  Wide Web , una de los  primeras  secciones que
aparecen es " Latest  Info about FDIV bug " .  Es  preciso valorar este
aspecto, ya  que ha sido precisamente  en Internet donde se han vertido
las m s  feroces cr¡ticas a la compa¤¡a.

A  cotinuacion  les  mandamos  el C¢digo  de  un  programa en C para la
detecci¢n del "bug" del Pentium:

#include <stdio.h>

void main()
{
  double x, y, z;

x = 4195835.0;
y = 3145727.0;
z = x - (x/y) * y;
printf("%f\n",z);
}

El resultado de la  operaci¢n efectuada  debe ser 0. Si el sistema est 
afectado por el "bug", se devuelve el valor 256.0 .


Nota: Este informe aparecio en una publicacion en diciembre de 1994.Los
datos han sido actualizados y modificados para una mejor interpretacion.



                                                    ÚÄÄÄÄÄÄÄÄÄÄÄÄÄ¿
                                                 ÄÍð³ Stírm ïight ³ðÍÄ
                                                    ÀÄÄÄÄÄÄÄÄÄÄÄÄÄÙ