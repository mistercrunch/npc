[003]_FIREWALLS_(Conceptos_basicos_y_tipos)_by_oKuPa_-_Disidents_Journal_5
 
 
                     -+-| DisidentS Hack Journal #5 |-+-
 
 
 
 
 
 
 
 
 
   ______________________________________________________________________
  |                                                                      |
  | -+- Titulo_____: FIREWALLS (Conceptos basicos y tipos)               |
  | -+- Autor______: oKuPa                                               |
  | -+- E-Mail_____: okupa__@hotmail.com                                 |
  | -+- Team_______: DisidentS España - http://disidents-team.cjb.net    |
  |______________________________________________________________________|
 
 
 
 
 
"la potencia sin control..no sirve de nada"
>>------------------------------------------------------------------------<<
 
 
 
----------------------------------------------------------------------------
----------------------------------------------------------------------------
 
.==========================================================================.
|===========~ INDICE ~======================================================
|===========================================================================
|=~ 1- Qué es un Firewall y porque utilizarlo                              |
|=~ 2- Tipos de Firewalls                                                  |
|=~ 3- Arquitecturas                                                       |
|=~ 4- Conclusiones                                                        |
|=~ 5- Manual Zone Alarm                                                   |
|=~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~=.
======================================================~ INDICE ~============
============================================================================
 
.==========================================================================.
|===========~ 1- Qué es un Firewall y porque utilizarlo. ~|=================
|===========================================================================
 
	Un firewall es un sistema o grupos de sistemas encargados de controlar 
la información que llega a nuestros ordenadores estableciendo una politica de 
permision mas o menos segura. 

El firewall será efectivo si toda la informacion entrante pasa por el y es asi
 revisada segun los requisitos establecidos por el usuario en la configuracion 
del mismo. En resumidas, con un firewall tu decides lo que entra o no en tu conexion.


La razon de usar un firewall no es otra que la seguridad, cada vez es mas necesario
estar protegido en internet debido al alto numero de nuevos " hackers " que se denominan
 asi por saber usar un troyano... bueno de todos es sabido que cuanto mas seguro tengas 
tu equipo mas dificl sera que alguien pueda dañarlo. Tambien un firewall ayudaria a 
controlar y erradicar la multitud de dialers lanzados por las compañias de " 906 " 
a internet. 

Aunque tambien esta el inconveniente de que si no lo has configurado bien
algunas aplicaciones no funcionen si no cambias la politica de lo que es aceptado o no.

Estas razones se resumen en:


Proteger el ordenador de los ataques que se produzcan desde máquinas situadas en Internet. 

Asegurar que nuestro ordenador no se utiliza para atacar a otros. 

Prevenir el uso de troyanos que puedan existir en el sistema debido a que alguien nos 
lo ha introducido a través de correo electrónico o en algún CD o disquete. 

Detectar patrones de ataques e identificar de dónde provienen. 

Evitar que nuestro ordenador pueda ser un punto de entrada a una red privada 
virtual en el caso de utilizarlo para teletrabajo o acceso remoto a la red de una empresa. 

Al probar nuevas aplicaciones podremos averiguar cuáles son exactamente los puertos de comunicaciones que necesitan usar. 


-----------------------------------------------------------------------------
.==========================================================================.
|===========~ 2- Tipos de Firewalls. ~|=====================================
|===========================================================================
 
Basicamente hay dos tipos de firewalls, de nivel de red y nivel de aplicacion:


Los firewalls de nivel de red actuan en función del origen, la dirección de 
destino y el port en cada paquete IP. 

Estos firewalls son muy rapidos y sencillos para el usuario.Dentro de este 
grupo estan los routers de filtros de paquetes encargados de decidir lo que 
pasa y lo que no. Examinan el header de los paquetes en donde se encuentra
la IP de origen,la de destino, el protocolo, los ports de destino etc... 
si todo esto es correcto y concorde a la configuracion este paquete entrara
sin ningun tipo de problema y si por lo contrario no esta acorde, 
simplemente se denegara la entrada.


Por otro lado tenemos los firewalls de nivel de aplicacion, el funcionamiento 
de estos consiste en no permitir el trafico directo entre redes, analizando
y logeando cada dato que pasa, por lo tanto con estos firewalls se consigue
un control masdetallado y una seguridad de mayor grado.Estos firewalls 
instalan un software determinado para cada aplicacion, el problema de esto 
reside en que si no se instala dicho software para una aplicacion esta no 
puede ser enrutada, esto puede hacer de estos firewalls una configuracion
mas costosa pero como he dicho antes mas segura :)

-----------------------------------------------------------------------------
.==========================================================================.
|===========~ 3- Arquitecturas. ~|==========================================
|===========================================================================

Las arquitecturas son las formas de implementar una barrera de seguridad a nuestra red. 

Hay farias formas/tipos:



	De dos bases:



Es un firewall con dos interfaces de red, lo que permite aislar una red interna 
de una externa que no sea de confianza bloqueando asi el trafico TCP/IP. 

El peligro de esto reside si algun user se hace con el acceso directo de conexion
 al firewall y si el firewall falla la red interna se veria desprotegida ante cualquier intruso.

 Estos son algunos consejos de seguridad para tu sistema con un firewall de dos bases:


·	Eliminar las herramientas de programación: compiladores, enlazadores, etc..

·	Eliminar los programas con autorizaciones de SUID y SGID que no se necesiten 
	o no se comprendan. Si los programas no funcionan, siempre es factible colocar de nuevo
	aquellos que son esenciales.

·	Utilizar particiones en el disco para que, en caso de haber una invasión 
	para llenar todo el espacio del disco en la partición, la invasión queda 
	confinada en dicho espacio.

·	Eliminar todas las cuentas especiales y del sistema que no necesite

·	Eliminar los servicios de red que no se requieran. Utilizar el comando 
	netstat –a para verificar que solo tiene los servicios precisos. 

.       Editar los archivos de servicio /etc/inetd.conf para eliminar las definiciones de servicio innecesarias.


                                       EQUIPO
 __________                               |
/          \    RED   _________           |
INTERNET    |--------| FIREWALL|----------| 
\__________/         |_________|          |
					  |
      				       EQUIPO




	
	Firewall como servidor bastión:



Ya que el firewall es necesario para la seguridad de la red,se coloca otra defensa entre la 
red externa no confiable y la red interna. Esta línea casi siempre la proporciona un router
de selección.En esta forma el firewall solo tiene una interface de red conectada a la red
interna y el router de seleccion dos una que va a internet y otra a la red interna haciendo
pasar asi todo el trafico por el bastion. Con esto se consigue que si un intruso se cuela 
en el router de seleccion, despues debera saltarse el firewall. Toda la informacion 
que llegue al firewall sera seleccionada y se aceptara y negara segun el escrutinio.



						     ________
						    / SERVER \
						    \________/
						       |
						       |
                                       EQUIPO          |
 __________                               |            |
/          \    RED   _________           |            |
INTERNET    |--------| FIREWALL|----------|------------| 
\__________/         |_________|          |
					  |
      				       EQUIPO





	
	Subredes seleccionadas:



De esta forma haces que la red externa y la interna tengan acceso a una red aislada 
pero nada puede circular en ambas redes a traves de la red aislada, esto se lleva 
a cabo mediante una combinacion de routers de seleccion configurados de una manera especifica.
Algunas de estas redes tambien pueden tener compuertas a nivel de aplicacion y actuar
 como firewalls a navegantes de la red exterior.







			ROUTER DE SELECCION
				|
				|		      ________
                           _____|_______             /        \
RED EXTERNA---------------| RED AISLADA |------------|INTERNET |
RED INTERNA---------------|_____|_______|	     \________/
		                |
		                |
                       ROUTER DE SELECCION



__________
*NOTA


Las compuertas a nivel de aplicación pueden manejar tráfico de almacenaje y envío, así como tráfico interactivo. 
__________

Para elegir una arquitectura u otra depende mucho del uso de la red y necesidades del usuario, pero 
la unica arquitectura no recomendada es aquella en la que la informacion no pase por el firewall
y se someta a su analisis.

 
-----------------------------------------------------------------------------
.==========================================================================.
|===========~ 4- Conclusiones. ~|===========================================
|===========================================================================
 
	Tras este documento hemos visto que es un firewall y porque utilizarlo, 
pero lo que esta claro es que con poner un firewall tus equipos no van a estar 
protegidos al 100% debes tambien poner una politica de seguridad que sea efectiva, 
esto se consigue revisando los logs, configuraciones etc... en resumidas un firewall
 es una herramienta que ayuda a mejorar la seguridad pero gran parte del 
trabajo lo has de seguir haciendo tu :)

El siguiente apartado trata sobre la configuracion de uno de los firewalls que anda por el mercado.


-----------------------------------------------------------------------------
.==========================================================================.
|===========~ 5- Manual Zone Alarm. ~|======================================
|===========================================================================
 
	Zone Alarm es uno de los firewalls que circulan por internet, hay varias 
versiones hasta una gratuita en la pagina de ZoneLabs ( www.Zonelabs.com ).

Una vez descargado, la instalacion es simple, tan solo con hacer doble click 
en el exe ( autoejecutable ), leer y aceptar los terminos de uso.

Despues de la instalacion y de la reiniciacion del equipo el firewall ya irá 
actuando en las conexiones, aceptandolas o denegandolas segun la configuracion
establecida,sera necesario configurar todas aplicaciones que precisan de conexion.

En cuanto abramos una aplicacion de las nombradas anteriormente saldrá un mensaje
del firewall: NEW PROGRAM: Do you want allow Internet Explorer to access the Internet?

Si pulsamos YES se ejecutara y si pulsamos NO se denegara. 

Si la aplicacion va a ser usada con frecuencia se marca: 
Remember this answer the next time I use this program 
y asi no hará falta aceptar la peticion cada vez que sea utilizada.

El otro tipo de permiso que puede solicitarnos ZoneAlarm es para programas 
que permitan el acceso desde Internet a nuestro ordenador y soliciten el envío de datos.

Este es el caso de IRC,Kazaa,ICQ entre otros, la pregunta será: 

SERVER PROGRAM: Do you want to allow Microsoft Outlook to act as a server? 

y como en el caso anterior de ti depende permitirlo o no. 

Con esta opcion conseguiriamos hacer que un troyano no nos afectara ya que 
denegariamos el permiso y posteriormente borrariamos el ejecutable.

Hemos visto lo que ocurre con las aplicaciones pero y que pasa cuando alguna
 ip intenta conectar a nuestro equipo? ( podria ser un intruso ) 
Cuando ocurre esto sale en pantalla un aviso con la ip que intenta conectar,
 esto puede ser una falsa alarma, pero aun asi el firewall ha actuado bien al 
bloquear dicha conexion. Solamente hay que preocuparse de las advertencias sobre intentos específicos de conexión con los puertos por parte de troyanos, como Back Orifice o Netbus.

Al pulsar con el boton derecho en el indicador de Zone Alarm aparecen las siguientes opciones:

.Engage Internet Lock: pararemos el acceso a Internet de todas las aplicaciones 
a excepción de las que tengan marcada la columna Pass Lock (saltarse el bloqueo) 
del menú «Program Control: Programs» 


.Stop all Internet activity: pararemos el acceso a Internet de todas las aplicaciones. 


.Restore ZoneAlarm Control Center: abre la aplicación (se obtiene el mismo efecto
 haciendo doble clic sobre el icono de la barra de tareas) 


.Shutdown ZoneAlarm: se desactiva la aplicación y, por tanto, ZoneAlarm deja de analizar el tráfico. 

 
El Firewall tambien tiene varias opciones al ejecutarlo:



	-SECCION «OVERWIEW»

 
PESTAÑA «STATUS» 

Blocked Intrusions: informa del número de ocasiones en el que, tanto el cortafuegos
 como el MailSafe, han actuado para impedir un acceso no autorizado. Informa 
también cuantos de estos bloqueos pudieran ser debidos a hackers (high-rated). 

Proporciona información de los accesos bloqueados, de programas que han accedido 
a Internet y de la configuración actual del MailSafe (protección para e-mail). 
Todo ello, desde el último reset. 

Reset: Para poner el contador a cero debe pulsarse en «Reset to Default». 
 


PESTAÑA «PRODUCT INFO»
 
Versión del producto. 
Try Now!: para descargar la versión de prueba (válida por 30 días) del ZoneAlarm Pro. 
Soporte en línea del producto. 
Datos sobre el registro que se pueden cambiar pulsando en el botón «Change Reg» 
 


PESTAÑA «PREFERENCES» 

Check for product updates: marcando esta casilla «Automatically», el propio
programa comprobará regularmente la existencia de nuevas actualizaciones del
programa, cosa que podemos realizar en cualquier momento pulsando sobre el botón Check for Update. 
Si está disponible una nueva actualización, procedemos a su instalación, 
no siendo necesario desinstalar la versión actual ya que durante el proceso
comprueba si existe una versión anterior e, incluso, nos permite mantener la configuración actual o borrarla. 

Show ZoneAalarm on top during Internet activity: ejecutar el programa en modo "siempre visible"

Load ZoneAlarm at Startup: ejecutar el programa cada vez que arranquemos Windows. 
Imprescindible tener marcada esta casilla. 
En cualquier momento y aunque esté desaconsejado, podremos apagar el cortafuegos
pulsando con el botón derecho sobre el icono de actividad en la Barra de Tareas 
y seleccionando la opción Shutdown ZoneAlarm.

Remember the last tabs visited in the panels: si marcamos esta casilla, 
el Panel de Control se abrirá en la última sección visitada.

Explanatory text witin panels: mostrar (show) u ocultar (hide) el texto 
explicativo que aparece en la parte izquierda del Panel de Control. 

En este apartado escogemos el nivel de privacidad que deseamos cuando 
utilizamos los servicios on-line que proporciona 
ZoneLabs:

Alert me with a pop-up before I make contact: Una ventana nos avisará que vamos 
a contactar con ZoneLabs antes de que aquél se produzca.

Hide my IP..., Hide the last... : Oculta nuestra dirección IP de forma total o parcial cuando ésto sea posible.
 

	-SECCION «FIREWALL»

 
PESTAÑA «MAIN»

 
1. INTERNET ZONE SECURITY: Para ordenadores conectados directamente a Internet 
(tanto si está en red como si no), es aconsejable seleccionar el nivel High para, 
de esta forma, dejar a nuestro ordenador casi invisible a Internet. 

Con este nivel es posible que algún programa funcione incorrectamente pero, normalmente,
puede solucionarse ajustando su configuración en la sección Program Control: Programs. 
Si el acceso a Internet es a través de una red, entonces es conveniente seleccionar el nivel Medium.

2. TRUSTED ZONE SECURITY: En cuanto a la zona Local (sólo para ordenadores 
conectados  a una red local o intranet) o de confianza, suele ser suficiente 
el nivel Medium. De esta forma impresoras u otras máquinas remotas correspondientes a la red podrán compartirse sin problemas.

3. ADVANCED: Esta sección proporciona ajustes avanzados siendo normalmente
 válidos los valores por defecto. Los dos primeros («Block Trusted Zone Servers» 
y «Block Internet Zone Servers») impiden a todos los programas actuar como servidores, aún cuando los hayamos autorizado en la sección Programs Control: Programs.

4. Reset to Deafult: devuelve la configuración a sus valores por defecto. 


PESTAÑA «ZONES» 


Desde aquí podemos podemos gestionar ordenadores, redes, adaptadores de red 
o sitios e incluirlos en la zona Internet o Trusted (de confianza).

Normalmente, ZoneAlarm identifica automáticamente los adaptadores de red
 y les asigna la zona «internet». Se recomienda mantener esta configuración 
y añadir a la zona «trusted» los ordenadores, por ejemplo, de una intranet o red local.

En general, añadiremos un componente a la zona «trusted» cuando queramos 
compartir determinados recursos entre sus componentes. 





 	-SECCION «PROGRAM CONTROL»

 
PESTAÑA «MAIN» 


1. PROGRAM CONTROL: conviene establecer la opción Medium (Med.) ya que, de esta 
forma, el ZoneAlarm funcionará en función de lo establecido en la pestaña «Programs»
de esta misma sección.

2. AUTOMATIC LOCK: Bloqueo automático. Si lo activamos (on), pulsando en «Custom»
personalizaremos este bloqueo:

Lock Mode to Use When Enabled: podemos activar el bloqueo tras un período de 
inactividad o al activarse el protector de pantalla.

When Lock Engages: La primera opción (Allow the pass-lock programs to access the Internet)
 bloquea todos los programas excepto aquellos que tienen marcado «pass lock» en 
la pestaña «programs» de esta misma sección. La segunda opción (Block all Internet access)
 bloquea todos los programas sin excepción. 

PESTAÑA «PROGRAMS» 


Esta sección la utilizaremos para consultar y administrar las autorizaciones que 
le hemos dado a cada uno de los programas para el envío o recepción de información.

En esta pantalla encontraremos todos los programas que tenemos autorizados y los permisos que les hemos ido dando a cada aplicación, que podemos modificar, eliminar o añadir.

1. PROGRAMS: en esta columna aparece el nombre del archivo ejecutable del programa y su versión.

2. ACCESS (TRUSTED/INTERNET): acceso en modo cliente para cada una de las zonas. 
Para cambiar su estado sólo tenemos que pulsar con el botón izquierdo en la casilla
y seleccionando:  para autorizar a la aplicación el acceso,  si queremos denegar su
acceso y  si queremos que nos pregunte siempre qué comportamiento tomar cuando el 
programa quiera salir a Internet.

3. SERVER (TRUSTED/INTERNET): columna en la que veremos los programas que están 
autorizados a funcionar como servidor y que, de esta manera, pueden recibir peticiones
 desde Internet. Las opciones son las mismas que en punto anterior.

4. PASS LOCK : esta opción está relacionada con el cerrojo del que hablamos 
anteriormente. Sólo los programas que tengan esta casilla marcada tendrán servicio
 a Internet cuando activemos el candado, el bloqueo automático o la opción Engage Internet Lock.

5. ENTRY DETAIL: Información relativa a los programas que se muestran en la tabla.

6. ADD: para añadir manualmente un programa a la tabla.
 
Si quisiéramos eliminar las reglas establecidas para un programa de esta lista 
(por ejemplo, porque ya no lo utilizamos o lo hemos desinstalado), nos pondríamos
 sobre él, pulsando el botón derecho del ratón y seleccionaríamos Remove.
No obstante, si lo volvemos a instalar o ejecutar, volverá a aparecer esta ventana
para configurar sus permisos. Conviene de vez en cuando revisar esta lista para actualizar permisos o eliminar programas.




	-Alert Events Shown
 

PESTAÑA «MAIN» 


1. Alert Events Shown: este control determina que tipos de información se mostraran
en una ventana. Si selecciona «ON» aparecerá una ventana cada vez que se produzca 
una bloqueo o una alerta. Si selecciona «OFF», sólo se mostraran las alertas correspondientes a «New Program», «Server Program» and «Changed Program».
2. ADVANCED:
Log Archive Setting: al marcarla, el ZoneAlarm guardará un registro de todas las alertas.

Log Archive Location: nos muestra la ubicación de los archivos que, de forma regular,
va guardando el programa si tenemos activada la casilla anterior. Conviene purgarlo
 cada cierto tiempo pulsando sobre el botón Delete Log.

Log Archive Appearance: utilice estos controles para determinar el separador del
 campo para los ficheros de registro. 

 
PESTAÑA «LOG VIEWER» 


1. View only the last n alerts: Permite configurar el número de alertas que se mostrará
en la tabla inferior.

2. Alerts list: información relativa a las alertas producidas.

3. Entry Detail box: muestra más detalles de la alerta seleccionada en la tabla superior.

4. Add to Zone: Supongamos que ZoneAlarm ha bloqueado un acceso desde un ordenador
con el que queramos compartir recursos. Pues seleccionamos la alerta correspondiente y pulsamos «Add to Zone» para asignar
dicha entrada a la zona «trusted».
More Info: proporciona información añadida de la alerta seleccionada en la tabla (en ingles)

5. Clear List: Para borrar las alertas. 
 


	-SECCION «E-MAIL PROTECTION»

 
En esta sección encontramos un apartado llamado Basic MailSafe Settings que, cuando
 esté activo (ON), nos protegerá sólamente de virus que nos lleguen en forma de 
VBS (Visual Basic Scripts). MailSafe funciona con clientes POP3 e IMAP,
identificando scripts adjuntos a mensajes de correo electrónico y nos previene de 
su ejecución. Cuando ZoneAlarm detecte un fichero adjunto sospechoso, lo pondrá 
en cuarentena cambiando su extensión por "zl" seguido de una letra y número; además cambia el icono del adjunto, apareciendo ahora el del ZoneAlarm.

No obstante, MailSafe no eliminará automáticamente archivos adjuntos en los 
correos electrónicos ni es un antivirús, únicamente pondrá el archivo en cuarentena
dándonos las oportunidad de prevenir la ejecución de scripts que pudieran ser maliciosos. 

-----------------------------------------------------------------------------
                   DisidentS Hacker Team 2003 (c).
 
----------------------------------------------------------------------------
                 Mail del Team: disidents@yahoo.es
----------------------------------------------------------------------------
 
                               0
                             X0 0X
                               S
