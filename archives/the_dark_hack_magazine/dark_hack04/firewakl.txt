INTERNET FIREWALLS

GLOSARIO
Algunos conceptos que aparecen en el articulo,si no sabes lo que son las
capas,el dns o una ethernet mas vale que dejes de leer y te vayas a visitar
la peich del penthouse o algo de eso XDDD

-ACL: Access control list (lista de control de acceso)conjunto de reglas de
       filtrado aplicadas a los routers.

-Autentificacion: Proceso de deteminar la identidad de un usuario que intenta
                  acceder a la red

-Autorizacion: Proceso de determinar que tipo de actividades estan permitidas
               (una vez autentificados se autoriza a los usuarios a diferentes
               tipos de acceso o actividades)

-Bastion (Host): Sistema que ha sido reforzado y configurado especialmente
                 para resistir un ataque,normalmente ningun ordenador de la
                 red externa puede acceder a la red interna sin pasar por
                 aqui.

-DMZ.Demilitarized zone (zona desmilitarizada): parte de la red que no
                        corresponde a la red interna ni a Internet,por ejemplo
                        un ISP puede colocar en esta zona,y protegidos por un
                        router los servidores HTTP,FTP etc que seria peligroso
                        que estuvieran en un host bastion.

-Firewall: conjunto de hardware y/o software montados sobre un sistema (o
           sobre varios) que controla el trafico entre dos redes aplicando una
           serie de reglas.

-Proxy Server: Reenvian los paquetes recibidos a otra red,sin permitir el
               trafico directo entre ellas,son usados en lugar de los routers
               a veces,algunos  incluyen utilidades de "logging" y auditoria
               asi como autentificacion,pueden implementar reglas de
               seguridad, como por ejemplo permitir las conexiones via FTP
               entrantes y no las salientes.

-Riesgo (Zona de ): Zona que se podria ver comprometida tras un ataque, por
                    ejemplo en una red conectada directamente a Internet toda
                    la red seria zona de riesgo.

-Router (encaminador o enrutador): Transfieren o dirigen los paquetes entre
                     distintas redes,tienen direcciones de red,con lo que los
                     paquetes enviados a otras redes pueden ser enviados a el
                     directamente que se encargara de dirigirlo a la red
                     destino. Aplicandoseles ACLs permiten aceptar o denegar
                     el trafico.


DE QUE NOS PROTEGEN Y DE QUE NO

     El firewall controla el trafico entre dos redes proporcionando proteccion
y funciones de auditoria,se configuran para proteger las redes internas del
trafico "malvado" del exterior,siendo la unica puerta de entrada a la red
interna, es mucho mas dificil un posible ataque, permiten el acceso
transparente a los usuarios de la red interna a la red externa.

     El firewall no nos puede proteger de ataques internos,de backdoors
colocadas en nuestra red interna,ni contra troyanos o virus que pueden llegar
por mediacion de algun usuario de la red interna que ejecuta un programa raro.
Ademas debe ser una pieza mas del engranaje de seguridad,por ejemplo si una
empresa tiene una red con informacion secreta o privada deberia ser aislada
del resto de la red corporativa.


DISE¥O DEL FIREWALL

     A la hora de dise¤ar el firewall se deben tener en cuenta varias cosas,
lo primero es saber que grado de proteccion auditoria etc se debe aplicar,
saber que servicios ha de ofrecer la red interna a la externa y viceversa,que
se debe denegar y que se debe permitir,otra cuestion es saber con que
presupuesto contamos,ya que podemos adquirir un producto completo por un
millon o costarnos solo un poco de tiempo y aplicarle unas ACLs a nuestro
CISCO. En la parte tecnica debemos pensar en si colocar un proxy, o un router,
o una combinacion de ambos, si hay que hacer un DMZ y como, si hay que aislar
totalmente la red interna,que tipo de red y subredes tenemos y que topologia
y protocolos usan y con que maquinas tarjetas y s.o. contamos


TIPOS DE FIREWALL

     Vamos a echar un vistazo a los tipos de firewalls mas comunes,hay dos
tipos basicos:

-Firewalls a nivel de red
-Firewalls a nivel de aplicacion

*Firewalls a nivel de red

     Estos fires toman sus decisiones basandose en el analisis de los
paquetes que reciben (fuente,destino,direccion, puertos..)se pueden
configurar para que acepten o rechacen los paquetes que no nos interesan, por
ejemplo se pueden configurar para que rechacen los paquetes provenientes de
determinada red,o que bloqueen todos los paquetes de nuestra red con destino a
determinada red (listas negras). El ejemplo tipico es un router (Cisco) aunque
estos no ofrecen una solucion super segura ya que solo trabajan en el nivel de
red y transporte y no en todos los niveles del TCP/IP y ademas no tienen por
regla general mecanismos de alerta. Tambien se puede usar un ordenador
corriendo algun s.o. tipo Unix con el kernel correctamente configurado y
corriendo software de filtrado de paquetes. (Linux es una excelente y
economica solucion corriendo ipfwadm o ipchains). Esto esta siendo solucionado
en los ultimos modelos que ya incluyen informacion sobre el trafico, estado de
las conexiones, y algunas  cosas interesantes como informacion sobre los
numeros de secuencia del TCP,ejemplo de esto son los Cisco Pix, Watchguard,
Checkpoint FW-1 o un ordenador corriendo openBSD con ip-filter.
Por otra parte,son rapidos y transparentes al usuario de la red interna.

*Firewalls a nivel de aplicacion

     Suelen ser hosts corriendo proxies servers,los cuales no pemiten el
trafico directo entre dos redes,es decir la red interna no se conecta con
Internet,el proxy transmite de una red a otra una copia de cada paquete
aprobado (salida o entrada)y se pueden usar por ejemplo,para controlar los
servicios que se desea ofrecer. Hay que tener en cuenta que al usar un proxy a
nivel de aplicacion los usuarios deben usar un cliente que permita trabajar
con proxy,y hay que usar un servidor proxy para cada servicio.
Suelen proporcionar  metodos sencillos de "log" y registro de trafico.
Dos de los paquetes mas populares para Unix (Linux inclusive)son el TIS
firewall toolkit y el SOCKS,y para NT el IIS y el Netscape Commerce Server
incluyen proxy servers.
Es mas seguro que el firewall a nivel de red,pero puesto que es un programa el
que analiza y reenviaes algo mas lento.
Hay una variante de este tipo conocida tambien como *Firewalls a nivel de
circuito,bien,este es exactamente igual al fw a nivel de aplicacion salvo que
no se requiere usar aplicaciones especificas para el proxy,creando un circuito
entre la aplicacion y el servidor proxy y usando un solo servidor proxy para
todos los servicios.


ALGUNAS ARQUITECTURAS

     Despues de ver los tipos mas comunes de firewalls vamos a ver ahora
algunas de las implementaciones de estos. Los tres tipos mas usados son:

-Simple Host Bastion (host con dos interfaces de red y filtro de paquetes)
-Host de doble conexion (host con dos interfaces de red separados y proxy)
-Filtrado de host (combinacion de router y host bastion)
-Filtrado de subred (combinacion de 2 routers y proxy)

*Simple Host Bastion

     Aunque normalmente son usados en conjunto con mas dispositivos, esta
forma simple de firewall,aun es usada por multitud de personas,(asi como el
colocar un router con una serie de ACLs solo),consiste en un ordenador
con dos interfaces (uno a cada red)y software de filtrado y analisis de
paquetes. Es poco seguro,ya que si alguien consigue acceder a el,la red
estara a su merced,y ademas no implementa un grado avanzado de proteccion,
requerido por muchas aplicaciones de red.

*Host de doble conexion

     Se usa un ordenador como linea divisoria entre Internet y la red interna
que utiliza dos interfaces distintos,uno para cada una de las redes.
Utilizan un conjunto de proxies (fw a nivel de aplicacion) o uno (fw a nivel
de circuito) para controlar el trafico entre las dos redes,hay que tener en
cuenta la necesidad de desactivar el encaminador interno del host,una vez
hecho esto los paquetes pasan por el punto de comprobacion,una capa de
aplicacion,que es el unico camino entre las redes,si el encaminamiento interno
esta activado los paquetes evitaran las funciones de la capa de aplicacion del
firewall,por ejemplo los Unix de Berkeley activan por defecto las funciones de
encaminamiento y hay que configurar y reconstruir el kernel.

*Filtrado de host

     Al utilizar este tipo se a¤ade un router que conecta la red con Internet
y a su vez hace funciones de filtrado,este router esta conectado a Inet por
una parte y a un ordenador (host bastion ),que a su vez esta conectado a la
red interna, por otra.El router solo puede ver este ordenador,que restringe el
acceso a la red interna,y asi mismo los usuarios de la red interna deben pasar
por el para salir a Internet.El router hace el primer y primordial filtrado y
el host bastion el resto. Los inconvenientes son que si el host se cae, se
acaba el trafico entre las redes,y ademas el host puede convertirse en un
cuello de botella mermando la rapidez del trafico entre las redes.

*Filtrado de subred

     Este tipo de arquitectura aisla aun mas la red privada de Internet,
incorpora dos routers y un servidor proxy,uno de los routers controla el
trafico de la red  local y el otro el trafico de Internet,entre ellos esta
situado el servidor proxy, es similar al modelo anterior pero el segundo
router situado entre el servidor proxy y la red local, proporciona mayor
proteccion para la red local y tambien frente al acceso interno inadecuado
al proxy server. Es bastante seguro,pero a su vez bastante mas caro que otros
tipos.


DIRECCIONES DE INTERES

     Por regla general todas las webs dedicadas al tema de la (in)seguridad
suelen tener documentacion sobre firewalls como hay muchas y las mejores las
conocemos todos paso de escribirlas, aqui teneis algunas otras:

-TIS firewall toolkit
www.tis.com

-SOCKS
www.socks.ben.com

-IIS internet information server para NT
www.moco$oft.com

-IPFWADM
www.xos.nl/linux/ipfwadm

-Firewall howto
http://sunsite.unc.edu/LDP/howto/firewall-howto.html

-Lista
majordomo@greatcircle.com
subscribe firewalls



