Manual v1.01                                                      15-09-2000

==============================================================================
Manual para ripear correctamente una DVD, y pasarlo a formato DivX
Realizado por FORMATC y CabRa, el irc-hispano.org en canales #divx, #dvd
==============================================================================

Programas necesarios:

DeCSS/vobdec         ( http://remco.xgov.net/dvd )
VirtualDub           ( http://www.geocities.com/virtualdub )
FlasKMPEG            ( http://go.to/flaskmpeg )
AVI Plug-in          ( http://members.xoom.com/agrab )
DivX ;-) Codec       ( http://divx.ctw.cc )

Baja todos del Download de  ( http://go.to/Doom9 )
Busca actualizaciones en  ( http://dvdsoft.rahost.com )


**que es divx?**

Divx es un nuevo formato de compresion con un ratio de compresion realmente
alto, y una calidad de lo mejor q hay, de tal manera q hace posible el poder
comprimir un DVD para asi poder meterlo en 1 cd a una calidad aceptable, para
que os hagais una idea el vcd tiene la mitad de calidad y es el doble tama~o,
osea q en vez de 2 cd´s tenemos 1 y con el doble de resolucion : )


**RIPEAR**

El Primer paso es ripear la pelicula, podeis utilizar el DeCSS para hacerlo, 
o  el SmartRipper que evita las protecciones de los DVD's.

Para Empezar hay que localizar los .vob de la pelicula, para asi copiar al
disco duro solo los .VOB necesarios
Para encontrar cuales son los .VOB de la pelicula, es facil, esto se 
encuentran en una misma numeracion, es decir si tenemos

			VTS_01_00
			VTS_01_01
			VTS_01_02
			VTS_01_03
			VTS_02_00
			VTS_02_01
			VTS_02_02
			 etc, 
			
Entonces todos los VTS_01_x o VTS_02_x seran de la pelicula, cuales, pues
los que mas ocupen, ademas, el primer .vob de la pelicula ocupa siempre 1 GB
bien, entonces elegimos con el decss todos estos .vob de la pelicula y le damos
a 'transfer', eligiendo antes el directorio de destino (hd) en 'select folder',
teniendo en cuenta que el primer vob sera vts_0x_00, copiar todos los *.VOB, 
*.IFO y demas del mismo capitulo.

El segundo paso una vez ripeada la pelicula es abrir con el FlasKMPEG el *.IFO,
dandole a la opcion abrir dvd, haciendo esto, el programa te abre todos los VOB
de la pelicula ( el primero es VTS_0x_01 )

Una vez hecho esto hay que elegir el idioma, salen en la pantalla varios
idiomas a elegir.

**COMPRIMIR**

Ahora os hablare de los parametros de el FlasK, para empezar hay 2 codecs, el
fast-motion y el low-motion, el low motion da mas calidad, pero ocupa mucho
mas, particularmente yo, prefiero que me quepa la pelicula en un cd, asi que
pondre las opciones para dar la maxima calidad, ajustandolo a 1 CD

En global project options (export movie settings), se encuentran las opciones
las cuales vamos a elegir para el formato final de la pelicula

	-primero la resolucion la poneis a 720x544, luego la opcion idct usando mmx

	-en la carpeta sonido, decodificar el audio a 44.100 (a 48.000 no se oye 
	bien en muchas tarjetas)

	-postprocesado filtrado bicúbico hq y mantener relacion de aspecto

	-ahora le dais a mostrar panel de salida, y recortais las partes negras, esto se
	hace con el 2§ '-' y el 1 er '+' y le dais a esconder cuando termineis

	-en archivos, le poneis el nombre al avi resultante

	-en general, dejais la opcion de compilar todo activado y poneis el tama~o 
	de busqueda a 7500

	-ahora le dais a Formato de salida, en video select codec elegis el fast 
	motion y en sonido el mpeg layer III a 96 k  al menos, luego le dais a ok, 
	y ya empieza a pasar, os tardara, depende del procesador, unas 15 horas
	(salen desincronizadas, mirar seccion de desincronizacion)

**CORTAR**

Para cortar se utiliza el virtualdub, abres el avi resultante, en file,
open video file, luego le das a video, select range, y sellecionas el rango 
que quieres cortar de la peli, si quereis cortar al final, seleccionais endd 
ofset y poneis el tiempo en milisegundos q quereis cortar, si quereis cortar 
20 seg de letras poneis 20000 luego vas a video y seleccionas direct stream 
copy, y en audio tb direct stream copy, luego le das a save avi, elijes un 
nombre, y en 5 minutos lo tienes ; )

**desincronizacion**

si el avi te sale desincronizado necesitas comprimir el audio otra vez, esto 
lo haces con el virtualdub, abres el avi, en video pones direct stream copy, 
en audio full procesing mode, y en compresion elegis el codec q prefirais,
preferentemente el mismo, osea mp3 96,en audio-interleaving lo pones a enable
y despues le dais a save avi, le poneis el nombre y esperais una media hora

**mezclar avis**

Podeis usar el virtualdub para mezclar 2 avis y producir uno solo, con la
opcion File/Append video segment

**reducir tama~o**

Para reducir el tama~o de un avi, podeis cortar las letras del final 
utilizando  lo que os he comentado antes en cortar, y ademas hacer lo mismo q
desincronizacion, bajando la calidad del sonido, si con esto no os vale,
tendreis q recomprimir el video del avi, dandole a video, full procesing mode,
video-compresion y ahi elegis el codec y bajais el bitrate, y por ultimo le
dais a la opcion File/Save avi

**truco**

Para ajustar la pelicula al tama~o maximo, se puede comprimir inicialmente el
video a la maxima calidad, es decir fast motion - 6000 y luego una vez
conseguido el avi, dependiendo de el tama~o resultante, hacer lo mismo que en
el paso de reducir tama~o, bajando la calidad en funcion de el tama~o que nos
haga falta, yo lo hago siempre : )

**peliculas mal ripeadas?**

Hay algunas peliculas, que llevan un sistema de proteccion diferente, se puede
detectar, porque al reproducirla desde el hd, salen una especie de cuadraditos
verdes y se cierra el flask, no se pueden pasar al hd los vob de la manera
tradicional, es decir, con el decss, para ello usamos otro programa, que se
llama vobdec, este programa se utiliza de la siguiente manera, para empezar,
teneis que reproducir el dvd, como si fueseis a verlo, despues en ms-dos
tecleais 'vobdec origen destino ' siempre con el reproductor en marcha,
para que el programa pueda detectar la clave, entonces os saldra:
'scanin block...' cuando consiga la clave, cerrais el reproductor del dvd,
para que la pase al hd mas rapido, y asi con todos los .vob, es muy 
recomendable crear un .bat con las instrucciones, si el decss os da un error 
del tipo "title might not be encripted" quiere decir q esos vob no estan 
encriptados y se pueden pasar al hd con un simple copy-paste

**que bitrate utilizo?**

Voy a explicar una cosa que la mayoria de gente no lo tiene muy claro, cuando
seleccionamos un bitrate muy alto, por ejemplo 6000, no quiere decir que toda
la pelicula este a 6000 y que nos va a salir un fichero grandisimo, sino que 
la pelicula va a coger el maximo bitrate, es decir, si os fijais en el flask,
cuando esta comprimiendo, abajo pone un dato, el bitrate actual, ese el 
bitrate maximo de la pelicula en ese momento, si por ejempllo pone 1200, 
quiere decir q ese frame ocupa 1200 kbits, si tenemos el codec puesto a 6000, 
el tama~o sigue  siendo 1200, aunque si ponemos el bitrate a 1000, digamos q
recorta el frame, hasta tener 1000 kbits, apareciendo cuadrados en ese frame,
por eso muchas veces es posible comprimir a 6000 de bitrate, obteniendo una 
calidad muy buena,aunque solo os lo recomiendo para el fast motion, porque el 
low tiene un bitrate mucho mas alto, para seguir una pauta, yo personalmente 
todas las peliculas que ocupan menos de 5 gigas los vob, las paso a fast 6000, 
aunque tambien te puedes hacer una idea, comprimiendo un cachito y viendo cual
es el bitrate que alcanza, si la media esta por debajo de los 850, 
generalmente te cabra a 6000


**opciones de compresion del flask**

- Video: Primero selecionamos "mostrar panel de salida" Cuando salga el panel,
pinchas en reponer parametros. Los DVDs de zona 2 (Europa) vienen en formato
PAL, que tiene la resolucion 720x576, aunque hay unos cuantos formatos, este 
es el habitual. Lo que tenemos que hacer ahora es dejar la pantalla de salida 
con el mismo aspecto que la pelicula original. Un DVD te puede venir en 
formato 4:3, 16:9, en fin, distintos formatos. Nuestro objetivo es intentar 
representar el aspecto original de la pelicula sin importar el formato en el 
que te venga el DVD. A veces puedes encontrar la relacion de aspecto en la 
parte de atras de la caja del DVD. La relacion de aspecto (aspect ratio) es 
la proporcion entre la anchura y la altura de la imagen en pantalla (sin 
incluir las bandas negras que  habitualmente se incluyen en las peliculas de 
cine al proyectarse en television). Precisamente se trata de arreglar esto 
mismo. La pantalla de cine panoramica (Scope) tiene un aspect ratio de 
2.35:1, esto significa que la pantalla es 2.35 veces mas ancha que alta. Otro 
aspecto habitual que no llena la pantalla de cine es 1.85:1. Si has ido 
alguna vez al cine te habras dado cuenta de que si eres de la tercera edad o 
estudiante pagas menos y que algunas peliculas no llenan toda la anchura de 
la pantalla. Esto es porque tienen un aspect ratio como el último comentado y no el usual mas ancho y panoramico
2.35:1. Otro formato estandar es el de la television 4:3 o tambien conocido
como 1.33:1. Este fue el formato de todas las peliculas hasta la llegada del
Cinemascope alla por los a~os 50. Mas o menos con la llegada del cine en color.
Existen otros muchos formatos, pero estos son a grandes rasgos los 
cinematograficos, los mas habituales. A lo que vamos es que hay un monton de
formatos y que tenemos que intentar respetar el formato original en el que
venga la pelicula, esto es, no recortar por los lados, no estirar, ni 
aplastar la imagen. Si no te viene el aspecto real de la pelicula en la 
caratula tendras que fiarte de tu vista o de cualquier fuente mas o menos 
fiable.

	Normalmente te vas a encontrar la siguiente situacion:

-Tenemos el panel de salida a 720x576 (resolucion DVD), hay que reducir el
tama~o de salida en altura 32 lineas (porque la salida de la imagen del DVD
tiene que ser 4:3 incluidas las bandas negras, dado que el monitor que vamos
utilizar para reproducirla tiene un aspect ratio de 4:3).

-Pincha dos veces en tama~o de salida/alto y luego el boton "-" (menos) dos
veces. Habitualmente obtendremos 720x544, que si dividimos nos da
720/544=1.3235 que es aprox. igual a 4/3, aspect ratio 4:3.

-Ahora tenemos que recortar las bandas negras que sobran en la imagen arriba y 
abajo. Para ello seleccionamos "Recorte", pinchamos en altura "-" unas 8 o
diez veces junto con el "+" del "Desp. vert", hasta que quede lo menos posible
de lineas negras sin llegar a recortar la imagen visible. Ves que hay un 
minimo de lineas negras rodeando la imagen. Entonces aqui puedes encontrarte,
dependiendo del formato que tenga la pelicula en varios casos, que te haya
quedado una resolucion de 720x400 que significa que la pelicula tiene un 
aspect ratio de 1.85:1 (mas o menos) o bien que te haya quedado 720x304, 
aspect ratio 2.35:1 (+ o -). Si no tenia bandas negras la pelicula es que 
venia en 1.33:1, entonces se deja con la resolucion 720x544.

-Estos valores de resolucion no tienen que coincidir siempre. Es posible que
encontremos excepciones, rarezas, con lo que tendras que fiarte en ocasiones 
de tu propia vista y criterio. Intenta siempre con los ajustes de
"Tama~o de salida" y "Recorte" conseguir una resolucion que coincida con un
aspect ratio de alguno de estos tres: 1.33:1, 1.85:1, 2.35:1. Con esto ya
tendriamos el formato bien.
Pulsamos "Esconder", con lo que volveriamos a la ventana principal del Flask.

-Lengueta "Video" la base de tiempos la marcamos a 25 frames por segundo
(fps) (sale puesta). La opcion desentrelazar video (hay dos formatos de video
para el DVD --> entrelazado (peor,hay que desentrelazar) o progresivo(mejor))
solo se utilizara en ciertas ocasiones, cuando detectemos que la imagen esta
entrelazada. Esto significa que en movimientos rapidos aparecen rayas
horizontales. Es raro que las peliculas vengan entrelazadas, normalmente vienen
en video progresivo, pero algunas compa~ias capturan el video entrelazado
porque es mas barato de hacer el DVD (sobre todo on pelis antiguas o cine X).
Opciones de iDCT, MMX.

-Lengueta "Sonido": Marcar descodificar sonido, desactivar "Igual a la entrada"
y activar "44100 Hz" para mayor compatibilidad con tarj. de sonido antiguas,
que decodifican mal a 48kHz.

-Lengueta "Post Procesado": En "Opciones de reescalado" seleccionamos
"Filtrado bicúbico HQ", maxima calidad. En opciones de recorte, nos habran
salido los parametros que corresponderan a lo que previamente realizamos en 
el panel de salida. Conviene crearse un .TXT apuntando dichos parametros por 
si no termina bien la compresion y no te acuerdas de que parametros pusiste y 
te fueron mal. Seleccionar "Mantener relacion de aspecto". Normalmente no hay 
que tocar nada aqui.

-Lengueta "Archivos": Seleccionar el fichero de video y el fichero de Salida.
Ten en cuenta que necesitas espacio libre 700-800 MB en el directorio destino.
El archivo no necesita extension .AVI.

-Lengueta "General": Dejar valores por defecto. "Compilar todo" y tama~o de
búsqueda 7500 KB, para que detecte todas las pistas de audio sin problemas.

El archivo de referencia de cada pelicula que vayas comprimiendo puede ser 
algo similar a:
-----------------------------------------------
		Idioma: 
		 0x80 English
		 0x84 Espa~ol

		Resolucion: 
		 720x576 PAL 25 fps

		Resolucion de salida:
		 720
		 528

		Base de tiempos: 25 fps

		Post Procesado: 
		 Desp. vertical:    18
		 Altura recorte:   496
		 Desp. horizontal:  32
		 Anchura recorte:  656


		DivX: Fast 2400 kbps, key 2 secs
		desentrelazar video, mezclar, umbral 10

		MP3:  44kHz Joint-Stereo 128kbps Espa~ol
		MP3:  44kHz Stereo 160kbps English
------------------------------------------------

-Aceptar para salvar todas estas opciones. Menu opciones/Formato de Salida.

	Seleccionamos el CODEC de Video, para lo cual hay que tener instalado los
	codecs de DivX previamente. Pinchamos en "Select Codec" y seleccionamos, 
	uno de los dos codecs de video, "DivX;-) MPEG-4 Fast-Motion", o "DivX;-) 
	MPEG-4 Low-Motion". 
	
	Despues pincha en
	"Configurar...", y por defecto las opciones son: Keyframe every "10" 
	seconds,Cripness "100", Data Rate "910" Kilobits per Second.

-Modificamos las opcion de Keyframe every, y ponemos " 2" seconds.

-Tendremos q modificar "Data Rate", que nos va a dar la calidad del .AVI 
 final comprimido, cuanto mas alto el Data Rate, mejor calidad de video 
 conseguimos y mas ocupara el fichero.

-La eleccion del Data Rate apropiado es bastante compleja, y te la dara la
 experiencia, porque varia mucho, y depende de varios factores:

	>La resolucion de salida del video. A mas res mas ocupa.

	>El aspect ratio. Cuanto mas bajo aspect ratio, mas ocupa la pelicula 
	 (porque llena mas la pantalla).

	>El movimiento de la pelicula. Cuanto mas moviemientos de camara y cambios 
	 de plano hay en la pelicula, mas ocupara.

	>El contraste de la pelicula. Las peliculas oscuras se comprimen mucho mas, 
	 por lo q ocupan menos.

	>La duracion de la pelicula. Cuanto mas larga, mas ocupa.

	>El tama~o de los .VOB tambien te puede dar una idea, cuanto menos ocupen 
	 mas alto puedes poner el bitrate.
	
- El codec, Low Motion, ofrece una mayor calidad, ocupando logicamente mas.

- El Fast Motion, reduce algo la calidad de salida, pero ahorra mucho mas
	espacio.

- Respecto a la seleccion del Codec de audio, el formato mas utilizado es el
	MPEG Layer-3, con los siguientes atributos: 128 kBits/s, 44.100 Hz, Stereo.
	Si la pelicula es musical, se puede seleccionar un bit rate, mas alto para 
	que respete el Stereo original de la pelicula, como 160 kBits/s incluso 192.


- Si quieres que la pelicula quepa en un solo CD, de 74 o 80 mins, tendras q
	usar el codec Fast Motion, con un Data Rate, entre 910 kbps y 1500 kbps.
	Si la pelicula dura 1:30', puedes dejarlo en 1500 kbps, si dura 2 horas,
	1200 kbps, y para mas de 2 horas, tendras q bajar a 910 kbps o menos.

- Si quieres meter la pelicula en 2 cd's, puedes usar el codec de Video Low
	Motion, a 1800 kbps.

- Estos valores dependen mucho de cada pelicula, y nunca se puede saber
	exactamente que parametros hay q seleccionar. La experiencia te dara la
	perfeccion.

- Una vez seleccionados los parametros de los codecs de video y audio,
	aceptamos y volvemos a la pantalla principal del FlaskMPEG, para por fin
	seleccionar "Ejecuta.../Comienza Conversion"

- Saldra una nueva ventana con la informacion del preceso de compresion. Para
	lograr la maxima velocidad de compresion deselecciona el "Display Output", y 
	en "Priority Settings", selecciona "Highest". Si tienes un equipo con un 
	solo  procesador, no podras hacer nada mientras comprimes, a menos que 
	pongas prioridad "Idle", para que el sistema de mas prioridad a los demas 
	procesos que estes ejecutando (tardara mas en comprimir).

- El proceso de compresion, tardara de 8 a 20 horas, dependiendo del 
	procesador que tengas.

- Al comprimir el audio a 44 kHz, el sonido queda desincronizado respecto al
	video, asi q tenemos una nueva utilidad para arreglar esto, Virtual Dub.

- Cargamos el Virtual Dub(vesion 1.3c o superior)

- Comprueba que el .AVI que ha salido, ocupa menos de 700 MB, para un solo CD,
 o menos de 1,4GB si lo quieres meter en 2 CD's. Si te ha quedado mas grande 
 de lo q esperabas, se pueden recortar unos cuantos MB recomprimiendo el audio, 
 a un bit rate mas bajo, a 112 kbps incluso 96 kbps el sonido queda muy bien.

- Tambien podemos optar por recomprimir el audio a otro formato, DivX Audio,
 a 64kbps Stereo 44'1 KHz, que ocupa bastante menos, y se comprime mas con una
 calidad de sonido similar al MP3 a 112 kbps. Pero no aconseja debido a los
 problemas que da con algunas tarjetas de sonido.

- Si incluso recomprimiendo el audio, no logramos meter la pelicula en el
 limite elegido, no hay mas remedio que recomprimir el video a un Data Rate 
 mas bajo, que el que pusimos en la configuracion del Codec de Video.

- Para recomprimir el audio, selecciona el menu "Audio\Compression", 
 selecciona el Codec de audio, (MPEG Layer3), y el bit rate correspondiente 
 (168, 128, 112,96 para MP3). Comprueba que este seleccionado "Audio\Full 
 Processing Mode", y "Video\Direct Stream Copy"

- Para recomprimir el video, selecciona el menu "Video\Compression", 
 selecciona el Codec de video, (DivX Low Motion o Fast Motion, y configura un 
 Data Rate mas bajo). Si no quieres recomprimir el audio, Comprueba que este 
 seleccionado "Audio\Direct Stream Copy", y "Video\Full Processing Mode", si 
 quieres recomprimir tambien el Audio, selecciona la compresion que quieras y 
 asegurate que este seleccionado "Audio\Full Processing Mode"

- Despues guardamos el fichero "File\Save", con el nombre que queramos y
 extension .AVI


 suerte : )

===============================================================================
 Para cualquier critica o consulta, visitanos en el IRC-Hispano.org

 FORMATC & CabRa
===============================================================================
