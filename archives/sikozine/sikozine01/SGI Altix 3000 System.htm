<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0044)http://linuxjournal.com/article.php?sid=6440 -->
<HTML><HEAD><TITLE>Scaling Linux to New Heights: the SGI Altix 3000 System</TITLE>
<META http-equiv=Content-Type content="text/html; charset=ISO-8859-1">
<META content="Linux Journal  - The Premier Magazine of the Linux Community" 
name=AUTHOR>
<META 
content="Copyright (c) 2002 by Linux Journal  - The Premier Magazine of the Linux Community" 
name=COPYRIGHT>
<META content="linux, linux journal" name=KEYWORDS>
<META content="The Monthly Magazine of the Linux Community" name=DESCRIPTION>
<META content=NOARCHIVE name=GOOGLEBOT>
<META content="MSHTML 6.00.2600.0" name=GENERATOR><LINK 
href="SGI Altix 3000 System_archivos/style.css" type=text/css rel=StyleSheet>
<SCRIPT type=text/javascript>
<!--
function showimage() {
if (!document.images)
return
document.images.avatar.src=
'http://www.linuxjournal.com/images/forum/avatar/' + document.Register.user_avatar.options[document.Register.user_avatar.selectedIndex].value
}
//-->
</SCRIPT>

<SCRIPT type=text/javascript>
<!--
function openwindow(){
        window.open ("","Help","toolbar=no,location=no,directories=no,status=no,scrollbars=yes,resizable=no,copyhistory=no,width=600,height=400");
}
//-->
</SCRIPT>
</HEAD>
<BODY text=#000000 vLink=#363636 aLink=#d5ae83 link=#363636 bgColor=#505050>
<TABLE>
  <TBODY>
  <TR>
    <TD>
      <CENTER><A 
      href="http://www.linuxjournal.com/banners.php?op=click&amp;bid=15" 
      target=_blank><IMG height=60 alt="" 
      src="SGI Altix 3000 System_archivos/aspen-0924.gif" width=468 
      border=1></A></CENTER><BR>
      <TABLE cellSpacing=0 cellPadding=0 width="100%" align=center 
      bgColor=#ffffff border=0>
        <TBODY>
        <TR>
          <TD bgColor=#ffffff><IMG height=16 alt="" hspace=0 
            src="SGI Altix 3000 System_archivos/corner-top-left.png" width=17 
            align=left> <A href="http://linuxjournal.com/index.php"><IMG 
            height=69 
            alt="Welcome to Linux Journal  - The Premier Magazine of the Linux Community" 
            src="SGI Altix 3000 System_archivos/logo_blue.png" width=147 
            align=left border=0></A></TD>
          <TD bgColor=#999999><IMG height=1 alt="" hspace=0 
            src="SGI Altix 3000 System_archivos/pixel.gif" width=1 border=0></TD>
          <TD align=middle bgColor=#cfcfbb>
            <CENTER>
            <FORM action=search.php method=post><FONT class=content 
            color=#000000><B>Search </B><INPUT size=14 
            name=query></FONT></FORM></CENTER></TD>
          <TD align=middle bgColor=#cfcfbb>
            <CENTER>
            <FORM action=search.php method=get><FONT class=content><B>Topics 
            </B><SELECT onchange=submit() name=topic> <OPTION value="" 
              selected>All Topics</OPTION> <OPTION value=11>Book 
              Reviews</OPTION> <OPTION value=6>Development Tools</OPTION> 
              <OPTION value=36>Embedded</OPTION> <OPTION value=17>Games</OPTION> 
              <OPTION value=34>German</OPTION> <OPTION 
              value=30>Hardware</OPTION> <OPTION value=12>Linux 
              Community</OPTION> <OPTION value=9>Linux in Business</OPTION> 
              <OPTION value=7>Linux in Education</OPTION> <OPTION value=29>Linux 
              Journal</OPTION> <OPTION value=4>Linux Kernel</OPTION> <OPTION 
              value=21>Linux Market</OPTION> <OPTION 
              value=1>Miscellaneous</OPTION> <OPTION 
              value=13>Multimedia</OPTION> <OPTION value=5>Networking</OPTION> 
              <OPTION value=31>Other Software</OPTION> <OPTION value=32>Product 
              of the Day</OPTION> <OPTION value=19>Product Reviews</OPTION> 
              <OPTION value=8>Security</OPTION> <OPTION 
              value=33>Spanish</OPTION> <OPTION value=35>Tutorial</OPTION> 
              <OPTION value=28>Web 
            Development</OPTION></SELECT></FONT></FORM></CENTER></TD>
          <TD vAlign=top bgColor=#cfcfbb><IMG height=17 alt="" hspace=0 
            src="SGI Altix 3000 System_archivos/corner-top-right.gif" width=17 
            align=right></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%" align=center 
      bgColor=#fefefe border=0>
        <TBODY>
        <TR>
          <TD bgColor=#000000 colSpan=4><IMG height=1 alt="" hspace=0 
            src="SGI Altix 3000 System_archivos/pixel.gif" width=1 
        border=0></TD></TR>
        <TR vAlign=center bgColor=#dedebb>
          <TD noWrap width="15%"><FONT class=content color=#363636><B><!-- BEGIN user customization -->&nbsp;&nbsp;<B><FONT 
            color=#363636><A 
            href="http://linuxjournal.com/user.php">Create</A></FONT> an 
            account</B> <!-- END user customization --></B></FONT></TD>
          <TD align=middle width="70%" height=20><FONT class=content><B><A 
            href="http://linuxjournal.com/">Home</A> &nbsp;·&nbsp; <A 
            href="http://linuxjournal.com/subscribe.php">Subscribe</A> 
            &nbsp;·&nbsp; <A 
            href="http://linuxjournal.com/topics.php">Topics</A> &nbsp;·&nbsp; 
            <A href="http://linuxjournal.com/advertising.php">Advertise</A> 
            &nbsp;·&nbsp; <A href="http://pr.linuxjournal.com/" 
            target=_blank>Vendor Press</A> </B></FONT></TD>
          <TD>&nbsp;</TD></TR>
        <TR>
          <TD bgColor=#000000 colSpan=4><IMG height=1 alt="" hspace=0 
            src="SGI Altix 3000 System_archivos/pixel.gif" width=1 
        border=0></TD></TR></TBODY></TABLE><!-- FIN DEL TITULO -->
      <TABLE cellSpacing=0 cellPadding=0 width="100%" align=center 
      bgColor=#ffffff border=0>
        <TBODY>
        <TR vAlign=top>
          <TD bgColor=#ffffff><IMG height=20 alt="" 
            src="SGI Altix 3000 System_archivos/pixel.gif" width=1 
        border=0></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%" align=center 
      bgColor=#ffffff border=0>
        <TBODY>
        <TR vAlign=top>
          <TD bgColor=#ffffff><IMG height=1 alt="" 
            src="SGI Altix 3000 System_archivos/pixel.gif" width=10 border=0></TD>
          <TD vAlign=top width=150 bgColor=#ffffff>
            <TABLE cellSpacing=0 cellPadding=1 width=150 bgColor=#000000 
            border=0>
              <TBODY>
              <TR>
                <TD>
                  <TABLE cellSpacing=0 cellPadding=3 width="100%" 
                  bgColor=#dedebb border=0>
                    <TBODY>
                    <TR>
                      <TD align=left><FONT class=content 
                        color=#363636><B>Linux Journal</B></FONT> 
                  </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
            <TABLE cellSpacing=0 cellPadding=0 width=150 bgColor=#ffffff 
            border=0>
              <TBODY>
              <TR vAlign=top>
                <TD bgColor=#ffffff><FONT 
                  class=content><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://linuxjournal.com/index.php">Home</A><BR><STRONG><BIG>·</BIG></STRONG> 
                  <A 
                  href="http://linuxjournal.com/modules.php?op=modload&amp;name=NS-subscribe&amp;file=suboptions#new">Subscribe</A> 
                  / <A 
                  href="http://linuxjournal.com/modules.php?op=modload&amp;name=NS-subscribe&amp;file=suboptions#renew">Renew</A><BR><STRONG><BIG>·</BIG></STRONG> 
                  <A 
                  href="http://linuxjournal.com/modules.php?op=modload&amp;name=NS-subscribe&amp;file=suboptions#address">Change 
                  Address</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://linuxjournal.com/subscribe.php">Subscriber 
                  Services</A><BR>
                  <P><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://linuxjournal.com/advertising.php">Advertise in 
                  <I>LJ</I></A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://linuxjournal.com/press.php"><I>LJ</I> Press 
                  Releases</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://pr.linuxjournal.com/" target=_blank>Vendor Press 
                  Releases</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://linuxjournal.com/modules.php?op=modload&amp;name=NS-author&amp;file=wanted">Write 
                  for Us</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://linuxjournal.com/contact.php">Contact 
                  Us</A><BR><BR><B>Other 
                  Options</B><BR><STRONG><BIG>·</BIG></STRONG>&nbsp;<A 
                  href="http://linuxjournal.com/modules.php?op=modload&amp;name=FAQ&amp;file=index">FAQ</A><BR><STRONG><BIG>·</BIG></STRONG>&nbsp;<A 
                  href="http://linuxjournal.com/modules.php?op=modload&amp;name=Members_List&amp;file=index">Members 
                  List</A><BR></FONT></P></TD></TR></TBODY></TABLE><BR>
            <TABLE cellSpacing=0 cellPadding=1 width=150 bgColor=#000000 
            border=0>
              <TBODY>
              <TR>
                <TD>
                  <TABLE cellSpacing=0 cellPadding=3 width="100%" 
                  bgColor=#dedebb border=0>
                    <TBODY>
                    <TR>
                      <TD align=left><FONT class=content color=#363636><B>Now 
                        Available!</B></FONT> 
            </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
            <TABLE cellSpacing=0 cellPadding=0 width=150 bgColor=#ffffff 
            border=0>
              <TBODY>
              <TR vAlign=top>
                <TD bgColor=#ffffff>
                  <P>
                  <CENTER><A 
                  href="http://store.linuxjournal.com/Merchant2/merchant.mv?Screen=PROD&amp;Store_Code=LJS&amp;Product_Code=cd2001&amp;Category_Code=LA"><IMG 
                  height=115 
                  src="SGI Altix 3000 System_archivos/cd2002_115x115.png" 
                  width=115></A></CENTER></TD></TR></TBODY></TABLE><BR>
            <TABLE cellSpacing=0 cellPadding=1 width=150 bgColor=#000000 
            border=0>
              <TBODY>
              <TR>
                <TD>
                  <TABLE cellSpacing=0 cellPadding=3 width="100%" 
                  bgColor=#dedebb border=0>
                    <TBODY>
                    <TR>
                      <TD align=left><FONT class=content 
                        color=#363636><B>Experimental</B></FONT> 
                  </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
            <TABLE cellSpacing=0 cellPadding=0 width=150 bgColor=#ffffff 
            border=0>
              <TBODY>
              <TR vAlign=top>
                <TD bgColor=#ffffff><A 
                  href="http://blog.linuxjournal.com/">blog.linuxjournal.com</A> 
                </TD></TR></TBODY></TABLE><BR>
            <TABLE cellSpacing=0 cellPadding=1 width=150 bgColor=#000000 
            border=0>
              <TBODY>
              <TR>
                <TD>
                  <TABLE cellSpacing=0 cellPadding=3 width="100%" 
                  bgColor=#dedebb border=0>
                    <TBODY>
                    <TR>
                      <TD align=left><FONT class=content 
                        color=#363636><B>Linux Resources</B></FONT> 
                    </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
            <TABLE cellSpacing=0 cellPadding=0 width=150 bgColor=#ffffff 
            border=0>
              <TBODY>
              <TR vAlign=top>
                <TD bgColor=#ffffff><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://linuxjournal.com/magazine.php">Magazine 
                  Archive</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://linuxjournal.com/webindex.php">Web Article 
                  Index</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="ftp://ftp.ssc.com/pub/lj/listings" 
                  target=_blank>Downloads</A><BR><STRONG><BIG>·</BIG></STRONG> 
                  <A href="http://linuxjournal.com/resources.php">Linux 
                  Resources</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://linuxjournal.com/helpdesk.php">SSC Help 
                  Desk</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://linuxjournal.com/newsfeed.php">Referrer 
                  News</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://linuxjournal.com/links.php">Linux 
                  Links</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://linuxjournal.com/cgi-bin/wish/index.pl">Wishlist</A><BR><STRONG><BIG>·</BIG></STRONG> 
                  <A href="http://www.ssc.com:8080/glue/" target=_blank>User 
                  Groups (GLUE)</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://linuxjournal.com/events.php">Special 
                  Events</A><BR></TD></TR></TBODY></TABLE><BR>
            <TABLE cellSpacing=0 cellPadding=1 width=150 bgColor=#000000 
            border=0>
              <TBODY>
              <TR>
                <TD>
                  <TABLE cellSpacing=0 cellPadding=3 width="100%" 
                  bgColor=#dedebb border=0>
                    <TBODY>
                    <TR>
                      <TD align=left><FONT class=content 
                        color=#363636><B>Store</B></FONT> 
              </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
            <TABLE cellSpacing=0 cellPadding=0 width=150 bgColor=#ffffff 
            border=0>
              <TBODY>
              <TR vAlign=top>
                <TD bgColor=#ffffff><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://store.linuxjournal.com/Merchant2/merchant.mv?Screen=PROD&amp;Store_Code=LJS&amp;Product_Code=LJA&amp;Category_Code=LA" 
                  target=_blank>Order Back 
                  Issues</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://store.linuxjournal.com/Merchant2/merchant.mv?Screen=CTGY&amp;Store_Code=LJS&amp;Category_Code=T" 
                  target=_blank>T-shirts</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://store.linuxjournal.com/Merchant2/merchant.mv?Screen=CTGY&amp;Store_Code=LJS&amp;Category_Code=H" 
                  target=_blank>Hats</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://store.linuxjournal.com/Merchant2/merchant.mv?Screen=CTGY&amp;Store_Code=LJS&amp;Category_Code=RC" 
                  target=_blank>Reference 
                  Cards</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://store.linuxjournal.com/Merchant2/merchant.mv?Screen=CTGY&amp;Store_Code=LJS&amp;Category_Code=B" 
                  target=_blank>Books</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://store.linuxjournal.com/" target=_blank>Fun 
                  Stuff</A><BR></TD></TR></TBODY></TABLE><BR>
            <TABLE cellSpacing=0 cellPadding=1 width=150 bgColor=#000000 
            border=0>
              <TBODY>
              <TR>
                <TD>
                  <TABLE cellSpacing=0 cellPadding=3 width="100%" 
                  bgColor=#dedebb border=0>
                    <TBODY>
                    <TR>
                      <TD align=left><FONT class=content 
                        color=#363636><B>Kernel Watch</B></FONT> 
                  </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
            <TABLE cellSpacing=0 cellPadding=0 width=150 bgColor=#ffffff 
            border=0>
              <TBODY>
              <TR vAlign=top>
                <TD bgColor=#ffffff><STRONG>Nuts</STRONG>&nbsp;&nbsp;<A 
                  href="http://www.kernel.org/pub/linux/kernel/v2.5" 
                  target=_blank>2.5.59</A> <BR>16-Jan-2003 
                  <BR><STRONG>Sane</STRONG>&nbsp;&nbsp;<A 
                  href="http://www.kernel.org/pub/linux/kernel/v2.4" 
                  target=_blank>2.4.20</A> <BR>28-Nov-2002 
                  <BR><STRONG>Safe</STRONG>&nbsp;&nbsp;<A 
                  href="http://www.kernel.org/pub/linux/kernel/v2.2" 
                  target=_blank>2.2.23</A> <BR>29-Nov-2002 <BR><A 
                  href="http://www.kernel.org/" target=_blank>Archives</A> 
              </TD></TR></TBODY></TABLE><BR>
            <TABLE cellSpacing=0 cellPadding=1 width=150 bgColor=#000000 
            border=0>
              <TBODY>
              <TR>
                <TD>
                  <TABLE cellSpacing=0 cellPadding=3 width="100%" 
                  bgColor=#dedebb border=0>
                    <TBODY>
                    <TR>
                      <TD align=left><FONT class=content 
                        color=#363636><B>Other SSC Sites</B></FONT> 
                    </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
            <TABLE cellSpacing=0 cellPadding=0 width=150 bgColor=#ffffff 
            border=0>
              <TBODY>
              <TR vAlign=top>
                <TD bgColor=#ffffff><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://www.eljonline.com/" target=_blank>Embedded Linux 
                  Journal</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://www.linuxgazette.com/" target=_blank>Linux 
                  Gazette</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://www.linuxjournal.com/bg">Linux Buyer's 
                  Guide</A><BR><STRONG><BIG>·</BIG></STRONG> <A 
                  href="http://pr.linuxjournal.com/" 
                  target=_blank>pr.linuxjournal.com</A><BR><STRONG><BIG>·</BIG></STRONG> 
                  <A href="http://www.ssc.com/" 
              target=_blank>SSC</A><BR></TD></TR></TBODY></TABLE><BR></TD>
          <TD><IMG height=1 alt="" 
            src="SGI Altix 3000 System_archivos/pixel.gif" width=15 border=0></TD>
          <TD width="100%"><!-- END HEADER -->
            <TABLE width="100%" border=0>
              <TBODY>
              <TR>
                <TD vAlign=top>
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                  bgColor=#ffffff border=0>
                    <TBODY>
                    <TR>
                      <TD>
                        <TABLE cellSpacing=0 cellPadding=1 width="100%" 
                        bgColor=#000000 border=0>
                          <TBODY>
                          <TR>
                            <TD>
                              <TABLE cellSpacing=0 cellPadding=3 width="100%" 
                              bgColor=#cfcfbb border=0>
                                <TBODY>
                                <TR>
                                <TD align=left><FONT class=option 
                                color=#363636><B><A 
                                href="http://linuxjournal.com/categories.php?op=newindex&amp;catid=2">Industry 
                                Briefs</A>: <FONT color=navy>Scaling Linux to 
                                New Heights: the SGI Altix 3000 
                                System</FONT></B></FONT><BR><FONT 
                                class=content>Posted on Wednesday, January 15, 
                                2003 by <FONT color=black>Steve 
                                Neuner</FONT></FONT></TD>
                                <TD align=right><A 
                                href="http://linuxjournal.com/print.php?sid=6440"><IMG 
                                height=11 alt="Printer Friendly Page" 
                                src="SGI Altix 3000 System_archivos/print2.png" 
                                width=15 border=0></A>&nbsp;&nbsp;<A 
                                href="http://linuxjournal.com/friend.php?op=FriendSend&amp;sid=6440"><IMG 
                                height=11 alt="Send this Article to a Friend" 
                                src="SGI Altix 3000 System_archivos/friend.png" 
                                width=15 border=0></A> 
                            </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><BR><A 
                        href="http://linuxjournal.com/search.php?query=&amp;topic=19"><IMG 
                        alt="Product Reviews" hspace=10 
                        src="SGI Altix 3000 System_archivos/product_review2.png" 
                        align=right vspace=10 border=0></A> <FONT class=content 
                        color=#000000><I>With 64 processors and 512GB of memory, 
                        SGI claims the title of world's most powerful Linux 
                        system.</I><BR><BR>
                        <P>SGI recently debuted its new 64-bit, 64-processor, 
                        Linux system based on the Intel Itanium 2 processor--a 
                        significant announcement for the company and for Linux. 
                        This system marks the opening of a new frontier as 
                        scientists working on complex and demanding 
                        high-performance computing (HPC) problems can now use 
                        and deploy Linux in ways never before possible. HPC 
                        environments continually push the limits of the 
                        operating system by requiring larger numbers of CPUs, 
                        higher I/O bandwidth and faster and more efficient 
                        parallel programming support. 
                        <P>Early on in the system's development, SGI made the 
                        decision to use Linux exclusively as the operating 
                        system for this new platform. It proved to be a solid 
                        and very capable operating system for the technical 
                        compute environments that SGI targets. With the 
                        combination of SGI NUMAflex global shared-memory 
                        architecture, Intel Itanium 2 processors and Linux, we 
                        were breaking records long before the system was 
                        introduced. 
                        <P>The new system, called the SGI Altix 3000, has up to 
                        64 processors and 512GB of memory. A future version will 
                        offer up to 512 processors and 4TB. In this article, we 
                        explore the hardware design behind the new SGI system, 
                        describe the software development involved to bring this 
                        new system to market and show how Linux can readily 
                        scale and be deployed in the most demanding HPC 
                        environments. 
                        <P>
                        <H3>Hardware and System Architecture Background</H3>
                        <P>The SGI Altix 3000 system uses Intel Itanium 2 
                        processors and is based on the SGI NUMAflex global 
                        shared-memory architecture, which is the company's 
                        implementation of a non-uniform memory access (NUMA) 
                        architecture. NUMAflex was introduced in 1996 and has 
                        since been used in the company's renowned SGI Origin 
                        family of servers and supercomputers based on the MIPS 
                        processor and the IRIX 64-bit operating system. The 
                        NUMAflex design enables the CPU, memory, I/O, 
                        interconnect, graphics and storage to be packaged into 
                        modular components, or bricks. These bricks can then be 
                        combined and configured with tremendous flexibility to 
                        match a customer's resource and workload requirements 
                        better. Leveraging this third-generation design, SGI was 
                        able to build the SGI Altix 3000 system using the same 
                        bricks for I/O (IX- and PX-bricks), storage (D-bricks) 
                        and interconnect (router bricks/R-bricks). The primary 
                        difference in this new system is the CPU brick 
                        (C-brick), which contains the Itanium 2 processors. 
                        Figure 1 shows the types of bricks used on the SGI Altix 
                        3000 system. Figure 2 depicts how these bricks can be 
                        combined into two racks to make a single-system-image 
                        64-processor system. 
                        <P>
                        <CENTER><IMG alt=figure 
                        src="SGI Altix 3000 System_archivos/6440f1.jpg"><BR>
                        <H4>Figure 1. NUMAflex Brick Types</H4></CENTER>
                        <P>
                        <CENTER><IMG alt=figure 
                        src="SGI Altix 3000 System_archivos/6440f2.jpg"><BR>
                        <H4>Figure 2. Two Possible NUMAflex 
                        Configurations</H4></CENTER>
                        <P><A 
                        href="http://linuxjournal.com/modules.php?op=modload&amp;name=NS-articles/buzz&amp;file=6440s1">
                        <H3>SGI Altix 3000 C-Brick Block Diagram and 
                        Specifications</H3></A>
                        <P>
                        <H3>Preparing Linux for a New Hardware Platform</H3>
                        <P>On a well-designed and balanced hardware architecture 
                        such as NUMAflex, it is the operating system's job to 
                        ensure that users and applications can fully exploit the 
                        hardware without being hindered due to inefficient 
                        resource management or bottlenecks. Achieving balanced 
                        hardware resource management on a large NUMA system 
                        requires starting kernel development long before the 
                        first Itanium 2 processors and hardware prototype 
                        systems arrive. In this case, we also used the 
                        first-generation Itanium processors for making the CPU 
                        scaling, I/O performance and other changes to Linux 
                        necessary for demanding HPC environments. 
                        <P>The first step in preparing the software before the 
                        prototype hardware arrives is identifying, as best you 
                        can, the necessary low-level hardware register and 
                        machine programming changes the kernel will need for 
                        system initialization and runtime. System manufacturers 
                        developing custom ASICs for highly advanced systems 
                        typically use simulation software and tools to test 
                        their hardware design. Before hardware was available, we 
                        developed and used simulators extensively for both the 
                        system firmware and kernel development to get the 
                        system-level software ready. 
                        <P>When the original prototype hardware based on 
                        first-generation Itanium processors arrived, it was time 
                        for power-on. One of the key milestones was powering the 
                        system on for the first time and taking a processor out 
                        of reset, then fetching and executing the first 
                        instructions from PROM. 
                        <P>
                        <CENTER><IMG alt=figure 
                        src="SGI Altix 3000 System_archivos/6440f3.jpg"><BR>
                        <H4>Figure 3. SGI engineers celebrate power-on 
                        success.</H4></CENTER>
                        <P>After power-on, the fun really began with long hours 
                        and weekends in the hardware ``bring-up'' lab. This is 
                        where hardware, diagnostic and platform-software 
                        engineers worked together closely to debug the system 
                        and get the processor through a series of important 
                        milestones: PROM to boot prompt, Linux kernel through 
                        initialization, reading and mounting root, reaching 
                        single-user mode and then going into multi-user mode and 
                        then connecting to the network. After that, we did the 
                        same thing all over again with multiple processors and 
                        multiple nodes--typically pursued in parallel--with 
                        several other bring-up teams at other stations that 
                        trail closely behind the lead team's progress. 
                        <P>
                        <CENTER><IMG alt=figure 
                        src="SGI Altix 3000 System_archivos/6440f4.jpg"><BR>
                        <H4>Figure 4. During bring-up, a hardware engineer, a 
                        PROM engineer and an OS engineer discuss a 
                        bug.</H4></CENTER>
                        <P>Once we had Linux running on the prototype systems 
                        with first-generation Itanium processors, software 
                        engineers could proceed with ensuring that Linux ran 
                        and, in particular, scaled well on large NUMA systems. 
                        We built and used numerous in-house, first-generation 
                        Itanium-based systems to help ensure that Linux 
                        performed well on large systems. By early 2001, we had 
                        succeeded in running a 32-processor Itanium-based 
                        system--the first of its kind. 
                        <P>
                        <CENTER><IMG alt=figure 
                        src="SGI Altix 3000 System_archivos/6440f5.jpg"><BR>
                        <H4>Figure 5. The author's son in front of an early 
                        32-processor Itanium-based system, Summer 
                        2001.</H4></CENTER>
                        <P>These first-generation Itanium-based systems were key 
                        in having Linux ready for demanding HPC requirements. 
                        Well before the first Itanium 2 processors were 
                        available from Intel, the bulk of the scaling, I/O 
                        performance and other changes for Linux could be 
                        developed and tested. 
                        <P>As one group of SGI software engineers was busy 
                        working on performance, scaling and other issues, using 
                        prototypes with first-generation Itanium processors, 
                        another team of hardware and platform-software engineers 
                        was getting the next-generation SGI C-brick with Itanium 
                        2 processors ready for power-on to repeat the bring-up 
                        process all over again. 
                        <P>
                        <CENTER><IMG alt=figure 
                        src="SGI Altix 3000 System_archivos/6440f6.jpg"> 
                        <H4>Figure 6. First power-on of the Itanium 2-based 
                        C-brick.</H4></CENTER>
                        <P>By mid-2002, the bring-up team had made excellent 
                        progress, from power-on of a single processor to running 
                        a 64-processor system. The 64-processor system with 
                        Itanium 2 processors again marked the first of its kind. 
                        All this, of course, was with Linux running in a 
                        single-system image. 
                        <P>Throughout this whole process, we passed any changes 
                        in Linux or bugs found back to the kernel developers for 
                        inclusion in a future release of Linux. 
                        <P>
                        <H3>A Closer Look at Linux on Big Iron</H3>
                        <P>Other Linux developers often ask, ``What kind of 
                        changes did you have to make to get Linux to run on that 
                        size system?'' or ``Isn't Linux CPU scaling limited to 
                        eight or so processors?'' Answering these questions 
                        involves examining further what SGI is using as its 
                        software base, the excellent changes made by the 
                        community and the other HPC-related enhancements and 
                        tools provided by SGI to help make Linux scale far 
                        beyond the perceived limit of eight processors. 
                        <P>On the SGI Altix 3000 system, the system software 
                        consists of a standard Linux distribution for Itanium 
                        processors and SGI ProPack, an overlay product that 
                        provides additional features for Linux. SGI ProPack 
                        includes a newer 2.4-based Linux kernel, HPC libraries 
                        highly tuned to exploit SGI's hardware, NUMA tools and 
                        drivers. 
                        <P>The 2.4-based Linux kernel used on the SGI Altix 3000 
                        system consists of the standard 2.4.19 kernel for 
                        Itanium processors (<A href="http://kernel.org/" 
                        target=_blank>kernel.org</A>), plus other improvements. 
                        These improvements fall into one of three categories: 
                        general bug fixes and platform support, improvements 
                        from other work occurring within the Linux community and 
                        SGI changes. 
                        <P>The first category of kernel changes is simply 
                        ongoing fixes to bugs found during testing and the 
                        continued improvements for the underlying platform and 
                        NUMA support. For these changes, SGI works with the 
                        kernel team's designated maintainer to get these changes 
                        incorporated back into the mainline kernel. 
                        <P>The second category of kernel improvements consists 
                        of the excellent work and performance patches developed 
                        by others within the community that have not been 
                        accepted officially yet or were deferred until the 2.5 
                        development stream. These improvements can be found on 
                        the following VA Software SourceForge sites: ``Linux on 
                        Large Systems Foundry'' (<A 
                        href="http://large.foundries.sourceforge.net/" 
                        target=_blank>large.foundries.sourceforge.net</A>) and 
                        the ``Linux Scalability Effort Project'' (<A 
                        href="http://sourceforge.net/projects/lse" 
                        target=_blank>sourceforge.net/projects/lse</A>). We used 
                        the following patches from these projects: CPU 
                        scheduler, Big Kernel Lock usage reduction improvements, 
                        dcache_lock-usage reduction improvements based on the 
                        Read-Copy-Update spinlock paradigm and xtime_lock 
                        (gettimeofday) usage reduction improvements based on the 
                        FRlock locking paradigm. 
                        <P>We also configured and used the Linux device 
                        filesystem (devfs, <A 
                        href="http://www.atnf.csiro.au/people/rgooch/linux/docs/devfs.html" 
                        target=_blank>www.atnf.csiro.au/people/rgooch/linux/docs/devfs.html</A>) 
                        on our systems to handle large numbers of disks and I/O 
                        busses. Devfs ensures that device path names persist 
                        across reboots after other disks or controllers are 
                        added or removed. The last thing a system administrator 
                        of a very large system wants is to have a controller go 
                        bad and have some 50 or more disks suddenly renumbered 
                        and renamed. We have found devfs to be reliable and 
                        stable in high-stress system environments with 
                        configurations consisting of up to 64 processors with 
                        dozens of fibre channel loops with hundreds of disks 
                        attached. Devfs is an optional part of the 2.4 Linux 
                        kernel, so a separate kernel patch was not needed. 
                        <P>The third category of kernel change consists of 
                        improvements by SGI that are still in the process of 
                        getting submitted into mainline Linux, were accepted 
                        after 2.4 or will probably remain separate due to the 
                        specialized use or nature of the patch. These 
                        open-source improvements can be found at the ``Open 
                        Source at SGI'' web site (<A href="http://oss.sgi.com/" 
                        target=_blank>oss.sgi.com</A>). The improvements we made 
                        included: XFS filesystem software, Process AGGregates 
                        (PAGG), CpuMemSets (CMS), kernel debugger (kdb) and a 
                        Linux kernel crash dump (lkcd). 
                        <P>In addition, SGI included its SCSI subsystem and 
                        drivers ported from IRIX. Early tests of the Linux 2.4 
                        SCSI I/O subsystem showed that our customers' demanding 
                        storage needs could not be met without a major overhaul 
                        in this area. While mainstream kernel developers are 
                        working on this for a future release, SGI needed an 
                        immediate fix for its 2.4-based kernel, so the SGI XSCSI 
                        infrastructure and drivers from IRIX were used as an 
                        interim solution. 
                        <P>Figures 7-9 illustrate some of the early performance 
                        improvements that were achieved with Linux on the SGI 
                        Altix 3000 system using the previously described 
                        changes. Figure 7 compares XFS to other Linux 
                        filesystems. (Note, for a more detailed study on Linux 
                        filesystem performance, see ``Filesystem Performance and 
                        Scalability in Linux 2.4.17'', 2002 USENIX Annual 
                        Technical Conference, which is also available at <A 
                        href="http://oss.sgi.com/" 
                        target=_blank>oss.sgi.com</A>). Figure 8 compares XSCSI 
                        to SCSI in Linux 2.4, and Figure 9 shows CPU scalability 
                        using AIM7. 
                        <P>
                        <CENTER><IMG alt=figure 
                        src="SGI Altix 3000 System_archivos/6440f7.jpg"><BR>
                        <H4>Figure 7. Filesystem performance comparison: AIM7 
                        multi-user kernel workload, 2.4.17 kernel; 28 P Itanium 
                        prototype, 14GB, 120 disks; work-in-progress, interim 
                        example; varied filesystems only, but includes SGI 
                        enhancements and SGI tuned kernel.</H4></CENTER>
                        <P>
                        <CENTER><IMG alt=figure 
                        src="SGI Altix 3000 System_archivos/6440f8.jpg"><BR>
                        <H4>Figure 8. Linux XSCSI performance example: 
                        work-in-progress, interim example using 2.4.16 kernel; 
                        120 processes reading from 120 disks (through driver 
                        only).</H4></CENTER>
                        <P>
                        <CENTER><IMG alt=figure 
                        src="SGI Altix 3000 System_archivos/6440f9.jpg"> 
                        <H4>Figure 9. CPU scaling example with AIM7: AIM7 
                        multi-user kernel workload, 2.4.16 kernel; 
                        work-in-progress, interim example; SGI enhancements and 
                        SGI-tuned kernel.</H4></CENTER>
                        <P>While SGI is focused more toward high-performance and 
                        technical computing environments--where the majority of 
                        CPU cycles is typically spent in user-level code and 
                        applications instead of in the kernel--the AIM7 
                        benchmark does show that Linux can still scale well with 
                        other types of workloads common in enterprise 
                        environments. For HPC application performance and 
                        scaling examples for Linux, see the Sidebar ``Already 
                        Solving Real-World Problems''. 
                        <P>Figure 10 shows the scaling results achieved on an 
                        early SGI 64-processor prototype system with Itanium 2 
                        processors running the STREAM Triad benchmark, which 
                        tests memory bandwidth. With this benchmark, SGI 
                        demonstrated near-linear scalability from two to 64 
                        processors and achieved over 120GB per second. This 
                        result marks a significant milestone for the industry by 
                        setting a new world record among a microprocessor-based 
                        system, which was achieved running Linux within a 
                        single-system image! This impressive result also 
                        demonstrates that Linux can indeed scale well beyond the 
                        perceived limitation of eight processors. For more 
                        information on STREAM Triad, see <A 
                        href="http://www.cs.virginia.edu/stream" 
                        target=_blank>www.cs.virginia.edu/stream</A>. 
                        <P>
                        <CENTER><IMG alt=figure 
                        src="SGI Altix 3000 System_archivos/6440f10.jpg"><BR>
                        <H4>Figure 10. Near-linear STREAM Triad scalability up 
                        to 64 processors.</H4></CENTER>
                        <P>When you look at the list of kernel additions 
                        included in SGI ProPack the list is actually 
                        surprisingly small, which speaks highly of Linux's 
                        robust original design. What is even more impressive is 
                        that many of these and other changes are already in the 
                        2.5 development kernel. At this pace, Linux is quickly 
                        evolving as a serious HPC operating system. 
                        <P><A 
                        href="http://linuxjournal.com/modules.php?op=modload&amp;name=NS-articles/buzz&amp;file=6440s2">
                        <H3>Already Solving Real-World Problems</A></H3>
                        <P>
                        <H3>Other Enhancements to Linux for HPC</H3>
                        <P>SGI ProPack also includes several tools and libraries 
                        to help improve performance on large NUMA systems for 
                        solving a complex problem with an application that needs 
                        large numbers of CPUs and memory, or when multiple 
                        applications are running simultaneously within the same 
                        large system. On Linux, SGI provides the commands 
                        <B>cpuset</B> and <B>dplace</B>, which give predictable 
                        and improved CPU and memory placement control for HPC 
                        applications. These tools help unrelated jobs carve out 
                        and use the resources they each need without getting 
                        into each other's way or help prevent a smaller job from 
                        inadvertently thrashing across a larger pool of 
                        resources than it can effectively use. Therefore system 
                        resources are used efficiently and deliver results in a 
                        consistent time period--two characteristics critical to 
                        HPC environments. 
                        <P>Also, the SGI Message Passing Toolkit (MPT) in SGI 
                        ProPack provides industry-standard message passing 
                        libraries optimized for SGI computers. MPT contains MPI 
                        and SHMEM APIs, which transparently utilize and exploit 
                        the low-level capabilities within the SGI hardware, such 
                        as its block transfer engine (BTE) for fast 
                        memory-to-memory transfers and the hardware memory 
                        controller's fetch operation (fetchop) support. Fetchop 
                        support enables direct communication and synchronization 
                        between multiple MPI processes while eliminating the 
                        overhead associated with system calls to the operating 
                        system. 
                        <P>The SGI ProPack NUMA tools, HPC libraries and 
                        additional software support layered on top of a standard 
                        Linux distribution provide a powerful HPC software 
                        environment for big compute and data-intensive 
                        workloads. Much like a custom ASIC on hardware providing 
                        the ``glue logic'' to leverage and use commodity 
                        processors, memory and I/O parts, SGI ProPack software 
                        provides the ``glue logic'' to leverage the Linux 
                        operating system as a commodity building block for large 
                        HPC environments. 
                        <P>
                        <H3>Conclusion</H3>
                        <P>No one believed Linux could scale so well, so soon. 
                        By combining Linux with SGI NUMAflex system architecture 
                        and Itanium 2 processors, SGI has built the world's most 
                        powerful Linux system. Bringing the SGI Altix 3000 
                        system to market involved a tremendous amount of work, 
                        and we consider it to be only the beginning. The 
                        aggressive standards-based strategy that SGI has for 
                        using Linux on Itanium 2-based systems is raising the 
                        bar on what Linux can do while providing customers an 
                        exciting, no-compromises alternative for large HPC 
                        servers and supercomputers. SGI engineers--and the 
                        entire company for that matter--are fully committed to 
                        building on Linux capabilities and pushing the envelope 
                        even further to bring more exciting breakthroughs and 
                        opportunities for the Linux and HPC communities. 
                        <P><IMG src="SGI Altix 3000 System_archivos/6440aa.jpg" 
                        align=left> 
                        <P>
                        <BLOCKQUOTE><I><B>Steve Neuner</B> has been working in 
                          UNIX kernel development for the past 19 years at major 
                          computer manufacturers including MAI Basic Four, 
                          Sequent Computer Systems, Digital Equipment 
                          Corporation and SGI. Now with SGI, Steve is the Linux 
                          engineering director and has been working on Linux and 
                          Itanium-based systems since joining SGI four years 
                          ago. </I>
                          <P></P></BLOCKQUOTE>
                        <P><BR><BR>
                        <CENTER><A 
                        href="https://www.ssc.com/lj/subs/NewUSA.html"><IMG 
                        height=88 
                        src="SGI Altix 3000 System_archivos/ljsubsbutton.png" 
                        width=90></A></CENTER></FONT></TD></TR></TBODY></TABLE><BR></TD></TR></TBODY></TABLE><!-- COMMENTS NAVIGATION BAR START --><A 
            name=comments></A>
            <TABLE cellSpacing=0 cellPadding=0 width="99%" border=0>
              <TBODY>
              <TR>
                <TD align=middle bgColor=#cfcfbb><FONT class=content 
                  color=#000000>"Scaling Linux to New Heights: the SGI Altix 
                  3000 System" | <A 
                  href="http://linuxjournal.com/user.php"><FONT 
                  color=#000000>Login/Create an Account</FONT></A> | <B>4</B> 
                  comments</FONT></TD></TR>
              <TR>
                <TD align=middle width="100%" bgColor=#efefef>
                  <TABLE border=0>
                    <TBODY>
                    <TR>
                      <TD><FONT class=content>
                        <FORM action=article.php method=get><FONT 
                        color=#000000>Threshold</FONT> <SELECT name=thold> 
                          <OPTION value=-1>-1</OPTION> <OPTION value=0 
                          selected>0</OPTION> <OPTION value=1>1</OPTION> <OPTION 
                          value=2>2</OPTION> <OPTION value=3>3</OPTION> <OPTION 
                          value=4>4</OPTION> <OPTION value=5>5</OPTION></SELECT> 
                        <SELECT name=mode><OPTION value=nocomments>No 
                          Comments</OPTION> <OPTION value=nested>Nested</OPTION> 
                          <OPTION value=flat>Flat</OPTION> <OPTION value=thread 
                          selected>Thread</OPTION></SELECT> <SELECT 
                          name=order><OPTION value=0 selected>Oldest 
                          First</OPTION> <OPTION value=1>Newest First</OPTION> 
                          <OPTION value=2>Highest Scores First</OPTION></SELECT> 
                        <INPUT type=hidden value=6440 name=sid> <INPUT type=submit value=Refresh></FORM></FONT></TD>
                      <TD bgColor=#efefef><FONT class=content>
                        <FORM action=comments.php method=post><INPUT type=hidden 
                        name=pid><INPUT type=hidden value=6440 name=sid><INPUT 
                        type=hidden value=Reply name=op>&nbsp;&nbsp;<INPUT type=submit value="Post Comment"></FORM></FONT></TD></TR></TBODY></TABLE></TD></TR>
              <TR>
                <TD align=middle bgColor=#cfcfbb><FONT class=tiny>The comments 
                  are owned by the poster. We aren't responsible for their 
                  content.</FONT></TD></TR></TBODY></TABLE><!-- COMMENTS NAVIGATION BAR END --><A 
            name=5623></A>
            <TABLE width="99%" border=0>
              <TBODY>
              <TR bgColor=#efefef>
                <TD width=500><B>Re: Scaling Linux to New Heights: the SGI 
                  Altix 3000 System</B> <FONT class=content>(Score: 0)<BR>by 
                  Anonymous on Wednesday, January 15, 2003</FONT></TD></TR>
              <TR>
                <TD>how many bogomips does this monster achieve 8-) 
              ?</TD></TR></TBODY></TABLE><BR><BR><FONT class=content>[ <A 
            href="http://linuxjournal.com/comments.php?op=Reply&amp;pid=5623&amp;sid=6440&amp;mode=&amp;order=&amp;thold=">Reply 
            to This</A> ]</FONT><BR><BR>
            <UL>
              <LI><FONT class=content color=#000000><A 
              href="http://linuxjournal.com/comments.php?op=showreply&amp;tid=5631&amp;sid=6440&amp;pid=5623&amp;mode=&amp;order=&amp;thold=#5631">Re: 
              Scaling Linux to New Heights: the SGI Altix 3000 System</A> by 
              Anonymous on Wednesday, January 15, 2003</FONT><BR>
              <LI><FONT class=content color=#000000><A 
              href="http://linuxjournal.com/comments.php?op=showreply&amp;tid=5636&amp;sid=6440&amp;pid=5623&amp;mode=&amp;order=&amp;thold=#5636">Re: 
              BogoMIPS and Pricing</A> by SteveNeuner on Wednesday, January 15, 
              2003</FONT><BR></LI></UL><A name=5644></A>
            <TABLE width="99%" border=0>
              <TBODY>
              <TR bgColor=#efefef>
                <TD width=500><B>Couple more questions for Steve on CPUs and 
                  the technology.</B> <FONT class=content>(Score: 0)<BR>by 
                  Anonymous on Thursday, January 16, 2003</FONT></TD></TR>
              <TR>
                <TD>Why the process of choosing the Itanium 2 CPU? What are 
                  the benefits of this platform in your view? Would other CPUs 
                  have worked as well (PowerPC, MIPS, AMD/Hammer) or could there 
                  be processor module versions based on these models in the 
                  future? Can the traditional workstation market benefit from 
                  some of this technology (i.e. an small case with support for 4 
                  modules only)? <BR><BR>Thanks 
            <BR>Andreas</TD></TR></TBODY></TABLE><BR><BR><FONT class=content>[ 
            <A 
            href="http://linuxjournal.com/comments.php?op=Reply&amp;pid=5644&amp;sid=6440&amp;mode=&amp;order=&amp;thold=">Reply 
            to This</A> ]</FONT><BR><BR>
            <UL></UL><!-- Finished article caching (or not caching). --></TD>
          <TD bgColor=#ffffff><IMG height=1 alt="" 
            src="SGI Altix 3000 System_archivos/pixel.gif" width=10 border=0> 
        </TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 width="100%" align=center 
      bgColor=#ffffff border=0>
        <TBODY>
        <TR vAlign=top>
          <TD align=middle height=17><IMG height=17 alt="" hspace=0 
            src="SGI Altix 3000 System_archivos/corner-bottom-left.png" width=17 
            align=left> <IMG height=17 alt="" hspace=0 
            src="SGI Altix 3000 System_archivos/corner-bottom-right.png" 
            width=17 align=right> </TD></TR></TBODY></TABLE><BR>
      <TABLE cellSpacing=0 cellPadding=0 width="100%" align=center 
      bgColor=#ffffff border=0>
        <TBODY>
        <TR vAlign=top>
          <TD><IMG height=17 alt="" hspace=0 
            src="SGI Altix 3000 System_archivos/corner-top-left.png" width=17 
            align=left></TD>
          <TD width="100%">&nbsp;</TD>
          <TD><IMG height=17 alt="" hspace=0 
            src="SGI Altix 3000 System_archivos/corner-top-right.gif" width=17 
            align=right></TD></TR>
        <TR align=middle>
          <TD width="100%" colSpan=3><!-- BEGIN FOOTER -->
            <CENTER><FONT class=tiny><A href="http://www.ssc.com/" 
            target=blank><IMG src="SGI Altix 3000 System_archivos/ssc_logo.png" 
            border=0></A> <BR>© 1994-2002 Specialized Systems Consultants, Inc. 
            (SSC) publishers of <I>Linux Journal</I>. <BR>
            <CENTER><A href="http://www.ssc.com/ssc/privacy.html">Privacy 
            Statement</A> </CENTER><BR>Syndicated news file: <A 
            href="http://linuxjournal.com/news.rss">news.rss</A><BR>Powered by 
            <A href="http://phpnuke.org/" target=_blank>PHP-Nuke</A> 
            <BR></FONT></CENTER></TD></TR>
        <TR>
          <TD><IMG height=17 alt="" hspace=0 
            src="SGI Altix 3000 System_archivos/corner-bottom-left.png" width=17 
            align=left></TD>
          <TD width="100%">&nbsp;</TD>
          <TD><IMG height=17 alt="" hspace=0 
            src="SGI Altix 3000 System_archivos/corner-bottom-right.png" 
            width=17 
align=right></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></BODY></HTML>
