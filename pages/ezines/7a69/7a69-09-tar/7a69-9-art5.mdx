---
title: "7a69#9-art5"
ezine: "7a69"
---

# 7a69#9-art5

**Ezine:** 7a69

<div className="ascii-content">

```
╔══════════════════════════════╦════════════════════╦═══════════════════════╗
║         * ARTICULO *         ║      * TEMA *      ║       * NIVEL *       ║
║──────────────────────────────║────────────────────║───────────────────────║
║5.- Curso de UNIX V           ║      Hacking       ║         Bajo          ║
╚══════════════════════════════╩════════════════════╩═══════════════════════╝
                                                                     [ Ripe ]

Poco a poco hemos avanzado en este curso de UNIX, ahora ya sabemos como
iniciar una sesion remota con el sistema, como camviar nuestra clave de
usuario, como funciona el sistema de archivos en UNIX, como crear y eliminar
directorios....(por si me dejo algo), y ahora vamos a aprender las
posblidades que tenemos a la hora de tratar un archivo no directorio. En este
numero del curso de UNIX va a aprender bastantes ordenes del Shell, por lo
que te recomiedo que prestes mucha antencion (como dicen siempre los profes
}:-) ). Pero antes de hablar de todo ello es preciso que sepamos como ver los
archivos que hay dentro de un directorio, para ello se usa la orden "ls" (que
ya hemos visto en alguna ocasion) que estudiaremos en profundidad a
continuacion.

NOTA: "ls" es otra de las ordenes mas usadas del shell (ya vimos "cd" en la
      entrega anterior del curso).

Como ya he dicho, "ls", es el comando que debemos usar para pedirle al UNIX
que nos muestre lo que hay dentro del directorio actual (A los usuarios de
MS-DOS quiza les ayude saber que esta orden es muy parecida al "dir").

-----------------------------------------------------------------------------
|       $pwd                                                                |
|       /usr/ripe                                                           |
|       $ls                                                                 |
|       anotaciones                                                         |
|       documentos                                                          |
|       games                                                               |
|       info.txt                                                            |
|       info2.txt                                                           |
|       notas                                                               |
|       textos                                                              |
|       xploits                                                             |
|       ziritione                                                           |
|       $_                                                                  |
-----------------------------------------------------------------------------

Como podeis ver en el ejemplo anterior el UNIX nos muestra el contenido del
directorio actual en forma de una unica columna, pero ¿que pasa si en el
directorio actual hay tantos archivos que no caben en pantalla? En ese caso
tenemos dos soluciones basicas, usar alguno de los muchos parametros que "ls"
nos ofrece y que permita visualizar mas archivos en pantalla, o utilizar un
pipeline con una llamada a una orden de paginado (si no has entendido esto
ultimo no te preocupes, lo veremos en algun otro numero del curso).

Los parametros de "ls" mediante los que conseguimos ver mas archivo en
pantalla son "-C", que nos muestra una salida con varias columnas ordenando
los archivos por columnas, "-x", que no muestra tambien una salida con varias
columnas pero ordenando los archivos por filas, y "-m" que lista los archivos
a lo largo de la pantalla separados por comas.

NOTA: Los archivos se ordenan por orden alfavetico, si quieres que estos sean
      ordenados por orden alfavetico inverso debes utiliza el parametro "-r".

-----------------------------------------------------------------------------
|       $pwd                                                                |
|       /usr/ripe                                                           |
|       $ls -C                                                              |
|       anotaciones             info.txt                textos              |
|       documentos              info2.txt               xploits             |
|       games                   notas                   ziritione           |
|       $ls -x                                                              |
|       anotaciones             documentos              games               |
|       info.txt                info2.txt               notas               |
|       textos                  xploits                 ziritione           |
|       $ls -m                                                              |
|       anotaciones, documentos. games, info.txt, info2.txt, notas, textos, |
|       xploits, ziritione                                                  |
-----------------------------------------------------------------------------

Como podemos ver "ls" puede presentarnos la salida de muchas formas distintas
(podemos convinar cada uno de estos parametros con el parametro "-r" para
invertir el orden), pero no terminan ahi las posiblidades de este comando,
mediante el parametro "-a" lograremos que el UNIX nos muestre ademas los
archivos ocultos (como ya vimos en su momento los archivos ocultos son
aquellos que empiezan por un punto (.); es el caso de los directorios "." y
".." de los que tambien hablamos).

-----------------------------------------------------------------------------
|       $pwd                                                                |
|       /usr/ripe                                                           |
|       $ls -a                                                              |
|       .                                                                   |
|       ..                                                                  |
|       .oculto1                                                            |
|       .oculto2                                                            |
|       anotaciones                                                         |
|       documentos                                                          |
|       games                                                               |
|       info.txt                                                            |
|       info2.txt                                                           |
|       notas                                                               |
|       textos                                                              |
|       xploits                                                             |
|       ziritione                                                           |
|       $_                                                                  |
----------------------------------------------------------------------------- 

Otros parametros muy usados son "-p", que añade una barra inclinada a la
derecha (/) detras de cada archivo directorio, y "-F", que ademas de ello
añade tambien un asterisco (*) detras de cada ejecutable.

-----------------------------------------------------------------------------
|       $pwd                                                                |
|       /usr/ripe                                                           |
|       $ls -p                                                              |
|       anotaciones                                                         |
|       documentos/                                                         |
|       games/                                                              |
|       info.txt                                                            |
|       info2.txt                                                           |
|       notas                                                               |
|       textos/                                                             |
|       xploits/                                                            |
|       ziritione                                                           |
|       $ls -F                                                              |
|       anotaciones                                                         |
|       documentos/                                                         |
|       games/                                                              |
|       info.txt                                                            |
|       info2.txt                                                           |
|       notas                                                               |
|       textos/                                                             |
|       xploits/                                                            |
|       ziritione*                                                          |
|       $_                                                                  | 
-----------------------------------------------------------------------------

Hay bastantes mas parametros para la orden "ls", todos ellos utiles, pero
solo vamos a hablar de uno mas, "-l", quiza uno de los mas utilizados
debido a que es el parametro que hace que "ls" nos de mas informacion sobre
cada archivo. Al principio, a los que aun no se han familiarizado con el
entorno UNIX, les cuesta entender un poco alguna de la informacion que se
consigue. Pero vayamos a lo practico :)

-----------------------------------------------------------------------------
|       $pwd                                                                |
|       /usr/ripe                                                           |
|       $ls -l                                                              |  
|       -rw-r--r--   ripe   remoto    143   Nov 26  10:45   anotaciones     |  
|       drw-r--r--   ripe   remoto   1567   Mov 10  01:21   documentos      |
|       drw-r--r--   ripe   remoto   6748   Oct 22  07:42   games           |
|       -rw-r--r--   ripe   remoto    432   Oct 12  12:23   info.txt        |
|       -rw-r--r--   ripe   remoto    234   Oct 12  12:25   info2.txt       |
|       -rw-r-----   ripe   remoto    651   Nov 17  02:22   notas           |
|       drw-r--r--   ripe   remoto   1468   Oct 19  10:46   textos          |
|       drw-------   ripe   remoto   9654   Jun 21  03:09   xploits         |
|       -rwxr-x---   ripe   remoto    945   Jun 21  03:12   ziritione       |
|       $_                                                                  |
-----------------------------------------------------------------------------

JODEERRR ¿Que c*ño es todo esto? Como puedes ver, "ls -l" te muestra 7
columnas con informacion sobre cada archivo, esta informacion es realmente
util en muchos casos.

        -La primera columna esta compuesta por 10 caracteres, el primero
         indica el tipo de archivo, mientras que el resto indica los
         permisos de acceso al archivo (hablaremos de todo ello mas
         adelante).

        -La segunda el numero de enlaces que tiene el archivo (de esto
        tambien hablaremos :P)

        -La tercera indica el propietario del archivo.

        -La cuarta indica al grupo al que pertenece el archivo (normalmente
         el mismo al que pertenece el usuario).

        -La quinta columna indica el tamaño del archivo en bytes (si quieres
         que el tamaño del archivo te sea mostrado en bloques debes usar el
         parametro "-s", de manera que convinado con "-l".... "ls -ls" ;) ).

        -La sexta muestra la fecha y hora de la ultima modificacion que
         sufrio el archivo.

        -Os preguntareis ¿Y donde esta el nombre del archivo? Pues en la
         septima y ultima columna :)

Otro parametro que puede ser usado por "ls" es "-i", mediante el cual este
nos mostrara la lista de los ficheros con su respectivo numero i-nodo.

-----------------------------------------------------------------------------
|       $ls -i                                                              |
|       5672 facturas                                                       |
|       4689 informes                                                       |
-----------------------------------------------------------------------------

Ademas te todo ello "ls" permite mas posiblidades, como el uso de
metacaracteres (lo que voy a contar ahora es tambein aplicable a otras
ordenes del shell y es de mucha utilidad). ¿Que es un metacaracter? Pues
podiriamos decir que un metacaracter no es mas que un "comodin", un caracter
que puede ser substituido por algo. Los metacaracteres mas utilizados
(almenos los que yo mas uso) son "?", y "*", aunque existen otros como "[]".

Empezaremos hablando del metacaracter "?"; El signo interrogativo (?) es un
caracter especial que el shell interpretara como cualquier caracter, su uso
es muy sencillo, como veremos a continuacion:
        
-----------------------------------------------------------------------------
|       $ls                                                                 |
|       texto                                                               | 
|       texto1                                                              |
|       texto2                                                              |
|       texto3                                                              |
|       texto33                                                             |
|       texto34                                                             |
|       zeros                                                               |
|       $ls texto?                                                          |
|       texto1                                                              |  
|       texto2                                                              |
|       texto3                                                              |              |
|       $ls texto??                                                         |
|       texto33                                                             |
|       texto34                                                             |
|       $ls ?????                                                           |
|       texto                                                               |
|       zeros                                                               |
-----------------------------------------------------------------------------

Como podemos gracias a la primera llamada a "ls" que hacemos el directorio en
el que nos encontramos contiene 7 ficheros.

En la segunda llamada a "ls" que hacemos ("ls texto?"), estamos preguntandole
al sistema que ficheros hay en el directorio actual que cuyo nombre sea
"texto" seguido de un solo caracter (cualquiera), por ello ni "texto33", ni
"texto34" aparecen.

La tercera llamada a "ls" es similar a la segunda, la unica diferenci es que
en vez de mostrarnos lo ficheros cuyo nombre sea "texto"+&lt;un caracter> nos
muestra nos mostrara los ficheros que tengan como nombre
"texto"+&lt;dos caracteres>.

La ultima llamado pide que se nos muestren los ficheros cuyo nombre contenga
5 caracteres.

Visto el metacaracter "?", pasare a comentar el "*", que, personalmente, es
el que uso mas. Si "?" era substituido por un solo caracter, "*" sera
substituido por cualquier numero de caracteres (por si a alguien lo queda mas
claro asi... diremos que sera substituido por un string). Siguiendo en el
directorio anterir vamos los siguientes ejemplos:

-----------------------------------------------------------------------------
|       $ls texto*                                                          |
|       texto                                                               |
|       texto1                                                              |
|       texto2                                                              |
|       texto3                                                              |
|       texto33                                                             |
|       texto34                                                             |
|       $ls *3*                                                             |
|       texto3                                                              |
|       texto33                                                             |
|       texto34                                                             |
-----------------------------------------------------------------------------

Notese que el metacaracter "*" tambien puede ser substituido por nada... :->

Y pasemos ya a hablar del ultimo metacaracter, que es quiza el mas complicado
(aunque no conlleva ningun tipo de complicacion). Los corchetes de abrir y
cerrar "[]" con caracteres especiales que encierran listas de caracteres.
Para formar estas listas de caracteres usaremos dos limitadores, de manera
que esa lista conedra todos los caracteres que se encuentren entre dichos
limitadores (incluyendose a ellos mismos), asi pues "[a-e]" contiene los
caracteres a, b, c, d, e. Veamos un ejemplo, sin movernos del directorio
actual :P

-----------------------------------------------------------------------------
|       $ls texto[1-33]                                                     |
|       texto1                                                              |
|       texto2                                                              |
|       texto3                                                              |
|       texto33                                                             |
|       $ls *[2-4]                                                          |
|       texto2                                                              |
|       texto3                                                              |
|       texto33                                                             |
|       texto34                                                             |
-----------------------------------------------------------------------------

Este metacaracter permite ademas la posiblidad de negacion mediante otro
metacaracter "!". La utilizacion del sigo de exclamacion (!) delante hara que
se muestren los archivos que no contengan en la posicion del metacaracter
ninguno de los caracteres de la lista.

En el numero anterion de este curso vimos como podiamos utilizar la orden
"rm" para borrar directorios con ficheros en su interios (usando el parametro
"-r"), pero "rm" se usa mas amenudo para borrar ficheros.

-----------------------------------------------------------------------------
|       $cd /home/local/luis                                                |
|       $ls                                                                 |
|       dibujo.jpg                                                          |
|       libros.txt                                                          |
|       notas.txt                                                           |
|       telefonos                                                           |
|       $rm telefonos                                                       |
|       $ls                                                                 |
|       dibujo.jpg                                                          |
|       libros.txt                                                          |
|       notas.txt                                                           |
|       $rm *.txt dibujo.jpg                                                |
|       $ls -a                                                              |
|       .                                                                   |
|       ..                                                                  |
-----------------------------------------------------------------------------

Como podemos ver "rm" borra el/los fichero/s indicados sin pedir ningun tipo
de confirmacion, de todos modos si queremos que UNIX nos pida confirmacion a
la hora de borrar un fichero con "rm" podemos usar el parametro "-i".

Ya hemo visto como listar y borrar ficheros, como usar los metacaracteres
"?", "*", "[]" y "!", por lo que seguidamente veremos como copiar ficheros
"cp", como lincar ficheros "ln", como mover (o cambiar nombre) ficheros "mv".

La orden "cp", es muy sencilla de utilizar, y como podreis deducir (cp=CoPy
:P) se utiliza para copira ficheros y directorios. Para copiar un fichero no
usaremos ningun tipo de parametro, mientras que si lo que queremos copiar son
directorios utilizaremos el parametro "-r". Si a la hora de copiar un fichero
UNIX ha de sobreescribir otro fichero, este no nos avisara y lo hara sin
contemplaciones (he de decir que a causa de ello yo he perdido algun
trabajo), si queremos que UNIX pida confirmacion a la hora de sobreescibir un
fichero o un directorio usaremos el parametro "-i".

-----------------------------------------------------------------------------
|       $pwd                                                                |
|       /home/remote/manolito/trabajos1999                                  |
|       $ls                                                                 |
|       cUNIX.doc                                                           |
|       $cd ..                                                              |
|       $ls                                                                 |
|       informes                                                            |
|       notas                                                               |
|       trabajos1999                                                        |
|       $cp informes informes.antiguos                                      |
|       $ls                                                                 |
|       informes                                                            |
|       informes.abtiguos                                                   |
|       notas                                                               |
|       trabajos1999                                                        |
|       $cp -r trabajos1999 trabajos1999.cpy                                |
|       $cd trabajos1999.cpy                                                |
|       $ls                                                                 |
|       cUNIX.doc                                                           |
-----------------------------------------------------------------------------

"ls" realiza una accion similar a "cp" (son similares pero no no hay
confundirlas), la diferencia entre "cp" y "ln" es que el uso de "ln" no
ocupa mas espacio en el disco, pues lo unico que se crea en un enlaze
mediante la copia del i-nodo del fichero (quizas suene algo raro, si no lo
entiende no te preocupes y relacionalo con los accesos directos del
güindous), lo veremos en el siguiente ejemplo:

-----------------------------------------------------------------------------
|       $ls -i                                                              |
|       3534 fichero                                                        |
|       $cp fichero.cp                                                      |
|       $ls -i                                                              |
|       3534 fichero                                                        |
|       6781 fichero.cp                                                     |
|       $ln fichero fichero.ln                                              |
|       $ls -i                                                              |
|       3534 fichero                                                        |
|       6781 fichero.cp                                                     |
|       3534 fichero.ln                                                     |
-----------------------------------------------------------------------------

Se puede ver que al realizar "cp" el i-nodo del nuevo fichero es diferente,
mientras que al usar "ln" es i-nodo se conserva pues realmente son el mismo
fichero con distinto nombre.

"mv" tiene una doble utilidad (que de echo es la misma...), la de mover y la
de cambiar nombre a los ficheros, al igual que las demas ordenes que hemos
visto no pedira confirmacionsi ha de sobreescribir a no ser que usemos el
parametro "-i".

-----------------------------------------------------------------------------
|       $ls                                                                 |
|       prueba.txt                                                          |
|       $mv prueba.txt viajes                                               |
|       $ls                                                                 |
|       viajes                                                              |
|       $mv viajes ../viajes                                                |
|       $ls                                                                 |
|       $cd ..                                                              |
|       $ls                                                                 |
|       facturas                                                            |
|       informes                                                            |
|       viajes                                                              |
-----------------------------------------------------------------------------

Bueno, hasta aqui esta quinta entega :)

NOTA FINAL: Vistas las peticiones de los lectores, tratare de acelerar un
            poco el curso (ya se que estais ansiosos por aprender :P)

```

</div>
