---
title: "018"
ezine: "disidents"
---

# 018

**Ezine:** disidents

<div className="ascii-content">

```
∩╗┐[018]_GUIA_PROFESIONAL_DE_CONFIGURACION_DE_SERVIDORES_1_parte_by_DDiego_-_Disidents_Journal_5                         


                        -+-| DisidentS Hack Journal #5 |-+-







  ________________________________________________________________________
 |                                                                        |
 |  -+- Titulo_____: GUIA PROFESIONAL DE CONFIGURACION DE SERVIDORES 1┬¬  |
 |                   PARTE   [**.txt]                                     | 
 |  -+- Autor______: DDiego                                               |
 |  -+- E-Mail_____: &lt;ddiegodisidents@yahoo.es> - &lt;diegorba@yahoo.es>     | 
 |  -+- Team_______: DISIDENTS ESPA├æA 2004 -  LOS FUERA DE LA LEY        | 
 |  -+- KB_________: 113.8KB                                              |   
 |  -+- Tema_______: Configuracion de servidores                          |          
|_________________________________________________________________________|



.==========================================================================.
|===========~ INDICE ~======================================================
|===========================================================================
|=~ 1.0.0  INTRODUCCION                                                    |
|=~ 2.0.0  EDITOR VI							  		   |	
|=~ 3.0.0  GESTOR DE VENTANAS, MANEJO					         |
|=~ 4.0.0  MANEJO BASICO MODO TEXTO					               |	
|=~ 5.0.0  CONFIGURACION IP - IFCONFIG NOTA: (esencial leer el RECUERDA pa-| 
|=~ ra poder seguir con el articulo, salvo que ya se tengan conocimientos  |
|=~ de configuracion de cortafuegos)   					         |
|=~ 6.0.0  SERVIDOR TELNETD 						               |	
|=~ 7.0.0  TCP-WRAPPERS							   		   |
|=~ 8.0.0  SERVIDOR SSHD						   		   |
|=~ 9.0.0  SERVIDOR NFS							   	 	   |
|=~ 10.0.0 SERVIDOR SAMBA 						   		   |	
|=~ 11.0.0 SERVIDOR DNS 						  		   |	
|=~ 12.0.0 HACIENDO UN ROUTER DE NUESTRO PC					   |
|=~ 13.0.0 SERVIDOR DHCP						  		   |
|=~ 14.0.0 SERVIDOR WEB - APACHE					   		   |
|=~ 15.0.0 LINKS INTERENSANTES                                             |
|=~ 16.0.0 LIBROS RECOMENDADOS                                             |
|=~ 17.0.0 NOTAS FINALES                                                   |
|=~ 18.0.0 SALUDOS                                                         |
|=~ 19.0.0 CONTACTO                                                 	   | 
||=~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~=
.======================================================~ INDICE ~===========
============================================================================




.==========================================================================.
|=======~ SOLIDARIDAD ====================================================== 
|===========================================================================

 - Bueno esto no tiene mucho que ver con el articulo ni con la tematica de 
 la ezine, pero creo que es un tema mas que importante para que salga en 
 cualquier sitio, es un tema donde hay personas como tu pidiendo socorro en
 silencio y porque? porque no tienen recursos para tener voz,esas personas 
 no tienen internet, ni telefono, ni un ordenador para pedir auxilio y dar
 un trozo de pan para dar de comer a sus hijos, o un medicamento para curar
 esa grave enfermedad va a matar a un ser muy querido, por ello dedico el 
 primer apartado del articulo a este tema tan importante, para que esas 
 voces mudas se oigan y hacernos recordar que hay gente pasandolo muy mal
 en este mundo.

 Voy a poner algunos links interesantes:
 
 (http://www.intervida.org) "Fundacion intervida" En esta web podemos
 apadrinar ni├▒os, son 21Γé¼ al mes por ni├▒o, una vez apadrinado el ni├▒o
 incluso puedes visitarlo y conocerlo
 
 (http://www.unicef.es/) "Organismo Internacional dependiente de las 
 Naciones Unidas" puedes colaborar de varias maneras, puedes verlo en
 (http://www.unicef.es/colaborar.htm#)
 
 (http://www.msf.es/) "Medicos sin fronteras" Como lo que se suele decir
 dinero llama a dinero no se porque pero pobreza llama a desastres, Medi-
 con sin fronteras es "una organizacin m∩┐╜ica internacional de accin huma-
 nitaria que aporta su ayuda a las v∩┐╜timas de cat∩┐╜trofes de origen  natu-
 ral o humano y de conflictos armados, sin ninguna discriminacin de raza, 
 sexo, religion, filosof∩┐╜ o pol∩┐╜ica.
 
 + MAS PAGINAS:
 
 (http://www.ayudaenaccion.org/) "Ayuda en accion"
 (http://www.accioncontraelhambre.org) "Accion contra el hambre"
 (http://www.manosunidas.org/) "Manos unidas"
 (http://www.intermonoxfam.org) "Interm├│n Oxfam"
 (http://www.cruzroja.es/) "Cruz roja"
 (http://portal1.lacaixa.es/Channel/Ch_Redirect_Tx?dest=1-21-10-00000000)
 "Fundacion la caixa - Canal Solidaridad"
 
 
 + Bueno ahora si empezamos con el articulo!!
 
 
.==========================================================================.
|=======~ 1.0.0 INTRODUCCION ~==============================================
|===========================================================================

- A├▒o 2004 despues de nuestro se├▒or,  nuestro noble caballero de disidents 
  retoma su camino, un camino largo, oscuro y peligroso donde acreditara su 
  nobleza no con su sangre sino con la de susenemigos. Poderoso caballero de 
  disidents con su espada corta cabezas como   quien corta el viento, el se 
  siente poderoso no solo por su naturaleza altiva si no por la fuerza de su 
  espada, se ve fuego en su mirada como algunos de los que estais ahi detras 
  de vuestras pantallas leyendo siente al estar delante de una maquina, esa 
  maquina es un arma muy diferente a la espada, aparentemente mas liviana 
  pero en realidad mas da├▒ina de y de mayor alcanze, en este articulo no 
  aprenderemos a usar esa arma sino a estudiar a nuestro enemigo, para ello 
  deberemos saber como funcionan todo servidores y saber configurarlos.      
 	
- Hola de nuevo amigos mios que estais tras esas pantallas, me presento para 
  los que no me conozcan mi nombre es DDiego,  esta guia tratara sobre admi- 
  nistracion de servidores en linux y en  windows 2003 server,  sera muy di- 
  vertido e instructivo,  tratare de  ver a fondo los servidores mas comunes 
  si el tiempo me lo permite,  tambien veremos  metodos de proteccion corta- 
  fuegos, tcp-wrappers..., en  linux veremos  configuracion de servidores en 
  modo texto, en este articulo no ense├▒are los comandos basicos de linux, ni 
  como se instalan los paquetes, aun asi el articulo no requiere un nivel a- 
  vanzado de conocimientos, pero si unos minimos espero que os sea de   
  utilidad en esta primera parte de la guia solo trataremos servidores linux 
  nos quedara pendientes varios servidores que trataremos en la proxima   
  ezine y en la proxima guia creo que incluire 2003 server si aun me quedan  
  fuerzas.
  
  
          
.==========================================================================.
|=======~ 2.0.0 EDITOR VI ==================================================
|=========================================================================== 
 
- Como el articulo es en modo texto, tambien usaremos un editor en modo tex- 
 to, voy a poner los comandos minimos para manejarlo:  
  Abrir un archivo: vi nombredearchivo
  Introducir comandos: 1┬║ debes calcar la tecla de Escape
                       /texto buscar la palabra texto
		       i      insertar texto o reemplazar si das 2 veces
		       Insert insertar texto o reemplazar si das 2 veces
		       q:     salir si no hubo cambios  
		       q:!    salir sin guardar cambios hechos
		       w:     guardar cambios
		       w:!    guarda cambios aunque no tenga permisos de escritura
		       wq:    guardar los cambios y salir
		       wq:!   forzar la escritura y salir
                  
   Si no es suficiente, pues a cualquier buscador editor vi o a las paginas 
   man		       
		       
 NOTA:Si cierras un archivo de forma inadecuada se crea una copia con exten-
      sion .swp y te sadra una advertencia, tambien te puede salir si se in-
      tenta abrir dos veces el mismo archivo, te saldran varias opciones:
      Abrir solo lecura, editar de todas formas o recubrir (se crea un swp
      que se sobrepone a l otro", Salir. Si se apaga inadecuadamente el sis-
      tema tambien sale la opcion de borrar.
  
  
  
.==========================================================================.
|=======~ 3.0.0  GESTOR DE VENTANAS, MANEJO ~===============================
|===========================================================================
  
- Bueno, pensaban que iba a dar todo en modo texto, pero es  fundamental te-
  ner unos conocimientos minimos de como manipular las X.
  
  1┬║ Entrar en modo texto, para ello podeis pulsar Ctrl+ Alt + F1
     de F1 a F2 para poder abrir distintas terminales, y para pasar al
     terminal grafico Ctrl + Alt + F8
  
  2┬║ Cambiar la resolucion de modo texto (opcional):
  
   Para ello tenemos que modificar el archivo lilo.conf que esta dentro del
   directorio /etc y a├▒adiremos la linea: vga="789" si quieres una 
resolucion    800x600 16.7 M de colores
   
    Colores  640x480 800x600 1024x768 1280x1024 1600x1200
    --------+---------------------------------------------
    256     |769     771     773      775       796  
    32,768  |784     787     790      793       797
    65,536  |785     788     791      794       798 
    16.8M   |786     789     792      795       799
    
   Luego ponemos lilo en el terminal, para que carge los cambios
   
   
   3┬║ Problemas con el gestor de ventanas
   
   Puede que se nos quede colgado el gestor de ventanas, podemos matarlo, 
   una vez matado este automaticament se reinicia,  para matarlo solo te-
   nemos que utilizar la combinacion de teclas Ctrl+Alt+Backspace
   
   NOTA para poco habiles: Backspace es la tecla con la flechita <- que
   en ocasiones usas para borrar
   
   
   4┬║ Cambiar de resolucion: 
   
   Con Ctrl+Alt+ "tecla +" y  Ctrl+Alt+"tecla -"
   
   
   5┬║ Lanzar un gestor de ventanas
     
    Vamos al terminal y ponemos:
    
    xinit -- :1
   
    
    Si queremos iniciar kde o gnome o el gestor que quieras:
     
     gnome-session o startkde 
     
   - Ahora podemos volver a la anterior sesion grafica con Ctrl+ Alt+ F7
    y si queremos volver a la nueva vamos con Ctrl + Alt + F8
    
  
.==========================================================================.
|=======~ 4.0.0  MANEJO BASICO MODO TEXTO ~=================================
|===========================================================================
    
 - Al final he decidido ser bueno, y para que los lectores que no esten 
 acostumbrado al modo texto, pues sepan por lo menos hacer varias tareas sin
 tener que abrir varios terminales.
 
 Para ello usaremos fg,bg y jobs, no mas
 
 Para salir de un programa por la fuerza ponemos Ctrl+C
 Para poner este programa en segundo plano y una tarea nueva ponemos Ctrl+Z
    
 Una vez calcado Ctrl+Z puedes hacer otros trabajos, para ver las tareas en
 segundo plano usamos jobs
    
   
  [root@DDiego root]# jobs
  [1]+  Stopped                 vim /etc/lilo.conf
  [2]+  Stopped                 vim /etc/passwd

  
 Ahora si queremos volver a vi /etc/passwd solo tenemos que poner
 fg "FOREGROUND" 
 
 con fg a secas volvera a la ultima tarea que hemos hecho
 pero si queremos volver a una tarea determinada, solo tenemos que 
 poner el numero de tarea
 fg %1
 
 Podemos utilizar bg "BACKGROUND" de la misma forma, para ejecutar un 
 programa en segundo plano, seria de la misma forma 
 bg %1
 
 Para matar uno de esos programas que estan en segundo plano, con kill
 
 kill %1
 
  
  
.==========================================================================.
|=======~ 5.0.0  CONFIGURACION IP - IFCONFIG ~==============================
|===========================================================================
  
- Ifconfig os recordara al ipconfig en windows,  gracias a esta orden podre-
  mos cambiar la ip en memoria, es decir  de forma temporal,  tambien podre-
  cambiar la direccion MAC.
  
    
  + A├▒adir una direccion ip en memoria:
  
  ifconfig eth0 add 192.168.0.2
  
  eth0 es mi interface o tarjeta de red
  lo es el bucle local
  
  la primera ip la pone como eth0
  la segunda como eth0:0
  el bucle local lo llama lo
  
  Tambien podemos poner mascara de red de esta forma:
  
   ifconfig eth0 add 192.168.0.2 netmask 255.255.255.0
   
  Para borrar:
  
  ifconfig eth0:0 del 192.168.0.2
  
  
  + A├▒adir varias direcciones ip y que queden registradas
  
  Ahora vamos a ver como se a├▒aden varias direcciones ips y quedar regis
  tradas en el equipo, para que cuando reinicies sigas teniendolas, para 
  ello tendremos que ir a /etc/sysconfig/network-scripts/ y crear varios 
  ficheros, tantos como ips queramos tener:
  
  
  + Si quisiesemos que una maquina fuera cliente dhcp, y que le asignaran
  una direccion ip automaticamente solo tendriamos que poner:
  creamos un archivo llamado ifcfg-eth0
  
  DEVICE=eth0
  BOOTPROTO=dhcp
  ONBOOT=yes
  USERCTL=no
  PEERDNS=yes
  TYPE=Ethernet
  HWADDR=00:e0:4c:39:26:3d

  EN BOOTPROTO ESPECIFICAMOS SI LA IP ES ESTATICA O ES ASIGNADA POR UN 
  SERVIDOR DHCP
  
   
  
  Vamos a crear uno con la ip 192.168.0.2 con varios parametros, para 
  ello crearemos el archivo ifcfg-eth0:1
  
  DEVICE=eth0:1            <-- intefaz de red
  BOOTPROTO=none           <-- o tambien se puede poner static, ip estatica
  ONBOOT=yes               <-- si queremos que el interface arranque al 
iniciar  USERCTL=no               <-- permite o no permite manejar el 
dispositivo de red                                 a los usuarios
  PEERDNS=yes              <-- si ponemos no, el servidor dhcp no nos 
cambiaria el resolv.conf  TYPE=Ethernet            
  IPADDR=192.168.0.2       <-- ip que queremos asignar 
  NETMASK=255.255.255.0    <-- mascara de red
  NETWORK=192.168.0.0      <-- red en la que nos encontramos 
  BROADCAST=192.168.0.255  
  HWADDR=00:e0:4c:39:26:3d <-- mac de nuestra tarjeta
  GATEWAY=192.168.0.1      <-- puerta de enlace, para esa ip
   
  
  
  

   Ahora levantaremos la tarjeta con:
   
   ifup eth0
   ifconfig eth0 up
   
   Y si quieres bajarla
   
   ifdown eth0
   ifconfig eth0 down
   
   tb se puede especificar el dispositivo
   
   ifup eth0:1 up
 
   
   Tambien se levanta la tarjeta al iniciar el servicio network  :
   
   service network start    <- iniciar el servicio
   service network restart  <- reiniciar el servicio
   service network stop     <- parar el servicio
  
  + Como ver quien me ha asignado la direccion ip, quien es mi server DHCP??
  
  Podemos verlo en /var/lib/dhcp/ ahi dentro veremos el archivo, segun que
  nombre le hayamos puesto a nuestra conexion dhcp tendra un nombre u otro
  dhclient-eth0.leases , nos sale mucha informacion interesante ;), tiempo
  de caducidad etc etc  

  NOTA: Si editas la configuracion desde el modo grafico, machaca la de
  modo texto.
  
  + Otros archivos interesantes son:
  
    /etc/sysconfig/network donde configuramos nombre de host y el gateway
    
    NETWORKING=yes
    HOSTNAME=DDiego
    
    Podemos quitar de eth0:1 el gateway que tenemos e incluirlo aqui, 
serviria    para todas las ips

    [root@DDiego root]# hostname
    DDiego

    interesante no?, asi quitas tu localdomain
    
    
    /etc/hosts 
    
    127.0.0.1       DDiego localhost.localdomain    localhost

    DDiego, localhost etc - ip, nombre de maquina y alias 
    Con este fichero resolvemos direcciones en mi maquina
  
    Se pueden a├▒adir direcciones:
    
    Por ejemplo vamos a a├▒adir Disidents 192.168.0.3, con esto asignaria
    al nombre DDiego la ip 192.168.0.3 si hiciesemos un ping a DDiego nos 
    resolveria es ip y haria ping a esa misma ip
    
    [/etc/hosts]
    
    # Do not remove the following line, or various programs
    # that require network functionality will fail.

    127.0.0.1       DDiego  localhost.localdomain   loc alhost
    192.168.0.3     Disidents

    
    
    
    
    /etc/services Aqui tenemos una buena lista de servicios de red, con 
puertos    y una peque├▒a descripcion en algunos

    
 [ RECUERDA: Detiene el firewall, para hacer las pruebas entre servidores, 
mas  adelante explicare como configurar este, para deter iptables:
 
 #service iptables stop       
 
    

  
  
  
  
    
.==========================================================================.
|=======~ 6.0.0  SERVIDOR DE TELNETD ~======================================
|===========================================================================
  
- Telnet usa el puerto 23, bueno podeis verlo en /etc/services, no usa 
encrip-tacion todo lo que mandas y recibes va en texto plano, en principio 
no se pue-de entrar como root por seguridad, pero veremos como configurarlo 
para quepodamos entrar como root y otras muchas cosas:

El (demonio, servidor o daemon) se llama in.telnet.d 

Para usar el cliente: telnet ip            o en caso de usar un puerto
telnet ip puerto

Ej: telnet 192.168.0.1 5000 <- en este caso me estoy conectando por el 
puerto 5000 
 
  
  + Archivos y directorios interesantes:
  
   /etc/xinetd.d/  <- En este directorio tenemos archivos referentes a 
algunos   servicios entre ellos telnet
   
   /etc/xinetd.conf <- Archivo de configuracion de xinetd
  
  
  + Iniciando el servicio de forma permanente_:
  
  
  Nos vamos a /etc/xinetd.d/telnet, lo editamos y ponemos disable = no, 
  tendria que quedar asi:
  
  # default: on
  # description: The telnet server serves telnet sessions; it uses \
  #	unencrypted username/password pairs for authentication.
  service telnet
  {
	flags		= REUSE
	socket_type	= stream        
	wait		= no
	user		= root
	server		= /usr/sbin/in.telnetd
	log_on_failure	+= USERID
	disable		= no
   }

   guardamos cambios y ponemos en consola:
   
   service xinetd start
   
   
   Probamos: telnet localhost
      
   - Pero observamos que si nos autentificamos como root no nos deja, pa-
   para ello tendremos que cambiar algun parametro
  
  
  Bueno recordemos algun comando interesante, como w o who para ver quien 
esta  conectado en la maquina
  
  [ddiego@Disidents ddiego]$ w
 18:49:31  up  1:37,  5 users,  load average: 0.03, 0.09, 0.18
 USER     TTY      FROM              LOGIN@   IDLE   JCPU   PCPU  WHAT
 root     :0       -                 5:13pm   ?     0.00s  0.09s  /bin/sh 
/usr/bi root     pts/0    -                 5:13pm  1:35m  0.00s  0.41s  
kdeinit: kwrite root     pts/1    -                 5:13pm  8:29   0.36s  
0.36s  /bin/bash root     pts/2    -                 6:37pm  0.00s  0.41s  
0.01s  telnet localhos ddiego   pts/3    DDiego            6:49pm  0.00s  
0.07s  0.02s  w
   
  + COMO ENTRAR COMO ROOT EN UN SERVIDOR TELNET
  
    Tenemos que editar el archivo /etc/securetty donde aparecen los 
terminales    desde los que puede abrir sesion root 
    
    Tendremos que a├▒adir: 
    pts/3 
    pts/4 
    etc ..., para tantos terminales necesites para root
      
    pts/0 lo usa el entorno
    
    (NOTA: Esto no es muy recomendable a nivel de seguridad, debido a la 
    precariedad del servicio)
    
  
  + Cambiar el puerto del servicio es bien facil, como en los servicios    
  xinetd apuntan al puerto que viene en el archivo /etc/services
  
  solo tendriamos que editar la linea de telnet y cambiar el puerto:
  
  telnet          2311/tcp

  reiniciar el servicio xinetd: service xinetd restart
  luego haz un telnet localhost 2311
  
  
  
.==========================================================================.
|=======~ 7.0.0  TCP-WRAPPERS ~=============================================
|===========================================================================

+ Con esto podremos decidir a quienes dejamos acceder a nuestra maquina y a 
quienes no, para ello usaremos un par de archivos:
 /etc/hosts.allow "para hosts permitidos" y /etc/hosts.deny "para hosts 
dene- gados. (No necesitamos reiniciar el servicio)
 
 En estos archivos se pueden incluir Ips, ips y mascaras , host, dominios
 la variable all es para todos (servidores ) o (hosts)
    
 Un ejemplo claro:
 
 - Denegar acceso a la ip 192.168.0.1 al servicio de telnetd
 
 [ /etc/hosts.deny ]
 
 in.telnetd:192.168.0.1
 
 
 - Para denegarselo a todo el mundo
 
 [ /etc/hosts.deny ]
 
 in.telnetd:ALL
 
 - Deniego a todos y dejo a 192.168.0.5
 
 [ /etc/hosts.allow ]
 
 in.telnetd:192.168.0.5
 
 
 [ /etc/hosts.deny ]
 
 in.telnetd:ALL
 
 
     NOTA: Prevalece permitir, es decir si permitimos a todos y denegamos
     a una ip, esa ip tendria acceso.
     
     
 + Con nombres de hosts
 
   vamos a a├▒adir en /etc/hosts a un equipo proximo para que pueda 
resolverlo   , podemos a├▒adir la linea (NOTA: No borres la 1┬║ linea que 
tienes en tu    /etc/hosts:
   
   192.168.0.4 w3ndig0
   192.168.0.5 S-P-A-R-K
   
   Ahora podremos a├▒adir por nombre
   
   int.telnetd:w3ndig0
       
    
   Dejar a todo el mundo, poner un except en hosts.allow
    
    [ /etc/hosts.allow ]
    
   ALL:ALL
   ALL EXCEPT in.telnetd: w3ndig0
   
   
   
   Dejar paso a todas las maquinas de un dominio y denegar a las de otro 
dominio   
   ALL: .elia.es EXCEPT DDiego.Disidents.org
   
   
  - Existen herramientas para  comprobar la sintaxis de los tcp-wrappers 
como   tcpdchk y tcpdmatch
  
  
   
.==========================================================================.
|=======~ 8.0.0 SERVIDOR SSHD ~=============================================
|===========================================================================
   

 + Es un servidor semegante a telnet pero mas moderno y con la cualidad de 
 que la informacion esta cifrada y comprimida aunque esto ultima es opcional
 ,ssh usa el puerto 22.
 
 
 
  - Archivos de configuracion:
  
   + Cliente ssh:  /etc/ssh/sshd_config
   + Servidor sshd: /etc/ssh/ssh_config
   
   
  - Cuando me conecto por primera vez a un servidor se genera una clave 
  esa clave se genera en el directorio root del usuario /root/.ssh si
  o /home/nombre/.ssh .
  
  En el metodo de autentificacion el servidor tiene una clave privada, y 
  pasa un clave publica al cliente el cliente mira dentro de su directorio 
  el archivo ./ssh/known_hosts haber si ya la tiene, podeis observar que el 
  servidor nos da la opcion de guardar la clave, el cliente encripta con
  la clave publica y el servidor desencripta lo que le manda el cliente
  con la clave privada, como podemos ver en el archivo de configuracion
  /etc/ssh/sshd_config.
  
  ssh puede usar RSA1, RSA y DSA, este ultimo es el que usa ahora
 
    RECUERDA que las claves publicas tienes extension .pub
    
    
  Con ssh-keygen -t tipo_de_algoritmo"DSA,RSA,RSA1" generaremos
  una clave en el directorio del usuario /root/.ssh
  
  1 Te pedira el nombre 
  2 Y una passphrase  "frase de paso, podemos dejar espacios"
  
#ssh-keygen -t  dsa
Generating public/private dsa key pair.
Enter file in which to save the key (/root/.ssh/id_dsa): prueba
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in prueba.
Your public key has been saved in prueba.pub.
The key fingerprint is:
bc:6b:5c:df:b3:98:ee:68:d3:08:b5:7d:4e:14:cc:e8 root@ddiego


 - Se me olvidaba, para especificar un nombre de usuario como cliente
 solo tenemos que poner: ssh -l nombredeusuario ip
 ssh -l nombredeusuario localhost 
 
 Tambien podemos especificar un numero de puerto
 
 ssh -l nombredesusuario ip -p n┬║depuerto
 ssh nombredesuaurio@ip -p n┬║depuerto
 
 + Algunas opciones, cambiar puerto etc
 
  Para ello tenemos que abrir el archivo /etc/ssh/sshd_config, solo veremos 
algunas  opciones
  
  Port 5023 #asi cambiamos a otro puerto el servicio
  
  # HostKey for protocol version 1  <- especifican claves publicas
  #HostKey /etc/ssh/ssh_host_key
  # HostKeys for protocol version 2
  #HostKey /etc/ssh/ssh_host_rsa_key
  #HostKey /etc/ssh/ssh_host_dsa_key
   
  
  PermitRootLogin yes #permite entrar como root con yes
                      # si ponemos no, no dejaria entrar como root
		      
  X11Forwarding yes #permitir conexiones graficas
  
  Compression yes #habilitamos compresion 
  
  
  En ssh_config tambien tenemos que tener con yes PermitRootLogin
  
  
  + Con ssh tambien podemos copiar archivos, con scp
  
   #scp -r root@192.168.0.1:/home/ddiego/* /root/pruebas
   root@192.168.0.1's password:
   XFree86.0.log        100% |*****************************| 32399       
00:00   XFree86.0.log.old    100% |*****************************| 32399      
 00:00   XFree86.1.log        100% |*****************************| 32399     
  00:00   XFree86.1.log.old    100% |*****************************| 29934    
   00:00
   
   
   con esto copiamos de la maquina 192.168.0.1 del directorio /home/ddiego
    a /root/pruebas, entramos como usuario root
    

    + SFTP: Secure FTP
    
    # sftp root@192.168.0.1:/var/log/* /pruebas
   Connecting to 192.168.0.1...
   root@192.168.0.1's password:
   Fetching /var/log/XFree86.0.log to /pruebas/XFree86.0.log
   Fetching /var/log/XFree86.0.log.old to /pruebas/XFree86.0.log.old
   Fetching /var/log/XFree86.1.log to /pruebas/XFree86.1.log
   ...
 
   o directamente
   
   #sftp 192.168.0.1
   
   Funciona mayormente de la misma forma que el ftp solo que usa 
encriptacion   
   
   + CONEXIONES GRAFICAS POR SSH
   
   Podremos conectar con otro equipo en modo grafico, para ello solo 
tendremos   que arrancar un servidor grafico en nuestra propia maquina:
   
   ya sabes Ctrl+Alt+F1
   
   #xinit -- :1 
   
   ahora nos abre una sesion grafica y dentro de ella hacemos un ssh
   #ssh 192.168.0.1
   
   .. entramos como siempre
   
   
   una vez conectados ponemos:
   startkde o gnome-session
   
   y ya vemos su escritorio, sus directorios, sus archivos, esto es una 
opcion muy   interesante ;)
   
   
   
 
.==========================================================================.
|=======~ 9.0.0 SERVIDOR NFS ~==============================================
|===========================================================================

 + NFS - Network File System, con este servidor podremos compartir archivos,
 es muy usado por maquinas unix. Bueno para poder trabajar con este servidor
 tenemos que tener iniciado portmapper. Podeis ir a la consola:
 Podemos usar el programa setup para configurar permanente los servicios, 
entre otras cosas
 
 #setup
 
 Entramos en: System services
 
 le damos a yes, y buscamos nfs y portmap, lo habilitamos y guardamos
 
 run tool y a andar 
 
 
 - La otra opcion, es iniciarlo de forma temporal
 
 
 # service portmap restart
 Parando portmapper:                                        [  OK  ]
 Iniciando portmapper:                                      [  OK  ]

 Reiniciamos nfs
 
 # service nfs restart
 Cerrar NFS mountd:                                         [FALL├ô]
 Cerrar el demonio NFS:                                     [FALL├ô]
 Shutting down NFS quotas:                                  [FALL├ô]
 Apagar los servicios NFS:                                  [  OK  ]
 Inicio de los servicios NFS:                               [  OK  ]
 Starting NFS quotas:                                       [  OK  ]
 Inicializaci├│n del demonio NFS:                            [  OK  ]
 Inicializaci├│n de NFS mountd:                              [  OK  ]

   
 Como podemos observar el portmapper   ya lo tenia encendido, pero nfs no

 
 - Veamos si portmapper y nfs estan arrancados correctamente
 
   #rpcinfo -p
   
       100000    2   tcp    111  portmapper <--
       100000    2   udp    111  portmapper <--
       100024    1   udp  32768  status
       100024    1   tcp  32768  status
       391002    2   tcp  32769  sgi_fam
       100011    1   udp    789  rquotad
       100011    2   udp    789  rquotad
       100011    1   tcp    792  rquotad
       100011    2   tcp    792  rquotad
       100003    2   udp   2049  nfs <--
       100003    3   udp   2049  nfs <--

  
 + Debemos editar /etc/filesystems y a├▒adir nfs:
 
 
 [/etc/filesystems]
  
 ext3
 ext2
 nodev proc
 nodev devpts
 iso9660
 vfat
 hfs
 nfs


 + Configurar el servidor
 
  Editamos el archivo /etc/exports, vemos que esta en blanco ahi es donde 
estan  los directorios exportados, para ver lo que tengo exportado en mi 
maquina   solo tengo que poner showmount -e en la linea de comandos
  Tambien veremos quien esta conectado a esa carpeta que tengo compartida, 
gracias   a showmount
  Con showmount -a vemos quien tiene montado nuestro recurso
  
  + En /etc/exports incluiremos el directoriolocal que queremos compartir o 
exportar  las maquinas a las que les das acceso, y los privilegios que les 
quieres dar.  
  Ruta  maquinas(permisos, opciones)  #asi se incluira la informacion
  
  - como maquinas podemos poner nombres de hosts, ips o si queremos una red 
completa  lo pondriamos asi 192.168.0 o por ej 192.168.3.0, con dominios lo 
mismo pero con *   *.oficina.es  seria para todo el dominio de oficina.es 
por ejemplo la maquina de   pepe.oficina.es
  
  los permisos son: RO "Read only"  -> solo lectura
                    RW "Read /Write"-> lectura y escritura
  
  
 
  + Para que cualquier usuario pueda compartir archivos
  
  Tendria que asignarse en un puerto superior al 1024, porque los puertos
  por debajo del 1024 solo puede hacerse como root 
 
  + Opciones
  
  root_squash    -> el root es tratado como anonimo
  no_root_squash -> root tiene privilegios de superusuario(root puede 
cambiar permisos)  all_squash     -> todos los usuarios son tratados como 
anonimos  squash_uids    -> con esto especificamos que usuarios queremos que 
entren como                    anonimos segun su uid
  squash_uids=0-500 -> especificamos que los usuarios con uid entre 0 y 500 
entren                        como anonimos
  anonuid        -> sea quien sea quien entre entrara con el uid que 
especifiquemos  anongid        ->  sea quien sea quien entre entrara con el 
gid que especifiquemos  sync           -> para que cada vez que escriba algo 
tre lo escriba directamente  
  		   
   Ejemplo basico /etc/exports:
   Voy a compartir una carpeta /pruebas para todos los equipos de mi red 
192.168.1.0,   todos los usuarios seran tratados como anonimos
   
   /pruebas 192.168.1.0(rw,all_squash)
   
   
   - Pero que pasa si quiero que a la ip 192.168.0.2 que es el equipo del
   administrador si le quiero dar privilegios de root.
   
   /pruebas 192.168.1.0(rw,all_squash) 192.168.0.2(rw,root_squash)
   
   + Recuerda que los permisos que especificamos ahi son permisos de red, si 
   el usuario no tiene permisos locales no puede hacer nada.
   
   + Ahora haremos lo mismo pero queremos que cuan192.168.0.2do se conecte 
la maqui-   na disidents el que se conecte tenga los permisos que tenga el 
usuario    500
   
   /pruebas 192.168.1.0(rw,all_squash) 192.168.0.2(rw,root_squash) 
disidents(rw,anonuid,500)  
   
   + Ejemplo real y facil, entre dos maquinas:
   
   - Maquina con ip 192.168.0.1 servidor nfs
   
   Editamos /etc/exports y a├▒adimos
   
   /pruebas 192.168.0.2(rw,no_root_squash)
   
   + guardamos
   
   reiniciamos el servicio 
   
   service nfs restart
   
   o tambien podemos hacer un:
   
   #exportfs -av
   
   con ello exportaremos todo en modo verbose 
   
   
   + hacemos un showmount -e
   
   # showmount -e
   Export list for DDiego:
   /pruebas 192.168.0.2

   
   + Quien tiene montado nuestros recursos?? showmount -a
   
    
   
   - Maquina con ip 192.168.0.2 cliente nfs
   
   + Primero veremos que directorio exporta el servidor 192.168.0.1
   
   # showmount -e 192.168.0.1
    Export list for 192.168.0.1:
    /pruebas 192.168.16.2

   
   + Podemos montarlo de manera temporal con mount, solo tenemos que crear 
   un directorio  crearemos  /mnt/nfs
   
   mount -t nfs 192.168.0.2:/pruebas /mnt/nfs 
   
   
   + Montarlo de forma permanente 

    Para ello tendremos que editar /etc/fstab desde el cliente y a├▒adir
    
    192.168.0.1:/pruebas /mnt/nfs nfs defaults 0 0 

        
   + Para que un usuario normal pueda montarlo
   
   Vemos que si entramos como un usuario sin privilegios de administrador,
   no nos deja montar:
   
    #mount -t nfs 192.168.0.1:/pruebas /home/ddiego/nfs
    mount: s├│lo el usuario root puede efectuar esta acci├│n
   
   Para ello modificaremos el /etc/fstab debe estar de esta manera:
   
    192.168.0.1:/pruebas    /home/ddiego/nfs          nfs     noauto,user 0 
0    
       [server nfs]       [ directorio de montaje]  [tipo]  [aqui podemos 
poner auto para q lo                                                         
   monte de forma automatica]							    
     
    Reiniciamos nfs o tambien podemos usar
    
    							    
   							    							    
    Luego entramos como el usuario, y ponemos:
    
    #mount /home/ddiego/nfs							    
    
    
    
   en exports tambien podemos especificar la mac, p ej si quermoes incluir 
   una red:
   
   Con notacion  CIDR
   
   /pruebas 192.168.5.0/24(rw,sync,all_squash) 
   
   o lo que es lo mismo
   
   /pruebas 192.168.5.0/255.255.255.0(rw,sync,all_squash)
   
  Se que este articulo puede plantear ciertas cuestiones,  fallos ya sean o-
  casionados por la propia maquina ( algun fallo del sistema, o de la insta-
  lacion de los paquetes) o un fallo del propio lector, si surgen  problemas
  de ese tipo no voy a resolver por mail ese tipo de dudas,lo siento pero no 
  tengo mucho tiempo libre, no quiero que nadie se sienta ofendido.
  
  
.==========================================================================.
|=======~ 10.0.0 SERVIDOR SAMBA ~===========================================
|===========================================================================


- SMB: Servidor de bloques de mensajes,con el manejamos el protocolo netbios
  con este servidor podremos poder acceder a recursos compartidos y 
compartir  archivos, impresoras como lo puede hacer cualquier sistema de la 
familia mi-  crosoft, "en teoria", para mi opinion vale mas ahcerlo desde 
windows.  Recordamos que las maquinas en netbios se identifican con 15+1 
caracteres, y  cada caracter son 8 bits, estos nombres no se deben repetir, 
ni se recomienda  poner puntos por medio del nombre, cuando el nombre de 
repite la maquina  tiene conexion ip pero no netbios.

  Cuando en windows te conectas a un grupo de trabajo, y entras en la red tu
  ordenador intenta buscar un visualizador maestro, para ver que maquinas 
estan   en el grupo de trabajo. Segun el sistema que tengas al conectarte el 
propio  sistema opta a ser visualizador, se usa un criterio segun el sistema 
operativo:
  De menos prioridad a mas para ser visualizador

  Windows 98                         - prioridad
  Windows 98SE
  Windows NT
  Windows 2000 professional
  Windows 2000 server
  Windows 2003 server                + prioridad

  Nosotros en linux podemos cambiar el nivel de prioridad para asegurarnos 
  de ser visualizadores, o de no serlos
  Si las dos maqunas son iguales, sera la 1┬║ quien conecte la que hara de  
  visualizador maestro "MASTER BROWSER"
  
  El visualizador maestro "MASTER BROWSER",puede llegar a tardar como mucho
  45 minutos, para que desaparezca un equipo.

  Existen herramientas para el modo grafico por ejemplo  swat, pero nosotros 
  vamos a hacerlo en modo texto

  + Servidor Wins "Windows internet naming service", se ideo debido a que 
  netbios usa difusion para registrarse y conectarse, esto sobrecarga mucho 
  la red. Este servidor wins lo que hace es crear una base de datos de todas 
  las maquinas que estan conectadas en una red, wins convierte el nombre 
  netbios en una ip.
  
  +Cuando tenemos configurado el servidor wins 
  
  1┬║ Se consulta por wins, si no responde se consulta por difusion (salvo
 que como veremos mas adelante tengamos dns proxy=yes) que la resolucion
 se haria por dns
 
 - En ausencia del servidor wins se puede usar lmhosts ,que es un archivo
  de resolucion local /etc/samba/lmhosts
 
  Su formato sera asi:
  
  ip nombrenetbios
  
  192.168.0.1 DDiego
  
  

  
   
  + En netbios no hay ninguna jerarquia, como puede haber en dns

  
  
  
  + Iniciando el servidor:
  
   Bueno ya sabeis: service smb restart o vais a system services, debeis 
   saber que si mirais los procesos os tiene que salir smbd y nmbd
   
   #ps -A 
   
   . . . 
   
   2919 ?        00:00:00 smbd
   2923 ?        00:00:00 nmbd
   2924 ?        00:00:00 nmbd

  Esta OK   
  
  
  
  + Archivo de configuracion:  /etc/samba/smb.conf
  
  [global]
  
  # mi nombre netbios en la red sera DDiego
  netbios name = DDiego 
  
  # mi grupo de trabajo 
  workgroup = Disidents
  
  #Comentario
  server string = Servidor samba de DDiego
  
  #Solo dejamos paso a los servidores que empiezan por 192.168.1 192.168.2
  # 127 es decir al tu pc, esto es interesante si queremos solo compartir
  #con equipos de nuestra red
  hosts allow = 192.168.1. 192.168.2. 127.
  host deny = 192.168.2.100
  
  #Impresoras
  printcap name = /etc/printcap #Fichero del dispositivo que llama a la 
impresora, "device"  load printers = yes #con yes aparecerean impresoras en 
windows en el entorno de red  printing = cups #"common unix print system" o 
lo que es lo mismo sistema de impresion                  #comun para unixes. 
tambien hay bsd, sysv, plp, lprng, aix, hpux, qnx, cups                  
#con esto activamos el servidor de impresion    
  #Para usar la cuenta de invitado, es decir compartir a todo el mundo
  guest account = nobody #debes tener nobody en /etc/passwd
  
  #Logs de samba
  log file = /var/log/samba/%m.log #%m es el nombre de la maquina que 
intenta acceder  max log size = 0 # Kb maximos de lo log
  
  #Nivel de seguridad
  security = user # cada usuario se validara con su pass,hablamos con un 
cliente                  # microsoft windows 98,podemos especificar a cada 
usuario              server #delegamos la validacion a otro servidor
	    domain #lo validara un controlador primario del dominio, el PDC
  
  
  #Para seleccionar quien va a ser el servidor que validara sera con:
  ;   security = server
  ;   password server = 192.168.0.1 #esa ip sera del server que validara al 
usuario                                    #que intente conectar
				    
#Podemos especificar el numero de de caracteres en mayuscula que como maximo 
puede #tener el nombre de usuario o la clave, si quieres que no haya 
dirferencias entre #minusculas y mayuscula dejalo como esta
;  password level = 8
;  username level = 8
				   
encrypt passwords = yes #encriptacion, activalo
smb passwd file = /etc/samba/smbpasswd #fichero de passwords de samba

#Cerfificado, si usas samba con SSL con el que solo aceptara conexiones de 
clientes #con un certificado valido
;   ssl CA certFile = /usr/share/ssl/certs/ca-bundle.crt	


unix password sync = Yes #sincroniza las claves unix con las de samba
passwd program = /usr/bin/passwd %u #programa de pass
passwd chat = *New*password* %n\n *Retype*new*password* %n\n 
*passwd:*all*authentication*tokens*updated*successfully*

pam password change = yes# usamos autentificacion a traves de PAM
                         # 
http://www.tau.org.ar/base/computacion/gsal-19991128-htm/pam.htm			 
;  username map = /etc/samba/smbusers #puedes crear y utilizar otro archivo 
de usuarios                                      
# Using the following line enables you to customise your configuration
# on a per machine basis. The %m gets replaced with the netbios name
# of the machine that is connecting

;   include = /etc/samba/smb.conf.%m
  
# This parameter will control whether or not Samba should obey PAM's
# account and session management directives. The default behavior is
# to use PAM for clear text authentication only and to ignore any
# account or session management. Note that Samba always ignores PAM
# for authentication in the case of encrypt passwords = yes
  
  obey pam restrictions = yes

  
# Most people will find that this option gives better performance.
# See speed.txt and the manual pages for details
   socket options = TCP_NODELAY SO_RCVBUF=8192 SO_SNDBUF=8192

   # Configure Samba to use multiple interfaces
# If you have multiple network interfaces then you must list them
# here. See the man page for details.
#Ahora podremos especificar si estamos conectados a mas de una red
   ;   interfaces = 192.168.12.2/24 192.168.13.2/24   
    
# Configure remote browse list synchronisation here
#  request announcement to, or browse list sync from:
#	a specific host or from / to a whole subnet (see below)
;   remote browse sync = 192.168.3.25 192.168.5.255
# Cause this host to announce itself to local subnets here
;   remote announce = 192.168.1.255 192.168.2.44


#Llegamos a una parte interesante, en la que nos podemos hacer visualizador
#maestro del dominio 

local master = yes #con esto aceptariamos  ser visualizador maestro local

os level = 64 #si lo ponemos mas alto tendremos mas posibilidades de ser
              #master browser, en la eleccion

preferred master = yes #forzamos a ser master browser	
         

domain master = yes #visualizador maestro del dominio domain master browser

#Ahora nos haremos controladores de dominio, en nt si eres controlador de 
#dominio tambien eres master browser, sinembargo en samba pueden ser 
maquinas #distintas, existe un visualizador maestro por cada dominio que hay

domain logons = yes #y con esto a yes ya somos PDC "controlador primario de 
dominio"

# run a specific logon batch file per workstation (machine)
;   logon script = %m.bat
# run a specific logon batch file per username
;   logon script = %U.bat

# Where to store roving profiles (only for Win95 and WinNT)
#        %L substitutes for this servers netbios name, %U is username
#        You must uncomment the [Profiles] share below
;   logon path = \\%L\Profiles\%U

#Esto anterior ya lo veremos, con ello podemos ejecutar un script cada vez
#que una maquina se conecta al dominio


	      
#Ahora vamos a ver como se configura la parte de WINS, recordemos 
#que servia para la resolucion de nombres.

# Windows Internet Name Serving Support Section:
# WINS Support - Llama al nmbd para habilitar el servidor wins, es decir
#con esta opcion a yes nos hacemos servidor wins
   
   wins support = yes
   
#Igual no queremos ser servidor wins, sino que clientes, para ello:

;   wins server = w.x.y.z #donde w x y z es la ip del servidor 
                          #por ejemplo 192.168.0.1
			  
			  
   dns proxy = no # Si esta a yes, intenta resolver dns cuando no hay 
servidor wins	   
   #El order de resolucion es:
    
    1┬║ wins
    2┬║ si wins proxy = yes , pues por DNS
    3┬║ por difusion		  
   
   #Se puede establecer un orden el el fichero smb.conf de resolucion, 
mediante:   
   name resolve order = wins lmhosts hosts bcast #especificamos el order de 
busqueda   
  
  
# Case Preservation can be handy - system default is _no_
# NOTE: These can be set on a per share basis
;  preserve case = no
;  short preserve case = no
# Default case is normally upper case for all DOS files
;  default case = lower
# Be very careful with case sensitivity - it can break things!
;  case sensitive = no #dejemos esto a no pq ya sabemos que windows no 
distinge                        #mayusculas de minusculas
		       
		       
#============================ Share Definitions 
==============================		          #Esta es la parte donde vamos a 
compartir los recursos	    
# home la carpeta de los usuarios
[homes]
   comment = Home Directories
   browseable = no
   writable = yes #permiso de escritura
   valid users = %S #usuarios validos "los usuarios samba"
   create mode = 0764 #con esto establecemos permisos, los propietarios
                      #tienen permisos de lectura,escritura y ejecucion
   directory mode = 0775 #lo mismo pero para directorios
   
   
 + Para la version 3 a├▒adir en [global]
  passdb backend = smbpasswd  
   

+ Como convertir una m├íquina en controlador de dominio y conectarse desde 
  clientes con Windows 2000 al dominio.
  
  Primero editamos smb.conf 
  
  
  El [global] tengo que tener varias cosas:
  
local master = yes
domain master = yes
os level = 200
preferred master = yes
domain logons = yes
#nos haremos servidor wins
wins support = yes
  
Ahora iremos al terminal:

# nmblookup -A 192.168.0.1
Looking up status of 192.168.0.1
        PORTATILD       <00> -         M &lt;ACTIVE>
        PORTATILD       <03> -         M &lt;ACTIVE>
        GRUPO_TRABAJO   <00> - &lt;GROUP> M &lt;ACTIVE>
        DDIEGO          <03> -         M &lt;ACTIVE>
        PORTATILD       <20> -         M &lt;ACTIVE>
        GRUPO_TRABAJO   <1e> - &lt;GROUP> M &lt;ACTIVE>
        GRUPO_TRABAJO   <1d> -         M &lt;ACTIVE>
        ..__MSBROWSE__. <01> - &lt;GROUP> M &lt;ACTIVE>

Vemos como se llama la maquina PORTATILD

Tenemos que a├▒adirla:

# useradd portatild$ -s /bin/false -d /dev/null
# passwd portatild$

# smbpasswd -a -m portatild$

  

 COMANDOS DE CLIENTE:
 
 - Para saber quien es el viualizador maestro: Master Browser
 nmblookup -M -
 nmblookup -M -- - <- En samba 3
 nmblookup -M nombre
 nmblookup -S ip
 
# nmblookup -A 192.168.0.2
Looking up status of 192.168.0.2
        DDIEGO          <00> -         M &lt;ACTIVE>
        DDIEGO          <03> -         M &lt;ACTIVE>
        DDIEGO          <20> -         M &lt;ACTIVE>
        DISIDENTS       <00> - &lt;GROUP> M &lt;ACTIVE>
        DISIDENTS       <1b> -         M &lt;ACTIVE>
        DISIDENTS       <1c> - &lt;GROUP> M &lt;ACTIVE>
        DISIDENTS       <1e> - &lt;GROUP> M &lt;ACTIVE> 
 
	
# nmblookup -A 192.168.0.2
Looking up status of 192.168.0.2
        DDIEGO          <00> -         M &lt;ACTIVE>
        DDIEGO          <03> -         M &lt;ACTIVE>
        DDIEGO          <20> -         M &lt;ACTIVE>
        ..__MSBROWSE__. <01> - &lt;GROUP> M &lt;ACTIVE> <-- es msbrowser
        DISIDENTS       <00> - &lt;GROUP> M &lt;ACTIVE>
        DISIDENTS       <1b> -         M &lt;ACTIVE><-- Es Visualizador maestro 
de dominio        DISIDENTS       <1c> - &lt;GROUP> M &lt;ACTIVE>
        DISIDENTS       <1d> -         M &lt;ACTIVE> <-- Visualizador maestro 
local        DISIDENTS       <1e> - &lt;GROUP> M &lt;ACTIVE>

	
- Ver los rescuros compartidos
	
# smbclient -L DDiego
added interface ip=192.168.0.2 bcast=192.168.0.255 nmask=255.255.255.0
Password:
Domain=[DISIDENTS] OS=[Unix] Server=[Samba 2.2.7a]

        Sharename      Type      Comment
        ---------      ----      -------
        myshare        Disk      Mary's and Fred's stuff
        IPC$           IPC       IPC Service (Servidor samba)
        ADMIN$         Disk      IPC Service (Servidor samba)
        root           Disk      Home Directories

        Server               Comment
        ---------            -------
        DDIEGO               Servidor samba

        Workgroup            Master
        ---------            -------
        DISIDENTS            DDIEGO
	
	
+ Montarlos como root:
# smbmount //DDiego/myshare /mnt/samba
Password:


+ Entrar como si fuera un ftp:

$ smbclient  //192.168.0.2/usuarios_samba -U s1
added interface ip=192.168.0.2 bcast=192.168.0.255 nmask=255.255.255.0
Password:
Domain=[DISIDENTS] OS=[Unix] Server=[Samba 2.2.7a]


+ Carpetas compartidas

SHARE DEFINITIONS definimos los recursos compartidos.
El primer recurso compartido que vemos es HOMES, que se utiliza para sino
se encuentra el recurso la m├íquina SAMBA lleva a la carpeta del usuario 
que coincide con el nombre con el que me valide, eso si existe.
VALID USERS, nombre de los usuarios SAMBA.
WRITEABLE, permiso de escritura.
CREATE MODE y DIRECTORY MODE son las mascaras de creaci├│n de archivos 
y directorios, los permisos que se asignan por defecto.
BROWSEABLE es para que el recurso sea visible, si ponemos no ser un 
recurso oculto, tendremos que saber la ruta para acceder a el.
Public = yes acceso public	
Guest OK = yes Aceptamos invitados, esta junto a public = yes hace que 
permitamos  acceso a un recurso  sin requerir contrase├▒a,como invitado	
	

+ Seguridad samba, creaccion de usuarios etc

1┬║ tenemos que crear los usuarios en linux, y que figuren en el /etc/passwd
supongo que todos ya sabemos.

groupadd usuarios_samba  <- creamos el grupo usuarios_samba, podemos mirar
                            dentro del archivo /etc/groupsi ha creado 
			    correctamente el grupo
useradd s1 ΓÇôg usuarios_samba <- a├▒adimos el usuario s1 con el grupo 
usuarios_sambauseradd s2 ΓÇôg usuarios_samba <- a├▒adimos el usuario s2 con el 
grupo usuarios_sambasmbpasswd ΓÇôa s1 <- a├▒adimos el usuario s1 a samba  
/etc/samba/smbpasswdsmbpasswd ΓÇôa s1 <- a├▒adimos el usuario s2 a samba  
/etc/samba/smbpasswd 
NOTA: Es interesante que si creamos los usuarios en unix, no les hagamos una 
cuentanormal para ello podemos ponerle como directorio /dev/null y como 
shell /bin/falsese puede hacer directamente editando el /etc/passwd pero 
nosotros somos muy finoslo hacemos una vez creamos el usuario:
# useradd  s1  -g  usuarios_samba -s  /bin/false  -d  /dev/null

Editando /etc/passwd quedaria asi:

s1:x:501:502::/home/s1:/bin/bash <- esto lo cambiariamos por: 
s1:x:501:502::/dev/null:/bin/false <- asi me gusta mas


2┬║) Creamos los usuarios en SAMBA:
smbadduser s1:s1   #donde el 1┬║ s1 es el usuario en linux y el 2┬║ el nombre
                   #de usuario en samba
smbadduser s2:s2


  
+ La gran pregunta: Como hacer para que un usuario normal pueda montar un
recurso samba remoto???

Editando /etc/fstab y a├▒adimos dos l├¡neas:
//192.168.0.1/usuariosamba   /home/s1/samba   smbfs   noauto,user   0 0
//192.168.0.1/usuariosamba   /home/s2/samba   smbfs   noauto,user   0 0

Esas carpetas en el servidor tienen que tener permisos, favorables para sus 
usuarios y ser el due├▒o de las carpetas, para ello ponermos como root: en el 
servidor 

chown  s1:usuarios_samba /mnt/usuariosamba/

Tenemos que darle el bit de suid 4755 a smbmnt para poder montarlo como 
usuarios normales vemos lo que nos devuelve si intentamos montarlo como 
un usuario sin provilegios de root

$ smbmount //192.168.0.2/usuarios_samba /mnt/usuariosamba
Password:
smbmnt must be installed suid root for direct user mounts (501,501)
smbmnt failed: 1

Debes poner suid root a smbmnt


#chmod 4755 /usr/bin/smbmnt 


Ahora si te deha montarla.



+ El servidor debe tener :
[usuarios_samba]
comment = solo para vosotros
path = /mnt/usuariosamba
valid users = s1 s2
public = yes


y browseable = yes si quiere que este visible

+ RECUERDA:

- Pueder ser visualizador maestro local, con solo poner en globals:
 
 # Browsing election options
  os level = 34
  local master = yes



- Para ser visualizador maestro de dominio a├▒adimos:

domain master = yes
prefered master =yes  #queremos serlo preferentemente


- Para ser controlador de dominio, los que validemos PDC:

domain logons = yes


+ Conseguir que nuestra m├íquina sea MASTER BROWSER.


local master = yes #con esto aceptariamos  ser visualizador maestro local

os level = 64 #si lo ponemos mas alto tendremos mas posibilidades de ser
              #master browser, en la eleccion

preferred master = yes #forzamos a ser master browser	
         

domain master = yes #visualizador maestro del dominio domain master browser

#Ahora nos haremos controladores de dominio, en nt si eres controlador de 
#dominio tambien eres master browser, sinembargo en samba pueden ser 
maquinas #distintas, existe un visualizador maestro por cada dominio que hay

domain logons = yes #y con esto a yes ya somos PDC "controlador primario de 
dominio"
  
+ CONVERTIR LA MAQUINA EN NODO HIBRIDO - Es obtativo para ser PDC

Servidor wins:

wins support = yes
   
#Igual no queremos ser servidor wins, sino que clientes, para ello:

;   wins server = w.x.y.


+ Convertir una m├íquina en controlador de dominio y conectarse desde 
clientes con Windows 2000 al dominio

en /etc/samba/smb.conf

[globals]

local master = yes
domain master = yes
os level = 200
preferred master = yes
domain logons = yes
#nos haremos servidor wins
wins support = yes

#puedes poner orden de resolucion 
;name resolve order = wins lmhosts hosts bcast
#para que guarde el perfil
logon path = \\%N\%U\profile <-- si queremos q puedan guardar en el server 
su perfil
2) adduser pc-117$ <-- Los nombres de maquina deben tener un $ delante
Vi /etc/passwd ; /dev/null ; /bin/false
o mas fino
useradd pc-117$ -s  /bin/false  -d  /dev/null
smbpasswd -m -a pc-117
3) smbpasswd  ΓÇôm root
4) En las propiedades de la conexi├│n de red especificar
 en wins la ip del servidor. 
Conectar desde Windows 2000┬á:
Conectarte a dominio: -< El nombre del dominio es el que especificas como
workgroup
root
contrase├▒a


En /home/nombre_del_usuario se crea una carpeta PROFILE cuando el usuario 
inicia sesi├│n por primera vez en el dominio. Aqu├¡ se almacena el perfil del 
usuario.Es decir la carpeta donde contiene todos los elementos del 
escritorio, mis documentosetc... de cada usuario.


+ Como hacer un script que se ejecute cada vez que un usuario inicia sesion
en nuestro dominio:

1┬║ creamos la carpeta /netlogon
2┬║ dentro creamos el bat prueba.bat
y depues a├▒adimos el recurso [netlogon]

Solo tenemos que a├▒adir:


        logon script = prueba.bat
	logon path = \\%N\%U\profile 
	[netlogon]
	path = /netlogon




+ Quedaria asi:

[global]
	workgroup = Grupo_trabajo
	server string = Samba Server
	password server = &lt;NT-Server-Name>
	passwd program = /usr/bin/passwd %u
	passwd chat = *New*UNIX*password* %n\n *ReType*new*UNIX*password* %n\n 
*passwd:*all*authentication*tokens*updated*successfully*	username map = 
/etc/samba/smbusers	unix password sync = Yes
	log file = /var/log/samba/log.%m
	max log size = 50
	socket options = TCP_NODELAY SO_RCVBUF=8192 SO_SNDBUF=8192
	domain logons = Yes
	os level = 255
	preferred master = Yes
	domain master = Yes
	dns proxy = No
	wins support = Yes
        logon script = pruebas.bat
	logon path = \\%N\%U\profile #para q sepa donde guardar el perfil
	[netlogon]
	path = /netlogon

[homes]
	comment = Home Directories
	read only = No #pueden leer y escribir en home
	browseable = No
	writable = yes


+ Ahora personalizado para cada usuario:
1┬║ borra netlogon.bat

 -Creariamos personaliza.bat
echo tu eres %1 <-- asi podemos usar argumentos
pause


       logon script = personalizado.bat %U
	logon path = \\%N\%U\profile

[netlogon]
	path = /netlogon
	

	
+ VALIDACION DE USUARIOS A TRAVES DE OTRA MAQUINA:

En smb.conf globals a├▒adimos:
security = SERVER
password server = nombre_del_equipo_que_valida

Si se pone DOMAIN el que sea PDC tiene que ser una m├íquina NT SERVER.

+ DEBUGEAR SAMBA:

Con esto podremos  ver donde esta el fallo en SAMBA, podemos modificar 
el nivel de debugeo, los niveles van de 0 a 10  "por defecto es 0".

Lo vamos a poner en 3.

Lo cambiaremos con la orden SMBCONTROL:
smbcontrol ΓÇôi <- modo interactivo 

Vamos a definir el nivel de depuraci├│n con los demonios que utiliza el 
servidor.Este nivel que pongamos solo es valido mientras que este arrancado 
SAMBA, si se reinicia se queda como esta por defecto, a 0.

smbcontrol > nmbd debug 3 "lo hacemos tambi├⌐n con smbd".

Los archivos log se encuentran en  /var/log/samba/nombre_maquina_que_accedio

Para salir  q.		

Tambien podemos chequear samba con la herramienta testparm, aunque no sirve 
de mucho


.==========================================================================.
|=======~ 11.0.0 SERVIDOR DNS ~=============================================
|===========================================================================



NOTA ANTES DE EMPEZAR: Si no te funcionan las cosas que veamos revisa tu 
cortafuegos, o desactivalo ┬╖"service iptables stop", mas adelante veremos 
como funciona, y recuerda tambien borrar la cache "rndc flush" porque te 
puede dar malas pasadas.

La funcion de dns es traducir nombres por ips y a la inversa, se diferencia
de netbios entre otra cosas por eso, por su estructura jerarquizada.

Tenemos que tener claro el concepto de FQDN, son nombres de dominio 
completa-mente cualificados.

PQDN ->   PC-215.disidents.org

org es un domino de nivel superior, disidents es un subdominio y  215 es 
el nombre de una maquina que esta en ese subdominio.A cada seccion de PQDN
se llama zona.

Cuando un equipo quiere resolver un nombre, primero mira en el archivo
/etc/host.conf este archivo puede tener esta estructura:

order hosts,bind       <--- primer caso

Como vemos el orden de resolucion de un nombre es primero por el fichero 
/etc/hosts y segundo por dns, si quisiesemos cambiar el orden simplemente
pondriamos order bind,hosts


Bueno vamos a suponer el "primer caso", entonces si hiciesemos un ping
primero nos resolveria por la cache, luego miraria en /etc/hosts, y si 
no lo encuentra preguntgaria al servidor dns,el cliente mirara en 
/etc/resolv.conf a ver a que servidor dns tiene que preguntar, recordemos 
que dns usa el puerto 53, si este servidor encuentra esa maquina por la 
que preguntas en su base de datos, te dara una respuesta autoritativa, 
si no lo esta te  puede contestar que en su dominio no esta,
pero puede estar en otro,  esto no suele pasar porque los servidores suele 
estar en modo recursivo, entonces ellos se encargan de la resolucion, ira 
subiendo niveles. Si esta en modo iterativo el propio cliente al recibir
la respuesta que en su dominio no esta tendria que un nivel a otro nivel 
hasta que lo pueda resolver.


Cada servidor tiene que conocer su inmediato superior y si no es asi a
los servidores dns raiz "root servers" .com .org .es

Bueno primero debemos saber configurar el archivo de configuracion del 
cliente:
 
 [/etc/resolv.conf]
 
 nameserver 192.168.0.2
 nameserver xx.xx.xx.xx
 
 
 El primer name server es mi ip, porque yo voy a montar un servidor dns
 y voy a resolver los nombres de mi propia red
 El segundo nameserver , sera tu dns asi puedes tener internet, mientras 
 lees este articulo.
 + Se pueden poner hasta 3 nameserver
 
 Hay mas clausulas que se pueden incluir
 
 domain disidents.org
 
 Con esta clausula nos ahorrariamos poner disidents.org, es decir si el
 nombre completamente cualificado es DDiego.disidents.org, con poner DDiego 
 ya nos lo a├▒adiria lo que falta

search  disidents.org telecable.es .es .org

Con esto nos permite hacer busquedas en varias zonas


/etc/resolv.conf , este archivo nos describe las configuraziones de las 
de un servidor, una zona es un dominio o dominios sobre los que gobierna
un servidor

vamos el contenido de /etc/resolv.conf

// generated by named-bootconf.pl

options {
	directory "/var/named"; /*Este es el directorio donde estan los archivos 
	   zona y archivos de cache
	
	/*                       
	 * If there is a firewall between you and nameservers you want
	 * to talk to, you might need to uncomment the query-source
	 * directive below.  Previous versions of BIND always asked
	 * questions using port 53, but BIND 8.1 uses an unprivileged
	 * port by default.
	 */
	// query-source address * port 53;
};

// 
// a caching only nameserver config
// 
/*Ahora definimos la red sobre la que se permiten respuestas sobre 
localhost*/controls {
	inet 127.0.0.1 allow { localhost; } keys { rndckey; };
};                                                            
/*Se describe la zona punto, la zona root,aqui describimos los servidores 
nombre raiz del mundo*/
zone "." IN {
	type hint;
	file "named.ca"; 
};
/*Describimos la zona del bucle local*/
zone "localhost" IN {
	type master; /*Tipo de zona: maestra*/
	file "localhost.zone";/*Archivo de zona que se encuentra dentro de  
/var/named/ */	allow-update { none; };/*Permiso de actualizacion dinamica, 
esta zona es estatica*/};

zone "0.0.127.in-addr.arpa" IN { /*Archivo de resolucion inversa del bucle 
local*/	type master;
	file "named.local";
	allow-update { none; };
};

include "/etc/rndc.key";/*Posibilidad de usar una suma de comprobacion, para 
mayor seguridad*/

Veamos un archivo de zona, por ejemplo localhost.zone

$TTL	86400 <- tiempo de vida del registro de esta zona
$ORIGIN localhost.  <- nombre de la zona
@			1D IN SOA	@ root (
					42		; serial (d. adams)
					3H		; refresh
					15M		; retry
					1W		; expiry
					1D )		; minimum

			1D IN NS	@
			1D IN A		127.0.0.1 -> IN A especifica la ip a la 
			                            que se le asignara el nombre

						    
+ valores:

 IN A ip  ->  Especificamos la ip que se le asignara al nombre
 IN NS ip ->  Especificaremos los servidores dns para una zona en particular	
					    IN PTR FQDM -> Lo utilizaremos en los archivos de resolucion 
inversa, tendremos                que especificar el nombre de dominio 
completamente cualificado,		a poder ser acabando en un punto, que acabe en 
punto ahce entender		que no se a├▒ade mas a ese nombre, esto trae menos 
problemas, por si		tienes una clausula domain en resolv.conf
 CNAME -> para usar un alias
 IN MX ip ->  Especificaremos servidor de mail "Mail exchange"
Cuandp el servidor DNS no conoce la ip que le han solicitado acude al 
archivo/var/named/named.ca de arriba hacia abajo.

[/var/named/named.ca]
;       This file holds the information on root name servers needed to
;       initialize cache of Internet domain name servers
;       (e.g. reference this file in the "cache  .  &lt;file>"
;       configuration file of BIND domain name servers).
;
;       This file is made available by InterNIC 
;       under anonymous FTP as
;           file                /domain/named.cache
;           on server           FTP.INTERNIC.NET
;
;       last update:    Nov 5, 2002
;       related version of root zone:   2002110501
;
;
; formerly NS.INTERNIC.NET
;
.                        3600000  IN  NS    A.ROOT-SERVERS.NET.
A.ROOT-SERVERS.NET.      3600000      A     198.41.0.4
;
; formerly NS1.ISI.EDU
;
.                        3600000      NS    B.ROOT-SERVERS.NET.
B.ROOT-SERVERS.NET.      3600000      A     128.9.0.107
;
; formerly C.PSI.NET
;
.                        3600000      NS    C.ROOT-SERVERS.NET.
C.ROOT-SERVERS.NET.      3600000      A     192.33.4.12
;
; formerly TERP.UMD.EDU
;
.                        3600000      NS    D.ROOT-SERVERS.NET.
D.ROOT-SERVERS.NET.      3600000      A     128.8.10.90
;
; formerly NS.NASA.GOV
;
.                        3600000      NS    E.ROOT-SERVERS.NET.
E.ROOT-SERVERS.NET.      3600000      A     192.203.230.10
;
; formerly NS.ISC.ORG
;
.                        3600000      NS    F.ROOT-SERVERS.NET.
F.ROOT-SERVERS.NET.      3600000      A     192.5.5.241
;
; formerly NS.NIC.DDN.MIL
;
.                        3600000      NS    G.ROOT-SERVERS.NET.
G.ROOT-SERVERS.NET.      3600000      A     192.112.36.4
;
; formerly AOS.ARL.ARMY.MIL
;
.                        3600000      NS    H.ROOT-SERVERS.NET.
H.ROOT-SERVERS.NET.      3600000      A     128.63.2.53
;
; formerly NIC.NORDU.NET
;
.                        3600000      NS    I.ROOT-SERVERS.NET.
I.ROOT-SERVERS.NET.      3600000      A     192.36.148.17
;
; operated by VeriSign, Inc. 
;
.                        3600000      NS    J.ROOT-SERVERS.NET.
J.ROOT-SERVERS.NET.      3600000      A     192.58.128.30
;
; housed in LINX, operated by RIPE NCC
;
.                        3600000      NS    K.ROOT-SERVERS.NET.
K.ROOT-SERVERS.NET.      3600000      A     193.0.14.129 
;
; operated by IANA
;
.                        3600000      NS    L.ROOT-SERVERS.NET.
L.ROOT-SERVERS.NET.      3600000      A     198.32.64.12
;
; housed in Japan, operated by WIDE
;
.                        3600000      NS    M.ROOT-SERVERS.NET.
M.ROOT-SERVERS.NET.      3600000      A     202.12.27.33
; End of File



+ Una cosa que se me olvidaba, que puede dar problemas al arrancar y parar
el servidor, por lo menos pasa con la version 9.2.1 que es la que viene
por defecto en la Red Hat 9

-Si al parar el servicio
#service named stop

haces un ps -A y esta ahi el proceso named todavia, debes cambiar alguna 
lineaen el archivo /etc/init.d/named

- Primero miramos la version, que tenemos
# named -v
BIND 9.2.1

Vamos al archivo /etc/init.d/named , creamos una copia y despues editamos
el original, vamos a la clausulas:

start() {
        # Start daemons.
	if [ -n "`/sbin/pidof named`" ]; then
		echo -n $"$prog: already running"
		return 1
	fi
        echo -n $"Starting $prog: "
	if [ -n "${ROOTDIR}" -a "x${ROOTDIR}" != "x/" ]; then
		OPTIONS="${OPTIONS} -t ${ROOTDIR}"
	fi
	daemon /usr/sbin/named -u named ${OPTIONS}
	RETVAL=$?
 	[ $RETVAL -eq 0 ] && touch /var/lock/subsys/named 
	echo
	return $RETVAL
}

Antes de return $RETVAL he incluido un echo, antes no lo habia


stop() {
        # Stop daemons.
        echo -n $"Stopping $prog: "
	/usr/sbin/rndc stop
	RETVAL=$?
	[ $RETVAL -eq 0 ] && rm -f /var/lock/subsys/named || {
        	killproc named
		RETVAL=$?
		[ $RETVAL -eq 0 ] && rm -f /var/lock/subsys/named
	}
        echo
	return $RETVAL
}

Tenemos que quitarle solo || { y un } y  dejarla asi:


stop() {
        # Stop daemons.
        echo -n $"Stopping $prog: "
	/usr/sbin/rndc stop
	RETVAL=$?
	[ $RETVAL -eq 0 ] && rm -f /var/lock/subsys/named 
        	killproc named
		RETVAL=$?
		[ $RETVAL -eq 0 ] && rm -f /var/lock/subsys/named
	
        echo
	return $RETVAL
}

Si con todo eso no te funciona pues busca por la red el fallo que te da


+ Vamos a crear el dominio disidents.com, para ello solo tenemos que a├▒adir 
al /etc/named.conf la zona disidents.com que es el nombre de nuestro 
dominio.
Veamos nosotros seriamos el servidor principal, y nuestro named.conf 
incluiria:
zone "disidents.com" IN {
        type master;
        file "disidents.com.zone";
};


y su inversa, que se encuenta en el rango 192.168.0 , se le puede poner 
cualquier otro nombre a el archivo pero esta suele ser la forma habitual
de nombrarlo, vease que es el rango al reves 0.168.192 -> 192.168.0


zone "0.168.192.in-addr.arpa" IN {
        type master;
        file "0.168.192.in-addr.arpa.zone";
};


Nuestra ip sera 192.168.0.2 somos el servidor principal, nuestro 
/etc/resolv.conf seria:

nameserver 192.168.0.2  

Ahora crearemos los archivos de zona y de resolucion inversa en el 
directorio/var/named  disidents.com.zone y 0.168.192.in-addr.arpa.zone

/var/named/disidents.com.zone

$TTL    86400
@       IN      SOA     DDiego.disidents.com. root.localhost  (
                                      1 ; Serial
                                      28800      ; Refresh
                                      14400      ; Retry
                                      3600000    ; Expire
                                      86400 )    ; Minimum
              IN      NS      DDiego.disidents.com.
DDiego.disidents.com. IN A 192.168.0.2
portatil.disidents.com. IN A 192.168.0.1 


y nuestro archivo de resolucion inversa seria:
 
 /var/named/0.168.192.in-addr.arpa.zone 

 $TTL    86400
@       IN      SOA     DDiego.disidents.com. root.localhost  (
                                      2 ; Serial
                                      28800      ; Refresh
                                      14400      ; Retry
                                      3600000    ; Expire
                                      86400 )    ; Minimum
@             IN      NS      DDiego.disidents.com.
2 IN PTR DDiego.disidents.com.
1 IN PTR portatil.disidents.com.


Como vemos ponemos 2 IN PTR DDiego.disidents.com.  de donde sacamos ese 
2 pues porque mi ip es 192.168.0.2

Ahora si hacemos un dig a DDiego.disidents.com. o a portatil.disidents.com.
nos lo resolvera sin problemas, si hacemos un ping lo hara sin problemas.

# dig portatil.disidents.com

; <<>> DiG 9.2.1 <<>> portatil.disidents.com
;; global options:  printcmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 55555
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 1, ADDITIONAL: 1

;; QUESTION SECTION:
;portatil.disidents.com.                IN      A

;; ANSWER SECTION:
portatil.disidents.com. 86400   IN      A       192.168.0.1 <--- aqui vemos 
como resuelve 
;; AUTHORITY SECTION:
disidents.com.          86400   IN      NS      DDiego.disidents.com.

;; ADDITIONAL SECTION:
DDiego.disidents.com.   86400   IN      A       192.168.0.2

;; Query time: 4 msec
;; SERVER: 192.168.0.2#53(192.168.0.2)
;; WHEN: Mon Dec 29 23:46:23 2003
;; MSG SIZE  rcvd: 93

# ping portatil.disidents.com
PING portatil.disidents.com (192.168.0.1) 56(84) bytes of data.
64 bytes from portatil.disidents.com (192.168.0.1): icmp_seq=1 ttl=64 
time=0.301 ms64 bytes from portatil.disidents.com (192.168.0.1): icmp_seq=2 
ttl=64 time=0.329 ms64 bytes from portatil.disidents.com (192.168.0.1): 
icmp_seq=3 ttl=64 time=0.347 ms

gooddddddddddddddd

Pero ahora imaginemos otra cosa, porque somos muy imaginativos, imaginemos 
que queremos crear un subdominio dentro de disidents.com. por ejemplo el 
subdominioc0d3x, seria algo asi c0d3x.disidents.com y el servidor dns de ese 
subdominio seriami portatil, es decir portatil.c0d3x.disidents.com y este 
tendra como cliente al ordenador de mi madre "es un caso real" jajaja, 
tendremos que resolver desde el ordenador de mi madre, a 
DDiego.disidents.com.

                   DDiego.disidents.com. (dominio principal) dominio 
disidents.com		            |			    |
			   /  
                         portatil.c0d3x.disidents.com. (subdominio -> 
c0d3x.disidents.com 			  |			  /
			 cliente (pc de mi madre) cliente.c0d3x.disidents.com.
			 
			
			   
Veamos, ahora situemonos en la 192.168.0.2 DDiego.disidents.com servidor 
principal
Si  portatil.c0d3x.disidents.com. es un nameserver es decir un servidor dns 
deberiamos hacer referencia a el, para ello editaremos nuestro archivo de 
zona de antes y cambiaremos ciertos parametros:
/var/named/disidents.com.zone


$TTL    86400
@       IN      SOA     DDiego.disidents.com. root.localhost  (
                                      1 ; Serial
                                      28800      ; Refresh
                                      14400      ; Retry
                                      3600000    ; Expire
                                      86400 )    ; Minimum
                        IN NS      DDiego.disidents.com.
c0d3x.disidents.com.    IN NS     portatil.c0d3x.disidents.com.
DDiego.disidents.com.   IN A 192.168.0.2
portatil.c0d3x.disidents.com. IN A 192.168.0.1


Su archivo de resolucion inversa tambien cambiara

/var/named/0.168.192.in-addr.arpa.zone
$TTL    86400
@       IN      SOA     DDiego.disidents.com. root.localhost  (
                                      2 ; Serial
                                      28800      ; Refresh
                                      14400      ; Retry
                                      3600000    ; Expire
                                      86400 )    ; Minimum
@             IN      NS      DDiego.disidents.com.
c0d3x@        IN      NS      portatil.c0d3x.disidents.com.
2 IN PTR DDiego.disidents.com.
1 IN PTR portatil.c0d3x.disidents.com.


o podriamos ponerlo de otra forma


podriamos poner en vez de:

c0d3x@  IN NS     portatil.c0d3x.disidents.com.

c0d3x.disidents.com. IN NS     portatil.c0d3x.disidents.com.


- CONFIGURACION DEL SUBDOMINIO c0d3x.disidents.com. 192.168.0.1 
portatil.c0d3x.disidents.com.

[/etc/resolv.conf]

nameserver 192.168.0.1


Pondremos al 192.168.0.2 DDiego.disidents.com. como forwarder con esto si 
nosotrosno podemos resolver la peticion la mandaremos al servidor o los 
servidores que tengamos como forwarders

[/etc/named.conf]



options {
        directory "/var/named";
        forwarders { 
	              192.168.0.2;   #este es DDiego.disidents.com.
		      192.168.1.1;  #este es uno que a├▒adi yo por el morro
		                   #podemos a├▒adir varios y intentara
				   #resolver segun el orden 
		   };
};

controls {
        inet 127.0.0.1 allow { localhost; } keys { rndckey; };
};
zone "." IN {
        type hint;
        file "named.ca";
};

zone "localhost" IN {
        type master;
        file "localhost.zone";
        allow-update { none; };
};

zone "0.0.127.in-addr.arpa" IN {
        type master;
        file "named.local";
        allow-update { none; };
};

#Ahora crearemos la zona  de nuestro subdominio c0d3x.disidents.com y
#su inversa

zone "c0d3x.disidents.com" {
        type master;
        file "c0d3x.disidents.com.zone";
       };
zone "0.168.192.in-addr.arpa" {
       type master;
       file "0.168.192.in-addr.arpa.zone";
      };
include "/etc/rndc.key";


NOTA: Podriamos crear la zona forwarder asi
zone "disidents.com" {
       type forwarders {
                        192.168.0.2;
			}
	              }		

Otra forma de hacer lo mismo: En los subdominios en vez de poner FORWARDERS 
editamos el archivo NAMED.CA ( en /var/named/ ) y a├▒adimos en cada fichero 
de cada servidor del subdominio la IP del servidor principal, antes de los 
servidores ra├¡z. 
En el /etc/named.ca a├▒adiriamis una linea 
                          3600000          IN         NS           
DDiego.disidents.com.DDiego.disidents.com.     3600000          IN         A 
            192.168.0.2		      
		      			
O podriamos crear una zona esclava que delegaria las peticiones, y haria
de pasarela directamente


zone  ΓÇ£disidents.comΓÇ¥ {
           type slave;
           file ΓÇ£disidents.com.zoneΓÇ¥;
           masters {
                         192.168.0.2;
                         };
};

Ahora reiniciamos el servicio
# service named reload
Cargando named:                                            [  OK  ]
[root@localhost named]# ls
0.168.192.in-addr.arpa.zone  disidents.com.zone  named.ca
c0d3x.disidents.com.zone     localhost.zone      named.local


Biennnnn, vemos como tenemos el archivo de zona de disidents.com xDD, 
divertidoehh

[/var/named/c0d3x.disidents.com.zone]


$TTL 86400
@         IN      SOA     portatil.c0d3x.disidents.com. root.localhost  (
                                      1 ; Serial
                                      28800      ; Refresh
                                      14400      ; Retry
                                      3600000    ; Expire
                                      86400 )    ; Minimum
                        IN NS     portatil.c0d3x.disidents.com.

portatil.c0d3x.disidents.com. IN A 192.168.0.1
cliente.c0d3x.disidents.com.     IN A 192.168.0.3
~
~

[/var/named/0.168.192.in-addr.arpa.zone]

$TTL 86400
@ IN      SOA     portatil.c0d3x.disidents.com. root.localhost  (
                                      2 ; Serial
                                      28800      ; Refresh
                                      14400      ; Retry
                                      3600000    ; Expire
                                      86400 )    ; Minimum
@           IN      NS      portatil.c0d3x.disidents.com.
1 IN PTR portatil.c0d3x.disidents.com.
3 IN PTR cliente.c0d3x.disidents.com.

~
Ahora veamos desde el cliente, es un windows xp bueno supongo que todos 
sabemos configurar la red ya en windows, y en linux como cliente solo
habria que editar /etc/resolv.conf y poner como nameserver a 192.168.0.1


Veamos las respuestas desde nuestro windows:

Microsoft Windows XP [Versin Disidents]
(C) Copyright 1985-2001 Microsoft Corp.

>nslookup www.terra.es
Servidor:  UnKnown
Address:  192.168.0.1

Respuesta no autoritativa:
Nombre:  www.terra.es
Address:  213.4.130.210


>nslookup portatil.c0d3x.disidents.com
Servidor:  UnKnown
Address:  192.168.0.1

Nombre:  portatil.c0d3x.disidents.com
Address:  192.168.0.1


>nslookup cliente.c0d3x.disidents.com
Servidor:  UnKnown
Address:  192.168.0.1

Nombre:  cliente.c0d3x.disidents.com
Address:  192.168.0.3


>nslookup DDiego.disidents.com
Servidor:  UnKnown
Address:  192.168.0.1

Respuesta no autoritativa:
Nombre:  DDiego.disidents.com
Address:  192.168.0.2

>nslookup www.terra.es
Servidor:  UnKnown
Address:  192.168.0.1

Respuesta no autoritativa:
Nombre:  www.terra.es
Address:  213.4.130.210


 Como podemos observar todo funciona

+ Comandos interesantes:

+ nslookup
+ dig
-Para resolver un nombre a traves de un servidor dns especifico
dig @192.168.0.2 www.terra.es
Asi resolvemos www.terra.es a traves de DDiego.disidents.com

+ host
+ dnsdomainname <- nos da el nombre del dominio
+ rndc flush <- Borrar la cache
+ rndc status <- muestra el estado de la cache
+ named status <- nos dice el estado de named

Bueno por fin acabamos nuestro servidor dns.

.==========================================================================.
|=======~ 12.0.0  HACIENDO UN ROUTER DE NUESTRO PC ~========================
|===========================================================================
  
- Buenos esto va avanzando y ya podemos hacer mas cosinas:

 + Activar nuestro pc como router
 
   - Modo temporal: Para ello solo tenemos que ir a 
/proc/sys/net/ipv4/ip_forward   y poner un 1 donde habia un 0 (/proc es el 
directorio donde se refleja la memoria)   
   
   
   - Modo permanente: Editamos /etc/sysctl.conf y ponemos
   net.ipv4.ip_forward = 1 

   
  Para mirar la tabla de rutas usamos route, que tambien lo conocemos de 
  windows y si no lo conocemos lo conoceremos mas adelante cuando lleguemos
  a la seccion de windows si mis animos y el tiempo me lo permiten.
   
  
  Ej: Tenemos 2 ips 192.168.1.254 y 192.168.2.254, bueno ya sabeis confi-
  gurar las ips  con MACS 255.255.255.0 , y tenemos como ruta por defecto 
  la de otro router, 192.168.1.1 con MAC 255.255.255.0 , ese router nos 
  enrutara cuando no podamos resolver una direccion.
  
  
 -  A├▒adirlo en memoria: route add default gw 192.168.1.1
 
 -  A├▒adirlo de forma permanente: Editamos el archivo donde tengamos la
  ip  de esa red en este caso 192.168.1.254 supongamos que se llame 
  ifcfg-eth0, solo tenemos que  a├▒adir: GATEWAY=192.168.1.1 (recordad eso, 
  para a├▒adir el router tenemos que tener una ip en esa  misma red)
  
  Si hacemos un route veremos en la ultima linea:
  
  default         192.168.1.1     0.0.0.0         UG    0      0        0 
eth0
  Tambien debemos recordad que para enrutar una red debemos tener una ip en
  esa misma red.
  
  
  Bueno voy a hacer un ejemplo mas real, con los 2 pcs que tenia antes, en 
dns  2 servidores y un cliente, para 
  
  
      [ NUESTRO TREMENDO Y MARAVILLOSO PERO SIMPLE ESQUEMA ]
                               
                            INTERNET
                                |
                                |
                           ***.***.*.*  Ip de internet
                           192.168.0.2  DDiego.disidents.com 
			        |
				|
			       /
			   192.168.0.1  portatil.c0d3x.disidents.com  GW->192.168.0.2     
			   192.168.1.1 
			   /
	               192.168.1.3 cliente.c0d3x.disidents.com GW->192.168.1.1
		
		       
	Bueno 1┬║ tendriamos que cambiar los archivos de dns, pero para hacerlo
	menos complicado lo haremos 1┬║ mediante ip.
	
		              
 ---[ Configurando DDiego.disidents.com ]---
 
 Nos iremos a nuestro directorio /etc/sysconfig/network-scripts/

 y editaremos nuestros archivos recordais		       		   
 
 1┬║ un archivo  que nos de acceso a internet ifcfg-eth0

 [ifcfg-eth0] 
 
 USERCTL=no
 PEERDNS=no <- a no pq si no nos cambiaria nuestro resolv.conf
 TYPE=Ethernet
 DEVICE=eth0
 HWADDR=00:e0:4c:39:26:5d <- mi mac
 BOOTPROTO=dhcp
 ONBOOT=yes
 
 2┬║ Un archivo de la red 192.168.0.0 con la ip 192.168.0.2

[ifcfg-eth0:1]
  
TYPE=Ethernet
DEVICE=eth0:1
HWADDR=00:e0:4c:39:26:5d
BOOTPROTO=none
NETMASK=255.255.255.0
ONBOOT=yes
IPADDR=192.168.0.2
USERCTL=no
PEERDNS=yes
NETWORK=192.168.0.0
BROADCAST=192.168.0.255


 
Bueno ahora editamos /etc/sysctl.conf y ponemos net.ipv4.ip_forward = 1 

[/etc/sysctl.conf]

net.ipv4.ip_forward = 1
net.ipv4.conf.default.rp_filter = 1
kernel.sysrq = 0
kernel.core_uses_pid = 1
~


 ---[ Configurando portatil.c0d3x.disidents.com ]---
 
1┬║ configuraremos la ip 192.168.0.1 de la red 192.168.0.0

 [ifcfg-eth0] 
 
TYPE=Ethernet
DEVICE=eth0
HWADDR=00:c0:9f:24:fd:49
BOOTPROTO=none
NETMASK=255.255.255.0
ONBOOT=yes
IPADDR=192.168.0.1
USERCTL=no
PEERDNS=yes
NETWORK=192.168.0.0
BROADCAST=192.168.0.255
GATEWAY=192.168.0.2 <- como vemos podemos ponerlo aqui o en 
/etc/sysconfig/network                       de forma mas general
		       

2┬║ Configuraremos para tener la ip 192.168.1.1 de la red 192.168.1.0
		       	  
 [ifcfg-eth0:1] 

TYPE=Ethernet
DEVICE=eth0:1
HWADDR=00:c0:9f:24:fd:49
BOOTPROTO=none
NETMASK=255.255.255.0
ONBOOT=yes
IPADDR=192.168.1.1
USERCTL=no
PEERDNS=yes
NETWORK=192.168.1.0
BROADCAST=192.168.1.255

  
Ahora editamos /etc/sysctl.conf y ponemos net.ipv4.ip_forward = 1  como 
el ejemplo de arriba 
  

POSIBLES PROBLEMAS:

Si hago un route me saldra al final:

#route
192.168.1.0     *               255.255.255.0   U     0      0        0 eth0
192.168.0.0     *               255.255.255.0   U     0      0        0 eth0
169.254.0.0     *               255.255.0.0     U     0      0        0 eth0
127.0.0.0       *               255.0.0.0       U     0      0        0 lo
default         192.168.0.2     0.0.0.0         UG    0      0        0 eth0
default         192.168.0.2     0.0.0.0         UG    1      0        0 eth0

Tenemos repetido la ruta por defecto:

- Una forma temporal de quitarla es con route del default gw 192.168.1.2
 Para a├▒adir rutas por defecto de forma temporal lo mismo pero sustituimos
 "del" por "add"
 
- La otra forma es mirar donde se repite, puede ser que hayas configurado 
las ipsen modo grafico /etc/sysconfig/networking 

- Otra forma es ir a ifcfg-eth0 borrar la linea: GATEWAY=192.168.0.2 
editar /etc/sysconfig/network y a├▒adir ahi

GATEWAY=192.168.0.2 

Luego haceis un route:

# route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use 
Iface192.168.1.0     *               255.255.255.0   U     0      0        0 
eth0192.168.0.0     *               255.255.255.0   U     0      0        0 
eth0169.254.0.0     *               255.255.0.0     U     0      0        0 
eth0127.0.0.0       *               255.0.0.0       U     0      0        0 
lodefault         192.168.0.2     0.0.0.0         UG    0      0        0 
eth0
Y obtenemos lo debido ;) 

Vamos a hacer un traceroute a terra.es con la ip 213.4.130.210

# traceroute 213.4.130.210
traceroute to 213.4.130.210 (213.4.130.210), 30 hops max, 38 byte packets
 1  192.168.1.2 (192.168.0.2)  0.301 ms  0.239 ms  0.409 ms

 + Como vemos primero mos pasamos por nuestra puerta de enlace

Ahora un ping, veremos como redirecciona:

# ping 213.4.130.210
PING 213.4.130.210 (213.4.130.210) 56(84) bytes of data.
From 192.168.0.2: icmp_seq=1 Redirect Host(New nexthop: 213.141.56.254)
From 192.168.0.2: icmp_seq=2 Redirect Host(New nexthop: 213.141.56.254)
From 192.168.0.2: icmp_seq=3 Redirect Host(New nexthop: 213.141.56.254)
From 192.168.0.2: icmp_seq=4 Redirect Host(New nexthop: 213.141.56.254)



3┬║ El cliente que si usa linux tendria que tener su ifcfg-eth0 con la
ip 192.168.1.3 de la red 192.168.1.0


 [ifcfg-eth0] 
 
TYPE=Ethernet
DEVICE=eth0
HWADDR=00:c0:9f:24:fd:30
BOOTPROTO=none
NETMASK=255.255.255.0
ONBOOT=yes
IPADDR=192.168.1.3
USERCTL=no
PEERDNS=yes
NETWORK=192.168.1.0
BROADCAST=192.168.1.255
GATEWAY=192.168.1.1
                   
Pero en mi caso tengo un cliente windows, pondremos de puerta de enlace 
a 192.168.1.1 y la ip es 192.168.1.3

- Veamos la configuracion ip 

>ipconfig

Configuracin IP de Windows


Adaptador Ethernet Conexin de ∩┐╜ea local          :

        Sufijo de conexin espec∩┐╜ica DNS :
        Direccin IP. . . . . . . . . . . : 192.168.1.3
        M∩┐╜cara de subred . . . . . . . . : 255.255.255.0
        Puerta de enlace predeterminada   : 192.168.1.1

- Ahora nuestra tabla de rutas como clientes	
	
>route print
===========================================================================
ILista de interfaces
0x1 ........................... MS TCP Loopback interface
0x2 ...00 50 22 b0 83 31 ...... NIC Fast Ethernet PCI Familia RTL8139 de 
Realtek  - Minipuerto del administrador de paquetes
===========================================================================
===========================================================================
Rutas activas:
Destino de red        M∩┐╜cara de red   Puerta de acceso   Interfaz  M∩┐╜rica
          0.0.0.0          0.0.0.0      192.168.1.1     192.168.1.3       1
        127.0.0.0        255.0.0.0        127.0.0.1       127.0.0.1       1
      192.168.1.0    255.255.255.0      192.168.1.3     192.168.1.3       30
      192.168.1.3  255.255.255.255        127.0.0.1       127.0.0.1       30
    192.168.1.255  255.255.255.255      192.168.1.3     192.168.1.3       30
        224.0.0.0        240.0.0.0      192.168.1.3     192.168.1.3       30
  255.255.255.255  255.255.255.255      192.168.1.3     192.168.1.3       1
Puerta de enlace predeterminada:       192.168.1.1
===========================================================================
Rutas persistentes:
  ninguno

  Bien nuestra puerta de enlace es 192.168.1.1 como debe ser

+ Ahora un tracert a terra.es
  
>tracert 213.4.130.210

Traza a 213.4.130.210 sobre caminos de 30 saltos como m∩┐╜imo.

  1     7 ms     1 ms     1 ms  192.168.1.1
  2     2 ms     1 ms     1 ms  192.168.1.2

		        
  
Ahora tenemos que reconfigurar los servidores de dns, a├▒adir la inversa de 
la red 192.168.1.0, menudo rollo la verdad  pero lo vamos a hacer, para ello
solo tenemos que modificar el archivo del subdominio
  
 portatil.c0d3x.disidents.com 192.168.0.1 y 192.168.1.1
   
 [/etc/named.conf]
 
/ generated by named-bootconf.pl

options {
        directory "/var/named";
        forwarders {
                      192.168.0.2;



                   };

        /*
         * If there is a firewall between you and nameservers you want
         * to talk to, you might need to uncomment the query-source
         * directive below.  Previous versions of BIND always asked
         * questions using port 53, but BIND 8.1 uses an unprivileged
         * port by default.
         */
        // query-source address * port 53;
};

//
// a caching only nameserver config
controls {
        inet 127.0.0.1 allow { localhost; } keys { rndckey; };
};
zone "." IN {
        type hint;
        file "named.ca";
};

zone "localhost" IN {
        type master;
        file "localhost.zone";
        allow-update { none; };
};

zone "0.0.127.in-addr.arpa" IN {
        type master;
        file "named.local";
        allow-update { none; };
};

zone "c0d3x.disidents.com" {
        type master;
        file "c0d3x.disidents.com.zone";
        };
zone "1.168.192.in-addr.arpa" { #<-- cambiamos la inversa
       type master; 
       file "1.168.192.in-addr.arpa.zone"; 
      };

include "/etc/rndc.key";

[/var/named/c0d3x.disidents.com.zone]

$TTL 86400
@         IN      SOA     portatil.c0d3x.disidents.com. root.localhost  (
                                      1 ; Serial
                                      28800      ; Refresh
                                      14400      ; Retry
                                      3600000    ; Expire
                                      86400 )    ; Minimum
                        IN NS     portatil.c0d3x.disidents.com.

portatil.c0d3x.disidents.com. IN A 192.168.1.1
cliente.c0d3x.disidents.com.     IN A 192.168.1.3
~
~
~
[/var/named/1.168.192.in-addr.arpa.zone]

$TTL 86400
@ IN      SOA     portatil.c0d3x.disidents.com. root.localhost  (
                                      2 ; Serial
                                      28800      ; Refresh
                                      14400      ; Retry
                                      3600000    ; Expire
                                      86400 )    ; Minimum
@           IN      NS      portatil.c0d3x.disidents.com.
1 IN PTR portatil.c0d3x.disidents.com.
3 IN PTR cliente.c0d3x.disidents.com.

~
Ahora todo funciona, asi de facil




 
.==========================================================================.
|=======~ 13.0.0  SERVIDOR DHCP ~===========================================
|===========================================================================

- Pero muy ambiciosos/as y nos gustaria que ademas de enrutar a nuestros
clientes les otorgasemos una ip del rango que nos diera la gana, y a nuestro 
gusto, para ello.

Veamos el archivo de configuracion ip de un cliente en linux de dhcp:
[ifcfg-eth0]

DEVICE=eth0
ONBOOT=yes
BOOTPROTO=dhcp

Podemos a├▒adir mas cosas, como hemos visto ahi atras, pero esto es lo 
esencialSi ponemos la opci├│n "PEERDNS=no" a la hora de que el servidor nos 
asigne una ip no nos cambiara el resolv.conf, pero si lo ponemos a yes el 
servidor podracambiarnos nuestro resolv.conf con el servidor dns que el 
quiera.
Para que el servidor pueda otorgarnos una ip en un rango, este servidor debe
tener una ip en ese rango
Las ips se ofertan en order y empiezan del 1┬║ a el ultimo.
Si hubiera 2 servidores dhcp ofertando, el primero que se acepta sera el que
te otorge la ip, lo habitual es que solo haya un servidor dhcp. Este 
servidorestableblecera un periodo de caducidad de la ip, y el cliente 
solicitara quele cambie la ip en el periodo de caducidad que tenga, tambien 
veremos como sepuede otrorgar una ip fija segun la MAC que tenga el equipo 
que se conecte.
+ ARCHIVOS INTERESANTES:

SERVIDOR: /etc/init.d/dhcpd
ARCHIVO DE CONFIGURACION: /etc/dhcpd.conf como podemos observar esta vacio
pero existen archivos de ejemplo, vamos a buscarlos:

#find / | grep dhcp*

....
/usr/share/doc/dhclient-3.0pl1/dhclient.conf.sample

Ahora copiaremos dhclient.conf.sample y sustituiremos a dhcpd.conf que 
esta vacio

CLIENTE - Quien nos ha asignado la ip??: lo podemos ver en: 
/var/lib/dhcp/dhclient-eth0.leases

SERVIDOR - A quien le hemos asignado una ip y cual 
/var/lib/dhcp/dhcpd.leases
[ CONFIGURANDO EL SERVIDOR DHCPD ]

Vamos a configurar el servidor dhcp para que otorge ips en dos subredes 


[/etc/dhcpd.conf]

ddns-update-style interim; #el modo recomendado de actualizacion dns
ignore client-updates;

shared-network disidents.com {
       subnet 192.168.0.0 netmask 255.255.255.0 {
                 option routers 192.168.0.1; #portatil.c0d3x.disidents.com 
como puerta de enlace                 option domain-name-servers      
192.168.1.1; <- tb podemos cambiar el servidor		                             
                    DNS		 range dynamic-bootp 192.168.0.3  192.168.0.217; 
#rango entre el que se otorgaran		                                           
      #las ips,naturalmente el servidor 								 #dhcp tiene que tener una 
ip en								 #ese rango
		                                     
                 default-lease-time 300; #5 minutos tiempo de asignacion por 
defecto en segundos                 max-lease-time 600; #tiempo maximo de 
asignacion en segundos, 10 minutos       
       }
       subnet 192.168.1.0 netmask 255.255.255.0 {
                 option routers 192.168.1.1;
                 option subnet-mask 255.255.255.0;
                 option time-offset  -18000;
                 range dynamic-bootp 192.168.1.2  192.168.1.10;
                 default-lease-time 300;
                 max-lease-time 600;
       }
}

Hagamos que inicie el servidor con: service dhcpd restart
	
Bien, he configurado para que en el cliente windows le sea asignado la ip
automaticamente por el servidor, veamos que paso cuando le hice un ipconfig

>ipconfig /all

Configuracin IP de Windows
option domain-name-servers
        Nombre del host . . . . . . . . . : Mama
        Sufijo DNS principal  . . . . . . :
        Tipo de nodo . . . . . . . . . .  : desconocido
        Enrutamiento habilitado. . . . . .: No
        Proxy WINS habilitado. . . . .    : No

Adaptador Ethernet Conexin de ∩┐╜ea local          :

        Sufijo de conexin espec∩┐╜ica DNS :
        Descripcin. . . . . . . . . . .  : Realtek RTL8139/810X Family PCI 
Fast Ethernet NIC
        Direccin fisica. . . . . . . . . : 00-50-22-B0-83-32
        DHCP habilitado. . . . . . . . .  : No
        Autoconfiguracin habilitada. . . : Si
        Direccin IP. . . . . . . . . . . : 192.168.0.217 <- observa que 
empieza por el 1┬║ de arriba        M∩┐╜cara de subred . . . . . . . . : 
255.255.255.0         Puerta de enlace predeterminada   : 192.168.0.1 <- de 
option routers        Servidor DHCP . . . . . . . . . . : 192.168.0.1 <-la 
ip que tengo en ese rango        Servidores DNS . . . . . . . . . .: 
192.168.1.1 <-de option domain-name-servers        Concesin obtenida . . . . 
. . .  : martes, 30 de diciembre de 2003 20:07:06
        Concesin expira . . . . . . . . .: martes, 30 de diciembre de 2003 
20:12:06


Veamos la configuracion /var/lib/dhcp/dhcpd.leases

lease 192.168.0.217 {
  starts 2 2003/12/30 18:15:50;
  ends 2 2003/12/30 18:20:50;
  tstp 2 2003/12/30 18:20:50;
  binding state active;
  next binding state free;
  hardware ethernet 00:50:22:b0:83:31;
  uid "\001\000P\"\260\2031";
  client-hostname "Mama";

  
 + Ahora veamos lo que podemos averiguar
 
 1┬║ veremos que ip nos asignan:
 
 # ifconfig
eth0      Link encap:Ethernet  HWaddr 00:E0:4C:39:26:2D
          inet addr:192.168.0.216  Bcast:192.168.0.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:98637 errors:0 dropped:0 overruns:0 frame:0
          TX packets:3480 errors:0 dropped:0 overruns:0 carrier:0
          collisions:26 txqueuelen:100
          RX bytes:6274175 (5.9 Mb)  TX bytes:405028 (395.5 Kb)
          Interrupt:11 Base address:0xc000

Veremos que nos dice el archivo de cliente:
/var/lib/dhcp/dhclient-eth0.leases

lease {
  interface "eth0";
  fixed-address 192.168.0.216;
  option subnet-mask 255.255.255.0;
  option routers 192.168.0.1;
  option dhcp-lease-time 300;
  option dhcp-message-type 5;
  option domain-name-servers 192.168.1.1;
  option dhcp-server-identifier 192.168.0.1;
  renew 2 2003/12/30 19:27:58;
  rebind 2 2003/12/30 19:29:58;
  expire 2 2003/12/30 19:30:36;

  
  + Bien ahora mas dificil todavia, vamos a hacer que nuestro servidor
  identifique una MAC y a partir de esa mac le vamos a dar una ip fija, 
  para ello a├▒adimos dentro de la red en la queremos hacer la asignaci├│n 
  de manera fija:

         host cliente.c0d3x.disidents.com {
                 hardware ethernet 00:50:22:b0:83:21;
                 fixed-address 192.168.0.3;
         }

- Quedaria algo asi:

ddns-update-style interim;
ignore client-updates;
shared-network disidents.com {
     subnet 192.168.0.0 netmask 255.255.255.0 {
			                option routers 192.168.0.1;                               
                      option domain-name-servers  192.168.1.1;               
        			range dynamic-bootp 192.168.0.3  192.168.0.217;                   
     		default-lease-time 300;                        		max-lease-time 600;
         host cliente.c0d3x.disidents.com {
                 hardware ethernet 00:50:22:b0:83:21; #mac del equipo que 
debemos asignar                 fixed-address 192.168.0.3;
         		}

                                            }

    subnet 192.168.1.0 netmask 255.255.255.0 {
                 option routers 192.168.1.1;
                 option subnet-mask 255.255.255.0;
                 option time-offset  -18000;
                 range dynamic-bootp 192.168.1.2  192.168.1.10;
                 default-lease-time 300;
                 max-lease-time 600;
                                               }
}

- rearrancamos el servicio
- vamos al cliente de la susodicha MAC
-renovamos su ip
>ipconfig /renew


+Observamos su nueva configuracion


>ipconfig
Configuracin IP de Windows


Adaptador Ethernet Conexin de ∩┐╜ea local          :

        Sufijo de conexin espec∩┐╜ica DNS :
        Direccin IP. . . . . . . . . . . : 192.168.0.3
        M∩┐╜cara de subred . . . . . . . . : 255.255.255.0
        Puerta de enlace predeterminada   : 192.168.0.1

>ipconfig /all

Configuracin IP de Windows

        Nombre del host . . . . . . . . . : Mama
        Sufijo DNS principal  . . . . . . :
        Tipo de nodo . . . . . . . . . .  : desconocido
        Enrutamiento habilitado. . . . . .: No
        Proxy WINS habilitado. . . . .    : No

Adaptador Ethernet Conexin de ∩┐╜ea local          :

        Sufijo de conexin espec∩┐╜ica DNS :
        Descripcin. . . . . . . . . . .  : Realtek RTL8139/810X Family PCI 
Fast Ethernet NIC
        Direccin f∩┐╜ica. . . . . . . . . : 00-50-22-B0-83-21
        DHCP habilitado. . . . . . . . .  : No
        Autoconfiguracin habilitada. . . : S∩┐╜
        Direccin IP. . . . . . . . . . . : 192.168.0.3
        M∩┐╜cara de subred . . . . . . . . : 255.255.255.0
        Puerta de enlace predeterminada   : 192.168.0.1
        Servidor DHCP . . . . . . . . . . : 192.168.0.1
        Servidores DNS . . . . . . . . . .: 192.168.1.1
        Concesin obtenida . . . . . . .  : martes, 30 de diciembre de 2003 
20:32:32
        Concesin expira . . . . . . . . .: martes, 30 de diciembre de 2003 
20:37:32



Bueno con esto acabo DHCP, espero que os haya sido de ayuda


	

.==========================================================================.
|=======~ 14.0.0  SERVIDOR WEB - APACHE ~===================================
|===========================================================================
	  
	 
El archivo de configuracion normalmente se encuentra 
/etc/httpd/conf/httpd.confen ese directorio /etc/httpd/conf/ se encuentran 
varios archivos que utilizaremospara configurar nuestro servidor web.

Analicemos el archivo:

### Section 1: Global Environment <- Parametros globales, afectan a todo
### Section 2: 'Main' server configuration <- Paramentros de configuracion 
del                                              servidor real
### Section 3: Virtual Hosts <- En esta seccion definiremos los servidores
                                virtuales, por ejemplo podemos tener paginas
				web diferentes para ips diferentes o para la 
				misma ip pero con distinto puerto, etc...
				
Iniciamos el servicio: service httpd restart									       	 
	 
y ponemos en nuestro navegador http://localhost
si ponemos http://localhost/manual/ ahi teneis el manual, bueno chicos ahi 
osdejo espero que os vaya bien ...., jajajajaja naaaaaaaaaaaaa es broma 
tranquilosque aun la funcion no ha terminado.

Vamos a analizar la seccion 1

ServerRoot "/etc/httpd" <- Donde estan los archivos y directorios de 
configuracion                            del servidor

Especificamos el usuario que ejecuta el demonio:
User apache
Group apache


			   
Ahora podemos establecer por que puertos escuchara nuestro servidor, y para 
que ips:

Listen 80 #Escucho con todas las ips por el 80
Listen 192.168.0.2:8000 #escucho con esa ip por el 8000

Timeout 300 #corta la conexion si a los 300 segundos no da se├▒ales de vida 
el             #cliente



KeepAlive Off #desactivado conexiones persistentes es decir que un mismo 
cliente              #se conecte varias veces
	      
MaxKeepAliveRequests 100 #numero maximo de conexiones persistentes, si 
ponemos                          #0 no tendra limite maximo	      
	
	    
150 clientes como maximo MaxClients 150


Seccion 2 

Especificamos el usuario que ejecuta el demonio:
User apache
Group apache


ServerAdmin Diegorba@yahoo.es #email del administrador
ServerName DDiego #especificamos en nombre del servidor

DocumentRoot "/var/www/html" #aqui tendremos los documentos del servidor 

Options Indexes FollowSymLinks #indexes permite ver el indice de los 
archivos de                                #un directorio
			       #FollowSymLinks permite ir a enlaces simbolicos
			       
Order allow,deny #en orden primer permite y luego deniega
Allow from all	 #permite a todo el mundo		 


#Bueno en el siguiente apartado si ponemos -Indexes, veriamos el contenido 
deldirectorio que no tenga un index, tipo como si fueran carpetas, estas 
opcionesse pueden dar de manera esclusiva a cada directorio
&lt;LocationMatch "^/$>
    Options Indexes #si pusiesemos -Indexes veriamos el contenido del 
directorio    ErrorDocument 403 /error/noindex.html #si no encuentra el 
index te lleva a esa                                          #pagina 
/var/www/error/noindex.html					  #que es la Test Page del apache
&lt;/LocationMatch>

DirectoryIndex index.html index.html.var #el fichero indice podemos a├▒adir 
un fichero                                         #como pagina de inicio  
					 
por ejemplo podemos a├▒adir disidents.html:					     

DirectoryIndex index.html index.html.var disidents.html #si dentro de 
/var/www/html                                                      #no 
encuentra ninguno de los otros						      # 2 index pero si disidents.html
						      # esa sera la pagina web de 
						      #inicio

CONFIGURAR EL LENGUAJE:


# DefaultLanguage nl <- pones un es

LanguagePriority es en da nl et fr de el it ja kr no pl pt pt-br ltz ca sv 
tw <- pones un es 1┬║

[PEQUE├æO RESUMEN]

[Opciones de directorio - Options]

ExecCgi <- permite ejecutar cgis en es directorio
FollowSymLinks <- permite ir a enlaces simblocios
Includes noexec <- Permite ejercutar sentencias de tipo exec 
Includes -> permite ejecutar sentencias
Indexes -> Permite ver el listado de archivos en un directorio
Multiviews -> Permite acceder a cualquier sitio donde vista una default.html
busca cualquier default en cualquier  sitio del directorio

Directivas de seguridad:
Order deny, allow <- especificamos el orden en que se ejecutan las 
directivasdeny <- denegamos la entrada al directorio de determinados hosts
allow <- Permitimos al entrada al directorio a determinados host

Posibles errores en el servidor

#
# Se pueden configurar las respuestas por un error de 3 formas:
# 1) texto plano  2) redireccion local 3) redireccion externa

 Some examples:

1) texto plano "Un mensaje de texto" 
ErrorDocument 500 "The server made a boo boo."

2) redireccion local "un archivo que se encuentre en el servidor local"
ErrorDocument 404 /missing.html
ErrorDocument 404 "/cgi-bin/missing_handler.pl"

3) redireccion externa "a una pagina web externa"
ErrorDocument 402 http://www.example.com/subscription_info.html

+ Un concepto que tenemos que tener claro es el de directorio, podemos crear 
undirectorio a nivel global, para todos los virtualhost o solo para un 
virtualhostes lo mas recomendable para tenerlo todo bien estructurado. 

						 						      
Ejemplo de un directorio:

&lt;Directory "/var/www/html/dir">
   Order deny,allow <- Primero se deniega y luego se deja
   deny from all <- denegamos a todas
&lt;/Directory>

Creando un virtualhost basado en ip:

1┬║ Debemos tener esa ip, mas arriba debemos poner un :

Listen 8000 <- todas las ips escucharian en este puerto
es lo mismo que Listen *:8000
o un:
Listen 192.168.0.2:8000 <- solo esa ip, yo optaria por esta

&lt;VirtualHost 192.168.0.2:8000>
      ServerSignature email 
      DirectoryIndex index.html
      NameVirtualHost 192.168.0.2:8000
      DocumentRoot /var/www/html/usage

      &lt;Directory "/var/www/html/usage">
                 AllowOverride none
		 Options indexes 
		 Allow from all #<-- Dejas paso para todo el mundo
		                #    si quisieramos los ocntrario seria Deny from all
		 Order deny,allow
      &lt;/Directory>
&lt;/VirtualHost>


Veremos la pagina qque esta en /var/www/html/usage, que son estadisticas 
sobre el servidor


Creando un virtualhost basado en nombre
En este caso * seria para todas las ips, pero solo printara la pagina para 
la ipque resuelva con el host DDiego.disidents.com, es decir  192.168.0.2


&lt;VirtualHost *:8000>
      ServerName DDiego.Disidents.com <-- tiene que resolverse
      ServerSignature email 
      DirectoryIndex index.html ddiego.html <- si no encuentra index.html 
                                               buscaria ddiego.html
      DocumentRoot /var/www/html/usage
      &lt;Directory "/var/www/html/usage">
                 AllowOverride none
		 Options indexes 
		 Allow from all <-- Dejas paso para todo el mundo
		                    si quisieramos los contrario seria Deny from all
		 Order deny,allow
      &lt;/Directory>
&lt;/VirtualHost>

Si pusiesemos &lt;VirtualHost *>  seria para todas las ips que tuviesemos en 
lospuertos que hayamos puesto como Listen

Ahora vamos a denegar a varias ips, esto es una opcion puede ponerse en el 
globalpara todos los virtualhost, pero en nuestro caso lo pondremos en un 
virtualhost

&lt;VirtualHost DDiego.Disidents.com:8000>
      ServerName DDiego.Disidents.com <-- tiene que resolverse
      ServerSignature email 
      DirectoryIndex index.html ddiego.html <- si no encuentra index.html 
                                               buscaria ddiego.html
      DocumentRoot /var/www/html/dir
      &lt;Directory "/var/www/html/dir">
  		 Order deny,allow <- Primero se deniega y luego se deja
   		 deny from all <- denegamos a todas
   		 allow from 192.168.0.2 
   		 allow from 127.0.0.1
		 allow from 192.168.0.1 <- permitimos a esta ip ver el directorio
       &lt;/Directory>
&lt;/VirtualHost>


- VARIOS DIRECTORIOS EN UN VIRTUALHOST Y UNO DE ELLOS CON ALIAS

&lt;VirtualHost 192.168.0.2:8000>
      ServerName DDiego.Disidents.com <-- tiene q resolverse
      ServerSignature email 
      DirectoryIndex index.html
      NameVirtualHost 192.168.0.2:8000
      DocumentRoot /var/www/html/usage
      #Podemos meter dos directorios
      &lt;Directory "/var/www/html/usage">
                 AllowOverride none
		 Options indexes
		 Allow from all
		 Order deny,allow
      &lt;/Directory>	
     &lt;Directory "/pruebas">
         Allow from all
	 Order deny,allow
      	 Options Indexes
            &lt;/Directory>  
 Alias /ddiego "/pruebas"  
&lt;/VirtualHost>

+ Explicacion:

Veamos este virtualhost consta de dos directorios uno de las estadisticas 
del servidor /var/www/html/usage para entrar a este solo hay que escribir en 
elnavegador http://192.168.0.2:8000 y el segundo, de un directorio creado en 
el raiz /pruebas, que para entrar a el solo hay que escribir 
http://192.168.0.2/ddiego

+ AUTENTIFICACION DE USUARIOS 

Vamos a hacer que en directorio pruebas de antes, haya que autentificarse
para poder visualizarlo, va a ser nuestra zona privada, crearemos dos 
usuariosel usuario ddiego con contrase├▒a disidents y el usuario spark con 
contrase├▒adisidents tambien ;)

Paso por paso:

Abrirmos una consola o pseudoconsola para los amigos de las x.

Crearemos el usuario ddiego en el archivo /etc/httpd/conf/contras
podeis ponerle cualquier otro nombre, luego os pedira la contrase├▒a

#htpasswd -c  /etc/httpd/conf/contras ddiego
New password: disidents
Re-type new password: disidents
Adding password for user ddiego

Ahora a├▒adiremos el usuario spark en el archivo:

# htpasswd /etc/httpd/conf/contras spark
New password:
Re-type new password:
Adding password for user spark



+ Recuperando las contrase├▒as de apache:

john  /etc/httpd/conf/contras
Loaded 2 passwords with 2 different salts (Standard DES [24/32 4K])
disident         (spark)
disident         (ddiego)

Para mas detalles 1┬¬ ezine de disidents ;)

Ahora le daremos permiso de lectura 

#chmod 744 /etc/httpd/conf/contras




Configurando nuestro directorio:

&lt;Directory "/pruebas">
           AuthName "Carpeta de DDiego" #sale en la pantalla donde te pide 
la pass	   AuthType basic #tipo de autentificacion basica: "texto plano"
	   AuthUserFile /etc/httpd/conf/contras #archivo de contrase├▒as
           Require valid-user #solamente si esta definidio en el archivo
          require user ddiego spark#solo los usuarios ddiego y spark tendran 
acceso 1┬¬	                           #independientemente del fichero de 
contrase├▒as 	  
	  Allow from all
	 Order deny,allow
      	 Options Indexes
            &lt;/Directory>  
	    

En vez Require user, es posible usar Require valid-user para que solo sean
validos usuarios validos	    


El virtualhost quedaria asi por ejemplo:

&lt;VirtualHost DDiego.Disidents.com:8000>
      ServerName DDiego.Disidents.com
      ServerSignature email 
      DirectoryIndex index.html
      NameVirtualHost 192.168.0.2:8000
      DocumentRoot /var/www/html/usage
      
      &lt;Directory "/var/www/html/usage">
                     AllowOverride none
		 Options indexes
		 Allow from all
		 Order deny,allow
		 
		 &lt;/Directory>	
     &lt;Directory "/pruebas">
           AuthName "Members only"
	   AuthType basic
	   AuthUserFile /etc/httpd/conf/contras 
           Require valid-user #solamente si esta definidio en el arhicvo
          Require valid-user
	  
	  Allow from all
	 Order deny,allow
      	 Options Indexes
            &lt;/Directory>  
 Alias /ddiego "/pruebas/"
&lt;/VirtualHost>


+ REDIRECCIONAR UN SERVIDOR ENTERO

Servidor entero, en la configuracion global fuera de los virtualhost

redirect / http://www.yahoo.es


+ REDIRECCIONAR DE UN DIRECTORIO A OTRO DIRECTORIO

Hay que tener una cosa en cuenta que si redireccionamos en un mismo 
virtualhostde un directorio a otro, se forma un bucle y da error al entrar 
com el navegador, por eso debemos redireccionar de un directorio de un 
virtualhost a otro directorioque este fuera o en otro directorio


+ Redireccionar de un virtualhost a otro:

&lt;VirtualHost DDiego.Disidents.com:8000>
      ServerName DDiego.Disidents.com
      ServerSignature email 
      DirectoryIndex index.html
      NameVirtualHost 192.168.0.2:8000
      DocumentRoot /var/www/html/dir1
      &lt;Directory "/dir1">
          Options indexes
	  Allow from all
         Order deny,allow
    &lt;/Directory>	
 
&lt;/VirtualHost>

&lt;VirtualHost 192.168.0.2:8001>
      ServerName DDiego.Disidents.com
      ServerSignature email 
      DirectoryIndex index.html
      NameVirtualHost 192.168.0.2:8001
      DocumentRoot /var/www/html/dir2
      Redirect / http://DDiego.disidents.com:8000
      &lt;Directory "/dir2">
       
          Options indexes
	  Allow from all
         Order deny,allow
    &lt;/Directory>
&lt;/VirtualHost>

Si abrimos en el navegador http://DDiego.disidents.com:8001 nos llevara
a http://DDiego.disidents.com:8000, 
NOTA: Recuerda poner a Listen el puerto 8001

Bueno aun queda alguna cosa de apache, pero para la proxima ezine espero
que sea muy pronto.




.==========================================================================.
|=======~ 15.0.0 LINKS INTERENSANTES ======================================= 
|===========================================================================

+MUY RECOMENDADA
(http://www.insflug.org/comos/) Enorme lista de COMOS en espa├▒ol

+ TCP-WRAPPER
(http://personal.telefonica.terra.es/web/ckroom/textos/tcp-wrapper.html) 
Como configurar un tcp-wrapper en espa├▒ol

+ SSH
(http://nuvol.uji.es/~galdu/ssh_vs_rsh/ssh_vs_rsh.html) Sobre ssh en espa├▒ol
(http://www.cica.es/seguridad/SSH/ssh-instal-unix.es.html) Sobre ssh en 
espa├▒ol
(http://www.csua.berkeley.edu/ssh-howto.html) ssh howto en ingles

+ NFS
(http://es.tldp.org/COMO-INSFLUG/COMOs/Linux-Con-Raiz-NFS-Como/) "Mini como 
de nfs" en espa├▒ol
(http://www.iespana.es/pacodebian/linuxnfs.html) "Compartir carpetas entre 
linux: NFS" tambien en espa├▒ol
(http://nfs.sourceforge.net/) "Linux NFS Overview, FAQ and HOWTO Documents", 
aqui teneis todo pero en ingles

+ SAMBA
(http://es.tldp.org/Manuales-LuCAS/USANDO-SAMBA/usando-samba-html/node1.html
) "Usando samba"
(http://es.tldp.org/COMO-INSFLUG/COMOs/Samba-Como/) "Samba Como" en espa├▒ol 
(http://www.etsimo.uniovi.es/samba/) "Samba FAQS" en ingles

+ DNS
(http://www.tldp.org/HOWTO/DNS-HOWTO.html) "DNS HOWTO" En ingles
(http://es.tldp.org/COMO-INSFLUG/COMOs/DNS-Como/DNS-Como.html#toc1) "DNS 
Como" en espa├▒ol

+ APACHE
(http://quark.fe.up.pt/ApachES/) "Documentacion de Apache en espa├▒ol"

+ ENLACES GENERALES
(http://es.tldp.org/) Documentacion general en espa├▒ol
(http://www.escomposlinux.org/Faq/FAQ_Linux_V2.0.2_html/FAQ_Linux_V2.0.2.htm
l#toc11) FAQ sobre linux
(http://cooliosbabes.flabber.nl/)   Muy buenos contenidos, para cuando 
te canses de errores



.==========================================================================.
|=======~ 16.0.0 NOTAS FINALES ============================================= 
|===========================================================================

- Espero que os haya gustado el articulo y sobre todo que os haya sido de 
  utilidad, despues de mi falta en la ezine 4 tenia ganas de hacer algo en 
  la ezine 5, si teneis alguna duda existencial podeis escribirme a 
  ddiegodisidents@yahoo.es     
  
  
.==========================================================================.
|=======~ 18.0.0 SALUDOS =================================================== 
|===========================================================================
 
- SALUDOS:
 S-P-A-R-K, Taseh,  W3ndig0, N0rth, Rah3, X4B1, leon01, rootzero, Vanmore, 
 remains, damicita, wendell, karnak, {FEAR} , ADAROTH, charchi, ^[LoW]^, 
 Genl0g, bockvan, Shadows_T, hda, sunevil, T0wanda, AsHiRa-, NaNo-mAn, 
 ourkito, {^JaB3^}, Sisq0, Estxellon, Gibdeon, ^Garlick^, _0rAk00L_, Nakao, 
 MiHCS, _Azec]{_, d0b3rman, C0ven, ^jan, bad^boy, C_S, mi-6, {V|S|oN},  
 Vuur-Burn, X-CRoMe, wylli, Randomlog, CRowen, [BacK], Crypto, SirCandy, 
 ScRool, Meleth, hdi4, ZiltrOcs, ]DYD[, pinorrana, Quade2K, b-04, VeNt0r, 
 charchi, XhAp|nCo, Crash_18, [NeTrOh], elreviron, kl0nk, ZeRo-DivI, AlI10s, 
 mindlock, Lecter, mitr3in, XanKaiSen, madbiker, maniac, ASzY, dudu, la69, 
 Gn0m3, Overburn, Nusky, ST38410A, v01cAn0, |RDR|, FREEBRAIN, checksum, 
 full-up, ArTicMeN, JeNdArk, tvdd, dat, Fermat, [Shearer], Pangea-X, MiHCS, 
 Tresde, crypt0, slaughter_, xxSaintxx, CHARMING, Axtras y a todos los que 
 se pasan por el canal #disidents, sobre todo a Elia que me animo a volver 
 a escribir.
 
 Y a toda esta gente y mucha mas que ha pasado por disidents y que aunque 
 no esten por tiempo o diversos temas, siempre tendran un hueco en el alma
 del team y en nuestros humildes articulos, gracias a todos porque sin 
 vosotros disidents no seria lo que es ahora, os espero en un futuro muy
 cercano, teneis las puertas abiertas ;).

 


.==========================================================================.
|=======~ 19.0.0 CONTACTO ================================================== 
|===========================================================================



.====[ Contacta conmigo o con el team ]====================================.
|                                                                          |
| ===[ MI MAIL ]====================== ===================[ MAIL TEAM ]=== |
| =  DDiegodisidents@yahoo.es        = = Disidents@yahoo.es              = |
| =  Diegorba@yahoo.es               = =                                 = |
| ===================================== ================================== |
| =====[ w3BpaG3s ]==================== =================[ Irc Servers ]== |
| =  http://www.karnakmx.com                = = irc.telecable.es  6667   = |
| =  http://disidents-team.cjb.net/         = = irc.irc-phoenix.org 6667 = |
| =  http://www.ciberia.ya.com/disidentsweb = ============================ |                          
| ===================================== =========[ Channels ]============= |
| =  EL HACKER NOBLE - DISIDENTS        =[ #disidents #codex #newbies    = |
| =  DATE: 04-01-2004                   =[ #seguridad_redes              = |
| ======================================================================== |
|                                                                          |
`===================================[ Contacta conmigo o con el team ]====='

                                                =~ El chico de las dos D ~=
                                      _
                                    (   )
                                      ~
                                      ~
                                      ~
                                      ~
                                      ~
                                      ~
                               |=============|
                               |=============|
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    | | |
                                    \ | /
                                     \|/
                                      '




```

</div>
