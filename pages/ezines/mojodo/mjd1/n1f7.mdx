---
title: "n1f7"
ezine: "mojodo"
---

# n1f7

**Ezine:** mojodo

<div className="ascii-content">

```
                                                                                      
         +-----------------------------------------+                                           
         | Autore: xanthic                         |                                           
         | Titolo: Routing e Viaggio di Pacchetti  |                                           
         | Mail: xantich@mojodo.cjb.net            |                                           
         | Http://mojodo.cjb.net                   |                                           
         +-----------------------------------------+                                           
                                                                                      
+---(iNTR0)--------------------------------------------------------------------------+
|                                                                                    |
| Come  penso abbiate  capito dal  titolo, mi  appresto a  spiegarvi cosa  sono i    |
| router,   come   funzionano   e  a   cosa   servono.   E'  un'articolo   scritto   |
| fondamentalmente  per  un  pubblico newbie,  ma  alcuni  concetti penso  possano   |
| servire anche a gente un pochino  pi∙ esperta. Questa Φ la seconda  versione che   |
| ho  rilasciato;  ho  corretto  alune  cosette  e  modificato  l'aspetto grafico,   |
| rendendolo leggermente pi∙ leggibile  e professionale. Per commenti,  critiche o   |
| informazioni vi  rimando alla  e-mail. Per  quanto riguarda  la distribuzione di   |
| questo documento,  siete liberi  di inserirlo  in siti  personali, archivi cdrom   |
| ecc.  ma se  prima mi  avvertite mi  fate un  piacere enorme.  Dopotutto questo    |
| articolo non serve tanto a me visto che queste cose le so, ma piuttosto a  terzi   |
| che  amano  smanettare e  scoprire  cosa c'Φ  dietro  alle azioni  che  compiamo   |
| abitualmente. Perci≥ sapere che questo breve  how-to Φ stato inserito ad es.  in   |
| un'e-zine mi gratificherebbe non poco.                                             |
|                                                                                    |
| =======================================================================            |
|                                                                                    |
| ROUTER: [xo1]: RUDiMENTi iNIZiALi                                                  |
|         [xo2]: TRACEROUTE: ViAGGiO Di PACCHETTi                                    |
|         [xo3]: iP 4 DUMMiES                                                        |
|                                                                                    |
| =======================================================================            |
|                                                                                    |
+------[RUDiMENTi iNIZiALi]----------------------------------------------------------+
|                                                                                    |
| Allora per  iniziare pongo  subito un  problema da  utilizzare come  esempio per   |
| introdurvi l'argomento: come  fanno pacchetti di  dati o email  a raggiungere il   |
| destinatario se  la rete  Φ intasata?  Se invio  una mail  e improvvisamente  si   |
| interrompe  la  comunicazione rischio  di  perdere i  dati?  La risposta  Φ  no.   |
| Altrimenti che cazz sto scrivendo a fare ora? In questo caso entrano in gioco  i   |
| nostri amati  ROUTERS. I  routers sono  macchine che  si scambiano informazioni,   |
| pacchetti, e  decidono che  percorso far  loro seguire  affinchΦ i  dati vengano   |
| correttamente  inviati. Qui  sotto vi  riporto uno  schema che  spiega le  varie   |
| "tappe" che effettua un-email che parte dal destinatario e arriva al mittente:     |
|                                                                                    |
| --------           -------           -------           ------------                |
| MITTENTE --------> ROUTER1 --------> ROUTER2 --------> DESTINATARIO                |
| --------           -------           -------           ------------                |
|    |                                                         |                     |
| -------            -------           -------           ------------                |
| ROUTER6 <-------   ROUTER5 <-------- ROUTER4 <--------    ROUTER3                  |
| -------            -------           -------           ------------                |
|                                                                                    |
|  Ecco,  questo Φ  un semplice  esempio di  viaggio di  pacchetti. L'email  viene   |
|  spezzettata  in  pacchetti  e,  prima  di  giungere  al  suo  target,  passa in   |
|  determinati  punti,  i  meno  intasati   e  i  pi∙  veloci/favorevoli  per   il   |
|  trasferimento. Naturalmente questi punti vengono decisi dal router.               |
|                                                                                    |
|==============================SIMILITUDINE==========================================|
|                                                                                    |
| Per farvi  capire meglio  utilizzo una  similitudine che  mi Φ  appena venuta in   |
| mente:  facciamo finta  che dobbiamo  andare in  vacanza. Partiamo  da Milano  e   |
| dobbiamo  arrivare a  Tortoreto Lido  in Abruzzo  :) in  macchina. Decidiamo  di   |
| prendere l'autostrada: se questa Φ intasata dal traffico non Φ che ci fermiamo e   |
| torniamo indietro!  Bens∞ cerchiamo  altre strade  che ci  portino ugualmente  a   |
| destinazione. Ad es. usciamo alla prossima uscita autostradale.                    |
|                                                                                    |
|==============================SIMILITUDINE==========================================|
|                                                                                    |
| Riprendiamo ora il  discorso. Se un  pc crasha o  se si forma  un intasamento in   |
| rete,  entra subito  in funzione  una deviazione  che garantisce  ugualmente il    |
| collegamento. Rispetto al sistema  tradizionale della telefonia (che  collega un   |
| punto con un altro), Internet Φ una rete, e come tale per raggiungere un punto Φ   |
| possibile utilizzare tante strade. L'invio  dei dati non avviene per  intero, il   |
| documento viene suddiviso  in tanti piccoli  pacchetti che seguono  vie diverse.   |
| Prima dell'inivio  ogni pacchetto  viene 'etichettato  e numerato',  e gli viene   |
| assegnato l'indirizzo del mittente e del destinatario. Questi pacchetti di  dati   |
| vengono spediti prima dal proprio pc  al proprio provider (se non sapete  cos'Φ,   |
| non sapete  cos'Φ internet,  e se  non sapete  cos'Φ internet  non vi  servono i   |
| router) e poi al router (legge i pacchetti e li invia al destinatario). Sono una   |
| specie di server con una intelligenza artificiale: in pochi millesimi di secondi   |
| recapitano i dati scegliendo le vie pi∙ favorevoli, cioΦ le meno intasate.         |
|                                                                                    |
| I router quindi  sono una sorta  di informatori, sempre  in contatto con  i loro   |
| simili, con i quali intrattengono scambi di informazioni (ogni 30 secondi). Essi   |
| sono sempre al corrente di eventuali crash, disconnessioni, flood o  intasamenti   |
| che colpiscono la rete. L'indirizzo scritto nell'header del messaggio fa si  che   |
| il router lo invii all'indirizzo corretto  (IP, ma di questo ne parlo  dopo). In   |
| sintesi, per concludere questa introduzione, vi dico che nonostante il  percorso   |
| che un  insieme di  pacchetti segue,  essi. una  volta inviati,  si ricompongono   |
| sempre sul pc della vittima ehm, del destinatario :)                               |
|                                                                                    |
+------[TRACEROUTE: ViAGGiO Di PACCHETTi]--------------------------------------------+
|                                                                                    |
| Premetto che nessuno (che io sappia :) pu≥ decidere in anticipo le strade che  i   |
| dati percorrono per arrivare a destinazione. Per≥ Φ possibile seguire le 'tappe'   |
| che  i  pacchetti  compiono  partendo  dal  pc  per  giungere  al  mittente.  E'   |
| sufficiente entrare  nel Prompt  di DOS  ed eseguire  il comando  tracert, Φ  vi   |
| uscirα una schermata come questa:                                                  |
|                                                                                    |
| C:\WINDOWS>tracert.exe                                                             |
|                                                                                    |
| Sintassi: tracert [-d] [-h max_salti] [-j elenco host] [-w timeout]                |
| nome_destinazione                                                                  |
|                                                                                    |
| Opzioni:                                                                           |
| -d Non risolve gli indirizzi in nome host.                                         |
| -h max_salti Numero max di punti di passaggio per ricercare                        |
| la destinazione.                                                                   |
| -j elenco-host Instradamento libero lungo l'elenco host.                           |
| -w timeout Timeout in millisecondi per ogni risposta.                              |
|                                                                                    |
| C:\WINDOWS>                                                                        |
|                                                                                    |
| Il nome del computer destinazione Φ l'unico parametro obbligatorio. Come si  pu≥   |
| vedere, Φ possibile specificare anche un numero massimo di tappe intermedie, una   |
| lista di  macchine intermedie  per cui  si deve  obbligatoriamente passare, e un   |
| tempo massimo di risposta. Da  notare che i parametri accettati  possono variare   |
| in funzione  della versione  del programma  e del  sistema operativo  in cui  ci   |
| troviamo. Proviamo per esempio a vedere che distanza ci separa da un server  fra   |
| i piu' noti e richiesti, cioe'  quello di VolFTP. Apriamo una shell  (Prompt DOS   |
| se sotto Windows, bash, csh o qualunque altra se sotto Unix), e scriviamo:         |
|                                                                                    |
| C:\WINDOWS>tracert volftp.tin.it                                                   |
|                                                                                    |
| Rilevazione instradamento verso cam.ca.tin.it  [195.31.191.10] su un massimo  di   |
| 30 punti di passaggio:                                                             |
|                                                                                    |
| 1 1787 ms 2211 ms 1721 ms pppsrv05.stm.it [195.62.32.50]                           |
| 2 2610 ms 1326 ms 1348 ms world.stm.it [195.62.32.11]                              |
| 3 3098 ms 2099 ms 1729 ms eth0-ibs-gw.stm.it [195.62.34.2]                         |
| 4 1976 ms 3040 ms 2394 ms r-rm2-torrearg.ibsns.it [151.99.9.181]                   |
| 5 * * * Richiesta scaduta.                                                         |
| 6 * * * Richiesta scaduta.                                                         |
| 7 2555 ms 1736 ms 3118 ms r-mi5-rm5-atm.ibsns.it [151.99.101.1]                    |
| 8 * * 3029 ms r-mi6-fa2.ibsns.it [151.99.100.37]                                   |
| 9 2221 ms 2606 ms * r-tin-mi6-atm.ibsns.it [151.99.107.134]                        |
| 10 * * * Richiesta scaduta.                                                        |
| 11 * * * Richiesta scaduta.                                                        |
| 12 * * 1753 ms cam.ca.tin.it [195.31.191.10]                                       |
|                                                                                    |
| Rilevazione completata.                                                            |
|                                                                                    |
| C:\WINDOWS>                                                                        |
|                                                                                    |
| Ah, aggiungo una cosa che cmq mi pare sia scontata... sotto Unix il comando  non   |
| Φ  tracert ma  traceroute. Come  si pu≥  vedere dal  messaggio introduttivo,  il   |
| comando traceroute  riesce a  rintracciare un  computer remoto  se questo  non Φ   |
| separato  dal  nostro  da  pi∙ di  trenta  tappe  intermedie  (questi "punti  di   |
| passaggio"  in  termine  tecnico  sono  detti  Hops  o  "salti").  Il  messaggio   |
| introduttivo ci dice anche che volftp.tin.it si chiama in realtα cam.ca.tin.it e   |
| che il suo indirizzo IP Φ 195.31.191.10.                                           |
|                                                                                    |
| Di seguito il programma  mostra il percorso completo  che separa il computer  da   |
| cui viene  eseguito traceroute  dal computer  che si  vuole tracciare.  Il primo   |
| elemento della lista Φ il POP a cui siamo collegati, nel caso di un collegamento   |
| tramite provider.                                                                  |
|                                                                                    |
| I  numeri  sulle tre  colonne  di sinistra  indicano  il tempo  in  millisecondi   |
| trascorso in  attesa della  risposta del  server a  cui la  riga si riferisce, e   |
| l'asterisco significa che la risposta non  Φ arrivata entro il tempo massimo  di   |
| attesa.  Dal  valore  dei  tempi  di  risposta  si  puo'  intuire  la  bontα del   |
| collegamento verso l'host destinazione:  nell'esempio sopra riportato, lo  stato   |
| del collegamento Φ pessimo  (addirittura tempi sopra i  3 secondi), e quindi  si   |
| puo' supporre che, per esempio, un  download da VolFTP in quel momento  andrebbe   |
| assai lento.  In alcuni  casi nessuna  delle tre  risposte Φ  arrivata, per  cui   |
| traceroute mostra il messaggio "Richiesta scaduta." invece del nome del  server.   |
| In generale, pi∙ bassi sono i tempi  delle tre colonne di sinistra e migliore  Φ   |
| la qualita' del collegamento verso la macchina destinazione.                       |
|                                                                                    |
| Qual  Φ  l'utilitα  di  questo  programma?  Per  esempio,  se  notiamo  che   il   |
| collegamento verso  un sito  web o  ftp (o  qualunque altro  servizio) Φ  lento,   |
| possiamo usare  traceroute per  vedere il  percorso seguito  dai pacchetti, e in   |
| base all'output  di traceroute  Φ possibile  capire se  il problema  dipende dal   |
| nostro provider, dalla macchina destinazione, da una macchina intermedia o da un   |
| tratto di linea fisica che unisce  due di queste. Oppure, se dobbiamo  scaricare   |
| un file piuttosto pesante e conosciamo almeno 2 siti ftp che lo contengono,  con   |
| traceroute possiamo stabilire da quale sito conviene effettuare il download.       |
|                                                                                    |
+------[iP 4 DUMMiES (diciamo neonati)]----------------------------------------------+
|                                                                                    |
|  L'indirizzo ip  (internet protocol)  consiste in  un gruppo  di quattro  numeri   |
|  ognuno dei quali compreso tra lo 0 e il 255. Le grandi aziende che dispongono o   |
|  necessitano di  pc sempre  online possono  disporre di  un IP  fisso (in Italia   |
|  comunemente sono i provider che hanno questo privilegio, ma non solo...).  Agli   |
|  users  o abbonati  semplici ai  servizi di  connessione di  un provider  viene    |
|  assegnato un  IP dinamico,  cioΦ che  cambia sempre  dopo ogni  disconnessione.   |
|  Queste due differenti modalitα sono  obbligatorie per un semplice motivo:  data   |
|  la  costituzione  dell'indirizzo  IP  (codificazione  solo  su  32  bit, mentre   |
|  l'attuale IPv6  codifica a  128 bit,  ma di  questo parler≥  un'altra volta)  i   |
|  provider non possono concedere un IP fisso ai suoi utenti, perci≥ utilizzano ip   |
|  variabili, una specie di "chi arriva primo se lo acchiappa" :) ma  naturalmente   |
|  non si verificano problemi, perchΦ  il sovraffollamento di utenti connessi  non   |
|  ha mai causato un esaurimento di IP, a quanto ne so.                              |
|                                                                                    |
|  OK, anche questo breve tutorial Φ  finito, non ho manco bisogno di  scriv. ehm,   |
|  pastare i copyrights xkΦ  da come potete notare  queste sono solo info.  Avviso   |
|  importante: x  la parte  riguardante il  tracert ho  preso spunto  dalla faq di   |
|  baldinelli per mancanza di tempo, se ci fossero eventuali problemi mi  prender≥   |
|  l'impegno di rifarla. Tanto non ci matto nulla a tracciare un server, solo  che   |
|  non c'Φ sbattimento ultimamente. Preferisco fare altro...                         |
|                                                                                    |
| ... Theoretical hacking successful installed in XanTHic's mind ...                 |
|                                                                                    |
| ___  ___  ____  __  __  ______  __  __    _   _____   _                            |
| \  \/  / | _  ||  \|  ||_    _||  ||  |  (_) |   _ | | )                           |
|  \    /  ___| ||   |  |  |  |  |  ||  |  ___ |  |    |/                            |
|  /    \ | __  ||  |   |  |  |  |  ==  | |   ||  |_                                 |
| /__/\__\|_____||__|\__|  |__|  |__||__| |___||_____|                               |
|                                                                                    |
|                                                                                    |
| SALUTI  &  RINGRAZIAMENTI:  Saluto innanzitutto  i  miei  fratelli del  progetto   |
| mojodo, i miei seguaci del VenInside  :DDD, tutti ma proprio tutti i  membri del   |
| Tankcommandos, tutta la new  world bie crew, la  Paola della mia classe,  la aLe   |
| del canale #dbzone e tutti quelli che mi conoscono. In particolare un  salutozzo   |
| e  un  abbraccio  vanno  a: `ValK`,  ADvAnCeD`,  lupsyn,  D3FU,  kEwL`, Raptor_,   |
| BiGAlex, SPYR0, ReSiNaRo, MightyInquisitor, ink, Ice Man, Net_Digger, Hopehack e   |
| SonGoten :)                                                                        |
|                                                                                    |
| FUCK:  inter-moratti. Vi  racconto una  barzelletta: c'Φ  Berlusconi che  va da    |
| Moratti dopo il derby e gli dice "Per vincere il derby ci vogliono i  coglioni!"   |
| e Moratti  "Cazzo io  li ho  giα comprati  tutti eppure  non riesco a vincere!".   |
| aHaHaH W MILAN.                                                                    |
+------------------------------------------------------------------------------------+

```

</div>
