---
title: "DZone16"
ezine: "dzone"
---

# DZone16

**Ezine:** dzone

<div className="ascii-content">

```
Enviado: Martes, 12 de Enero de 1999 12:52 a.m.



Donatien Nro 16

--------------------------------
Contenido

0) Editorial
1) QuΘ es el registro de Windows?
2) QuΘ es un archivo DLL?
3) Que programas se ejecutan cuando Windows arranca?

--------------------------------


0) Editorial

Algunos de ustedes me reclamaron por la tardanza, otros, reciΘn suscriptos
deben haber creφdo que la lista ya no funcionaba, pero la verdad es muy
simple:  me fuφ de vacaciones.

Para los reciΘn suscriptos, les cuento que la temßtica de esta publicaci≤n
es la siguiente:

No tiene temßtica.

En efecto, por aquφ mando con un poco de esfuerzo, un poco de colaboraci≤n,
un mont≤n de entusiasmo y una pizca de cari±o, todo aquello que yo crea les
pueda interesar.

Pueden recibir desde links a los Backdoor y anti-backdoors mßs comunes y
otros no tan comunes, secretos sobre hacking o nuking, y otras cosas
avanzadas, hasta n·meros con lecciones bßsicas como Θste, que escribo tan
s≤lo porque he descubierto que mucho usuarios realmente los necesitan.

El verdadero motivo de esta edici≤n sigue siendo ense±ar a los mßs novatos
el modo de protegerse de los hackers (o aprendices de hacker) que se
aprovechan de ellos a travΘs de Internet.

La verdad es que no me es posible hacer que estos mails sean diarios, ni
siquiera semanales... puesto que los escribo s≤lo, y aunque a veces recibo
colaboraci≤n, no es mi actividad principal, ni siquiera secundaria, sino tan
s≤lo un entretenimiento.

Ese es el motivo por el cual seguirßn siendo emitidos de manera IRREGULAR.

A·n son pocos los suscritores que me leen, pero en este n·mero me lleno de
orgullo en proclamarme no s≤lo internacional (por ser leφdo en Uruguay y
Chile) sino tambiΘn INTERCONTINENTAL, ya que este serß el primero de mis
mails en saltar el charco hacia Espa±a.

La ·nica retribuci≤n que deseo obtener (y de hecho la obtengo) es la
satisfacci≤n de recibir respuestas, sobre todo si se trata de colaboraciones
(Links buenos, comentarios o sugerencias) o de nuevas suscripciones.  Es por
eso que vuelvo a mendigar esa retribuci≤n: DIFUNDAN e INTERACTUEN.

Aunque no me especialice en Hacking ni nada de eso, la verdadera intenci≤n
de esta edici≤n sigue siendo ense±ar a los mßs novatos el modo de
protegerse, puesto que es el tema de moda, y los hackers (o aprendices de
hacker) abundan y son muy da±inos.  En esta ocasi≤n he decidido "comenzar
por el principio".

Este n·mero puede que sea pesado o innecesario para algunos, pero con
seguridad serß educativo para aquellos usuarios nuevos que son felices
vφctimas del enmascaramiento que Microsoft hace de los procesos reales que
controlan el ordenador.

Para los amantes del jolgorio, no se desanimen... el pr≤ximo n·mero prometo
serß muy breve y mßs divertido... y no tendrß nada de educativo, sino por el
contrario.....  :)

Pero los que no tengan claros los conceptos de los que aquφ voy a hablar,
lean y presten mucha atenci≤n.  Pr≤ximamente voy a utilizarlos para explicar
la forma de sacarse de encima el BACK ORIFICE, el NETBUS o cualquiera sea el
programa que estΘn utilizando para molestarnos.

Aquφ vamos:



1) QuΘ es el registro de Windows?

Empecemos por la historia...

En las versiones anteriores a Windows 95 (o sea hasta el Windows 3.11) el
sistema se valφa de los archivos WINDOWS.INI y SYSTEM.INI para enterarse de
quΘ archivos controladores y demßs debφa cargar para manejar correctamente
los dispositivos (como ser placas de sonido, video, scanner, CD ROM, etc...)
estos archivos INI eran simples archivos de texto que tenian el siguiente
formato:

[nombre_de_secci≤n]
variable_1=valor_1
variable_2=valor_2
...
variable_n=valor_n

por ejemplo, en la secci≤n CD-ROM (si es que existφa una) podrφa haberse
leφdo algo como lo siguiente:

[CD-ROM]
driver=c:\windows\system\cdrom.drv
nombredispositivo=Sony CDU 99 4/A                                     =)
cache=512

Con Windows 95 estos archivos fueron reemplazados por el sistema de Registro
de 32 bits, que puede incluφr datos de varios tipos, no s≤lo texto, entre
estos tipos estß el Binario.

Por este motivo el registro de Windows que antes era un simple TXT pas≤ a
ser un archivo binario (una base de datos) que s≤lo puede ser editado con un
programa a tal fin.  El programa que nos da Microsoft para hacer esto es el
REGEDIT.

Este no fuΘ el ·nico cambio que se realiz≤ sobre los archivos de inicio que
ahora se llaman "Registro", ahora por ejemplo no s≤lo se pueden crear
"subsecciones" llamadas "llaves" o en inglΘs "keys" (por ejemplo la
subsecci≤n que antes era "CD-ROM") sino que se pueden crear unas dentro de
otras como si se trataran de subdirectorios.

Con el REGEDIT.EXE se pueden recorrer estas secciones con facilidad y
modificar las variables que en ellas se encuentren.

Para ejecutar el REGEDIT hay que Θntrar en la opci≤n "Ejecutar" del men·
inicio y escribir "REGEDIT" y aceptar.

Hay que tener en cuenta que alguna modificaci≤n a las opciones que Windows
lee al reiniciar puede hacer que alg·n elemento de la computadora no
funcione correctamente la pr≤xima vez.

El registro no s≤lo tiene informaci≤n del arranque de Windows, sino
cualquier dato que las aplicaciones quieran almacenar en Θl, por eso es
muy extenso, y encontrar lo que se busca requiere de cierta prßctica.



2) QuΘ es un archivo DLL?

Un archivo DLL es una "Librerφa de Enlace Dinßmico" (Dinamic Link Library),
o sea que contiene datos compilados y enlazados (para el que no sabe, desde
siempre en la historia de la computadora los archivos EXE fueron archivos
compilados y de m≤dulos enlazados) de modo que una DLL puede contener tßnto
DATOS como peque±os EJECUTABLES dentro de sφ.

Lo mßs interesante es el tema de los ejecutables, ya que el de los datos es
sencillo de explicar y entender (por ejemplo MORICONS.DLL contiene ICONOS, o
sea datos), pero los ejecutables contenidos en los DLL son peque±os
programas simples que estßn ahφ esperando a que las aplicaciones los llamen
cuando los necesiten.

Suele ser por eso que los EXE's que ejecutan bajo windows ocupen poco,
mientras que su instalaci≤n incluye varios archivos DLL u OCX. (Los OCX son
un concepto que muy basicamente es similar al de los DLL)

TambiΘn hay formas de ejecutar uno de esos "programitas" sin que ninguna
aplicaci≤n haga la solicitud de ejecuci≤n.  Para eso estß Rundll32.exe.

Por ejemplo la siguiente lφnea:

Rundll32.exe powrprof.dll,LoadCurrentPwrScheme

Aquφ estamos ejecutando el programa LoadCurrentPwrScheme que estß incluido
en "powrprof.dll"

Es por cosas como esta que Windows ha crecido tanto en cuanto a cantidad de
aplicaciones existentes, ya que hacer una aplicaci≤n para Windows resulta
mucho mßs fßcil y rßpido que para DOS, porque Windows nos ofrece muchas
herramientas en los DLL incluφdos en su instalaci≤n. (Por ejemplo en
WINSOCK.DLL hay programas que ayudan a nuestras aplicaciones a lograr
conectarse con Internet sin que el programador se haya tenido que preocupar
por c≤mo esto se lleva a cabo)

Todo esto nos va a ser ·til para entender quΘ ocurre cuando windows
arranca...



3) Que programas se ejecutan cuando Windows arranca?

a) Antes que el Windows propiamente dicho, se incia un sistema bßsico que
tiene las caracterφsticas del viejo DOS, y sigue los mismos pasos que este
seguφa en su arranque.

a.1) C:\config.sys

Este archivo es el mßs importante en la carga del sistema operativo.  En el
se enumeran los controladores de mßs bajo nivel que la computadora va a
cargar.

Este archivo es mucho mßs antiguo que la primera versi≤n de Windows.

En Θl se definen las partes bßsicas de la configuraci≤n que la PC tendrß en
cuenta durante la carga del sistema operativo, por ejemplo:

FILES=40

En esta lφnea se definen la cantidad mßxima de archivos que el sistema
operativo (y todos los programas que Θste ejecute) puede abrir
simultßneamente.  A menos que se desee liberar memoria (cußntos mßs archivos
permitamos en esta lφnea, mßs memoria reservada para ello) es conveniente
que sea un n·mero alto, (40, 80 o mßs) para que no haya problemas con los
programas que necesiten abrir muchos archivos.

Hay otras lφneas con funciones similares, (por ejemplo "BUFFERS=" o
"STACKS=") pero no voy a explayarme en su explicaci≤n, hay textos
explicativos muy completos acerca de este tema, incluso en la ayuda de DOS
6.22 y anteriores. (esta ayuda parece haber desaparecido en W95).

La ·nica de estas lineas que sφ voy a tener en cuenta es la siguiente:

DEVICE=archivo.sys

Las lφneas de este estilo serßn probablemente las mßs comunes del archivo,
puesto que todo controlador de dispositivos (tales como CDROM, MOUSE,
SCANNER, etc) que deba cargarse antes que el propio sistema operativo se
deberß definir en estas lφneas, puesto que en la mayorφa de los casos no
podrß hacerlo en ning·n otro momento.  En el ejemplo, "archivo.sys" es el
nombre del controlador de dispositivo, cada dispositivo tendrß su propio
controlador, por ejemplo:

DEVICE=C:\ACME-CD\ACME.SYS  /M:80

podrφa ser el controlador del CDROM, sin el cual este modelo en particular
no funcionarφa.
(aunque en la actualidad la mayorφa de los CD ROM no necesitan controladores
de este tipo, ya que se adaptan a los controladores comunes de Windows 95)

No hay que tener miedo de modificar y hacer pruebas con este archivo, si nos
aseguramos de tener una copia de la versi≤n original en caso de que algo
deje de funcionar.  Por ejemplo... si cambißramos la linea de arriba por:

DEVICE=C:\ACME-CD\ACME.SYS  /M:300

descubrirφamos que /M: es la opci≤n que indica cußnta memoria CACH╔ se
reserva el dispositivo, y en adelante el CD funcionarφa mucho mßs rßpido que
antes.

a.2) C:\autoexec.bat

En este archivo figuran los controladores y otros comandos que el sistema
operativo (una vez cargado) ejecutarß automaticamente.  Por ejemplo el
comando PATH, que indica en quΘ directorios buscar los programas que son
llamados por el usuario y no se encuentran en el directorio actual.

Ejemplo del contenido de un archivo AUTOEXEC.BAT:

PATH C:\;C:\DOS\;C:\PKZIP
KMOUSE COM:2
REM la linea anterior ejecuta el controlador de mouse

Las lφneas que comienzan con la palabra REM son ignoradas por la PC, y se
utilizan para insertar comentarios para que el usuario comprenda o recuerde
el significado del contenido de este archivo.

Las lφneas se escriben en el archivo como si se estuvieran escribiendo en la
lφnea de comandos, por ejemplo, supongamos que tenemos la costumbre de
ejecutar el antivirus cada vez que encendemos la mßquina.

Para eso vamos al DOS y escribimos "C:\SCAN\SCAN C:\ -d".  Pues bien, esto
se puede realizar automßticamente cada vez que la computadora se enciende,
mientras Windows nos muestra su logo y esa franja de celeste y blanco
moviendose abajo.  El antivirus se correrφa oculto detrßs de esa pantalla y
s≤lo aparecerφa frente a nosotros en caso de que algo anormal ocurriera (tal
como un virus encontrado).

Para lograrlo hay que editar el AUTOEXEC:

EDIT C:\AUTOEXEC.BAT

e insertar la ·ltima lφnea:

PATH C:\;C:\DOS\;C:\PKZIP
KMOUSE COM:2
REM la linea anterior ejecuta el controlador de mouse
C:\SCAN\SCAN C:\ -d

grabar y salir.

c) Hasta aquφ fuΘ igual que el viejo DOS.  Aquφ comienza Windows propiamente
dicho.

c.1) El registro de Windows

c.1.1) Para no perder compatibilidad a·n busca y lee WINDOWS.INI y
SYSTEM.INI.
Estos dos archivos ya fueron explicados mßs arriba, y aunque ya han caφdo en
desuso en la mayorφa de los casos, Windows los sigue leyendo por si alg·n
usuario desactualizado utiliza programas antiguos que guarden en ellos su
configuraci≤n.

Algunos programadores de Backdoors aprovechan que no todos los usuarios
recuerdan estos archivos y mandan a sus programas a registrarse en ellos en
lugar del registro de Windows, de ese modo es mßs dificil encontrarlos y
eliminarlos.

c.1.2) Los Servicios de la mßquina.

Dentro del registro, en la rama:

"HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\RunServices"

se encuentran los programas que Windows cargarß antes de que el usuario se
registre con su nombre y contrase±a (LOGON). (o sea que estos programas
estarßn cargados sea quien sea el usuario que utilice la computadora.

c.1.3) DespuΘs de LOGON, los programas de la mßquina y los del usuario.

En la rama:

"HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Run"

se encuentran los programas que Windows cargarß DESPU╔S del LOGON, sea quien
sea el usuario.

y finalmente:

"HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run"

tambiΘn contiene nombres de archivos que se cargarßn, pero Θstos son
diferentes para cada usuario.

c.2) La secci≤n "Men· Inicio\Inicio".

Dentro del men· inicio hay un submen· que tambiΘn se llama inicio, y en Θl
hay accesos directos a programas que se ejecutan en cada sesi≤n, despuΘs de
terminado de cargar el registro completo.

Este men· (Men· Inicio\Inicio) estß pensado para mantener compatibilidad con
versiones anteriores de Windows, en las cußles los programas instalaban sus
iconos en la ventana Inicio puesto que era el mΘtodo mßs comun de procurarse
ser ejecutado.

Otro motivo por el cual esta secci≤n del Men· Inicio sigue existiendo es
porque es la forma mßs fßcil para que el usuario inexperto pueda agregar y
quitar programas al arranque, sin tener que meterse en el registro ni editar
archivos.



Con esto concluye esta peque±a contribuci≤n a la confusi≤n general.

Recuerden lo que dije, el pr≤ximo n·mero prometo serß muy breve y mßs
divertido... y no tendrß nada de educativo.

DonatiΘn.-



```

</div>
