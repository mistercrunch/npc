---
title: "TEXT_004"
ezine: "minotauro"
---

# TEXT_004

**Ezine:** minotauro

<div className="ascii-content">

```
Minotauro Magazine #7:

			     Hacking Adabas/Natural
			        por Mantis King

	A medida que "trabajaba" sobre el sistema y conseguía información
técnica iba escribiendo toda esta información en los bordes de hojas diario,
papeles de chocolate, borradores diversos, etc. y así fue como la guardé en mi
prolijo archivo :). Ahora que la estoy pasando en limpio muchas veces no me 
entiendo la letra, y me cuesta un poco relacionar los distintos papelitos asi 
que sorry si este texto tiene algunos errores. Y si no te gusta es muy sencillo
vieja, pasas de largo y seguis leyendo Minotauro ¿ OK ?

% Adabas %

	Toda la info. que vas a encontrar se refiere a la versión 5.2.5. Si 
pensas hackear un ambiente Adabas, podes encontrar 15 niveles distintos de 
seguridad. El nivel de seguridad lo elige el administrador del sistema cuando 
instala el software. Estos niveles de seguridad (entre 0 y 14) están asociados 
con el password de cada usuario. Cada password puede tener diferentes niveles 
para lectura y para escritura. Si conseguiste un password y queres ver los 
derechos que tiene este password tipeá:

ADASCR PFILES PW = password

De la misma forma, también los archivos o campos de un archivo pueden tener 
diferentes niveles de acceso, en un rango desde 0 (sin seguridad) hasta 14 
(la seguridad más alta). Si querés encontrar donde están los archivos 
sensitivos, esos que realmente te gustaría ver que guardan información 
confidencial, lo que tendrías que hacer es identificar los que tienen la
seguridad mas alta. Para ver los niveles de protección de los archivos de la 
base de datos podes usar el comando:

ADASCR PFILES

Look at this ! En Adabas podes visualizar todos los passwords, lo
único que tenes que hacer es usar este comando:

ADASCR PPW CODE = dbacode

Eeeh ! Te la creiste eh ???. No es tan facil, dbacode es un código que el 
software le da al administrador de la base cuando instala el Adabas. Si 
conseguis uno vas a poder hacer cosas más que interesantes. Si querés cambiar 
algo en los datos almacenados en la base de datos te comento lo siguiente.
Primero que nada, los verdaderos hackers solo curiosean la información de los 
sistemas, no la cambian...pero, es tu desición. Segundo, puede ser que el DBA 
(administrador de la base de datos) haya establecido controles restringidos a 
valores. Esto quiere decir que el sistema chequea uno o mas campos de un 
registro para establecer si tenés acceso para leer o escribir el registro. Si
no tenés el nivel de acceso necesario para ese file tu acción se va a registrar
en el botonazo log. Al día siguiente el DBA revisa el log y quedas pegado hasta
las manos. Entonces, si querés ver el criterio de seguridad por valor de tu
password podes usar el comando:

ADASCR PPW CODE = dbacode, PW = password

Como ya te habras dado cuenta (eso espero) podés combinar este comando con el
anterior para elegir un password con el nivel suficiente como para modificar 
los archivos que quieras toquetear. Si tue idea no es modificar archivos, sino 
solamente espiar un poco los archivos más interesantes, tenes que tener claro 
que es muy probable que los mas copados estén encriptados. En Adabas es muy 
fácil encriptar archivos usando el parámetro ADAWAN y un código de 8 caractéres
en el utilitario Compression. También si andas con ganas de hacer guachadas le 
podes encriptar algunos archivos al pobre man, pero no seas tan turro che !! 
Si los archivos están encriptados, te recomiento que te copies los archivos y 
los labures en tu casa. No es recomendable tratar de adivinar el código 
directamente sobre la máquina hackeada, acordate de los logs, cada error que 
cometas se va a registrar en el log. En cambio, con los files en tu casa podes 
probar cientos de veces sin peligro. Hay muchos textos y utilitarios que te 
pueden ayudar a adivinar el código de 8 caracteres que necesitas para 
desencriptar el archivo.

% Natural %

	Si querés chequear las opciones generales presiona "D" en el Menú
Principal, así vas a llegar a los "Security Administrator Services". En esta 
pantalla, y presionando "D" llegas a "Modify General Options" que te muestra 
las opciones generales de seguridad. Podes chequear la estructura de seguridad
(grupos y miembros) presionando "D" e ingresando luego la identificación de 
usuario en el "User Maintenance Menu". Así vas a poder ver todos los grupos a 
los que pertenece este usuario, además de mas información sobre cada grupo. Si
querés ver la seguridad de cada aplicación tenés que presionar "D" y la 
identificación de aplicación en el "Application Maintenance Menu". Si querés 
ver un número más grande de definiciones de seguridad de aplicaciones podes 
usar la función "MASS FUNCTION", que te va a mostrar una lista de todas las
aplicaciones que fueron definidas en la seguridad del Natural por orden 
alfabético por identificación de aplicación. Para usar esta posibilidad, lo 
único que tenés que hacer es presionar "Q" en el "Application Maintenance 
Menu". Esto es muy importante, porque en Natural la seguridad de los datos 
está asociada con la seguridad de las aplicaciones que acceden a esos archivos.
Si usas la opción "Select File" (presionando "S") en el "File Maintenance Menu"
vas a ver el estado de cada archivo. Sin dudas los archivos "PRIV" van a ser 
los más interesantes, pero también deberías pegarle un vistazo a los "PUBL", 
porque en un ambiente mal controlado podés encontrar información confidencial 
también en este tipo de archivo. Todas las posibilidades que expliqué antes las
podes usar (aunque de solo lectura) usando "Retrieval" en el Menu Principal.
Atención, si corres una aplicación que tenga la opción "LOG" en "Y", la 
seguridad del Natural va a escribir un registro en archivo de log. Yo te 
recomendaría pegarle un vistazo a los registros de log para chequear si tus 
actividades fueron registradas. Podes verlos usando la función "Logon Records 
Processing". En el Menu Principal tenes que presionar "D" para llegar a los 
servicios del administrador de seguridad y después "L" para ver los archivos de
log. El administrador de la base puede setear un número máximo de intentos de 
logon. Y si realizas un número más grande de intentos que el establecido por el
DBA, el sistema va a generar un registro en el archivo de log. Siempre tendrías
que tratar de pasar inadvertido en el sistema. Entonces, por ejemplo, si tenés 
un password y estás dentro del sistema y conseguiste otra password con más 
nivel, pero que no es segura, yo te recomendaría antes de empezar a probarla 
chequear cual es el número máximo de intentos de logon que están permitidos. 
Si el número máximo es seis, podes probar tu password dudosa cinco veces y no 
se van a crear registros de error en el archivo de log. Si estas en el sistema 
y querés ver el registro de errores de logon para ver si hay mas gente tratando
de hackear el sistema (eso puede ser peligroso porque si hay muchos hackers 
rondando por el sistema es probable que alguno se mande una cagada y todos
queden pegados), o si simplemente querés ver cuan pelotuda es la gente :), 
podes hacer lo siguiente. Presiona "D" en el Menu Principal para acceder a los 
servicios del Administrador de seguridad y después presiona "E" para ver los 
registros de errores de logon. Esto es importante, si nos damos cuenta que en 
el sistema este tipo de errores es contínuo y repetido, es una señal clara que 
el sistema esta mal controlado y el Administrador de Sistema no le da bola a 
los archivos de log. Entonces no habrá problemas en probar un número más grande
de logons incorrectos. Como en el Natural puede haber mas de un administrador, 
el Natural da la posibilidad de usar contrafirmas (countersignatures) para 
controlar la seguridad. En criollo esto quiere decir que para cambiar una 
definición de seguridad pueden ser necesarias 0, 1, 2 o 3 confirmaciones
(countersignatures) de los otros administradores definidos. Entonces tenes que 
tener claro que si conseguis privilegios de administrador todavía no tenés el 
control absoluto del sistema (si es que hay otros administradores definidos y 
fue establecido un sistema de contrafirmas). Entonces, antes de intentar hacer 
cualquier cambio, deberías verificar si hay definidos otros administradores y 
si se han establecido contrafirmas. Te puedo asegurar que es realmente molesto
"trabajar" en una máquina que tenga establecidas contrafirmas, pero no te 
calentes mucho porque la mayoría de los ambientes Natural solo tienen un
administrador.
 
Espero que esta información que fue muy útil para mi, tambien pueda ser útil 
para ustedes..

                                    Mantis King  [NO DAN] :)

```

</div>
