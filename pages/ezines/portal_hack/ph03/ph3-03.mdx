---
title: "ph3-03"
ezine: "portal_hack"
---

# ph3-03

**Ezine:** portal_hack

<div className="ascii-content">

```
[::...........................o( hACK )o............................::]

1. Curso de hack en LiNUX [2/6]

Bienvenidos a este curso a continuacion veremos las unidades:

 òCapφtulo 1 - El arte del hacking 
 òCapφtulo 2 - Manejando Linux. Entendiendo UNIX. 
 òCapφtulo 3 - Breve anßlisis de los sistemas UNIX. 
 òCapφtulo 4 - Entrar en un sistema y enROOTarse. 
 òCapφtulo 5 - Ocultarse en un sistema. Seguir hackeando en otros sistemas. 
 òCapφtulo 6 - Apaga y vßmonos. 

**************************
Capφtulo 3.
Breve anßlisis a los sistemas Unix 
**************************
En esta unidad aprenderΘis:
*Mßs sobre los sistemas UNIX 
*Tipos de sistemas UNIX 
*Caracterφsticas de los sistemas UNIX mßs importantes

Bien, en este minicapφtulo vamos a aprender algo sobre los 
sistemas UNIX universales, casi todos los que existen en Internet. 
Inicialmente esta informaci≤n no os serß de gran utilidad, pero 
mßs adelante os servirß, o sea que guardarla. 

Sistemas UNIX

Desde los orφgenes de Internet, este ha estado formado bßsicamente
por mßquinas UNIX. Se trata de un sistema multiusuario que es 
usado, bßsicamente, como servidor. Asφ, podemos encontrar 
mßquinas UNIX en servidores de FTP, en servidores de correo 
electr≤nico, en servidores de WWW, en servidores de IRC... Pero 
dado su entorno multiusuario es tambiΘn usado mucho en Universidades, 
Bancos, asφ como en algunas entidades gubernamentales. Actualmente 
el n·mero de sistemas UNIX en Internet estß disminuyendo y estß 
aumentando el de sistemas NT, aunque UNIX sigue siendo claramente 
superior (alrededor del 65% de mßquinas de Internet son UNIX). El 
otro 35%, lo forman bßsicamente sistemas como el NT, ya mencionado, 
aunque tambiΘn existen otros como VM/CMS, VM/ESA, VMS... 

Clasificaci≤n de sistemas UNIX

Inicialmente podemos dividir los sistemas UNIX seg·n el tipo 
(BSD, System V, etc...). Pero en este capφtulo vamos a hacer 
una distinci≤n seg·n los fabricantes de cada sistema UNIX:

&lt;AIX> - Fabricado por IBM 
&lt;SunOS y Solaris> - Fabricados por Sun 
&lt;HP-UX> - Fabricado por Hewlett Packard 
&lt;Ultrix y OSF/1> - Fabricados por DEC

Aunque Linux no ha estado fabricado por ninguna multinacional, 
he creφdo conveniente incluirlo en esta lista.

*Linux - UNIX para PC, no ha sido fabricado por ninguna multinacional

Estos son los mßs importantes, despuΘs hay otros como el IRIX, 
el Convex, el UnicOS... de menor proliferaci≤n. 

Voy a describir cinco de estos sistemas: AIX, SunOS, Solaris, 
Linux y HP-UX. 

&lt;AIX>

AIX es la versi≤n UNIX de IBM. Desde que sali≤ ha sido de los 
sistemas que mßs bugs ha presentado. Para que os hagßis una idea, 
la versi≤n 3.25 tenφa fallos tan gordos como estos:

1 - El comando lquerypv podφa ser utilizado para leer cualquier 
archivo:
$ lquerypv -h /etc/passwd
root:Xds4cdXcMoV:0:0::/root:/bin/bash
...

2 - Este bug habla por sφ solo:
$ echo "badboy::0:0:blablabla:/:/bin/sh" >>/etc/shadow
$ telnet localhost
login: badboy
# whoami
root

3 - Otro bug:
$ rlogin localhost -l -froot
# whoami
root

4 - Y otro bug que permite enROOTarse:
$ tproof -x /bin/sh

Naturalmente, existen parches para estos bugs tan tontos.

La versi≤n 3.25 fue substituida por la 4.1, aunque esta tambiΘn 
presenta errores (como todos los sistemas). Estos son los cambios 
de la 3.25 a la 4.1:

Versi≤n 3.25 y 4.1.x

Tanto la versi≤n 3.2.5 como la 4.1 de AIX son compatibles con los 
tres sistemas IBM RISC System/600 (POWER, POWER2 y PowerPC 601). 
La versi≤n 4.1, ademßs, incorpora compatibilidad con sistemas PowerPC.

En la versi≤n 4.1 se incluyen los estandartes de programaci≤n POSIX 
1003.2 y 1003.2a, FIPS 151-2 y XPG4.

Las librerφas TCP/IP permiten el uso de BIND y NIS para resolver 
direcciones IP. 

En la versi≤n 4.1, el IP forwarding estß, por defecto, desactivado. 

&lt;SunOS> 

Se trata de un sistema de la casa Sun. Estos son sus fallos:

El SunOS, es, inicialmente vulnerable a IP Spoofings, si la opci≤n 
Source routing estß activada. Aunque, para que SunOS sea totalmente 
seguro a un ataque de spoof, se tienen que introducir ciertas 
modificaciones en el kernel referentes a IP forwarding. Por eso, 
probablemente en este sistema una tßctica muy aconsejable es el IP 
Spoofing.

SunOS TambiΘn presenta fallos en la configuraci≤n NFS, a no ser que 
estΘ activado el NFS por monitoring (por defecto no lo estß). 

Un fallo muy importante es que, inicialmente, la librerφa ruserok(3) 
permite el acceso a .rhosts y a hosts.equiv con cualquier comando "r". 

El fichero /dev/eeprom es inicialmente leφble por cualquier usuario, 
pero este suele ser un bug que casi todos los admins suelen solucionar. 
Otro bug tonto: muchos admins dejan activada la cuenta "sync" sin password.

&lt;Linux>

Linux es el famoso sistema operativo disponible para PC y para 
otras plataformas. A±ade a UNIX un SO de 32 bits, soporta multitud
de dispositivos (PCI, SCSI...) y es capaz de leer FAT32 y NTFS. 
Se trata de un sistema especialmente estable y fiable, poco propenso 
a colgarse. Pone a disposici≤n del usuario el c≤digo fuente del Kernel. 
Funciona en un 386 con 4 de RAM, gracias a que s≤lo utiliza los recursos 
que necesita. Es multitarea y incorpora un entorno grßfico parecido a 
Windows 95, llamado X-Windows. Hay diferentes distribuciones de Linux, 
y no todas son gratuitas, las mßs importantes (gratuitas) son:

* Slackware : Se puede conseguir en ftp.cdrom.com:/pub/Linux/slackware. 
* Debian: Para conseguirla, se puede hacer un ftp a ftp.debian.org o en slug.ctv.es. 
* Red Hat: ftp.redhat.com para conseguirla. 

Como principales bugs voy a destacar:

*En Debian Linux 2.0, /usr/bin/suidexec permite nivel de root a cualquier usuario. 
*En cualquier sistema Linux se puede sobreescribir un buffer en /usr/X11/bin/color_xterm para obtener nivel root. 
*En cualquier sistema Linux se puede exploitar la librerφa vsyslog() 5.4.38 para obtener root. 
*Aunque es un bug muy viejo, se puede obtener nivel root sobreescribiendo un buffer en /usr/bin/splitvt òEn distribuciones RedHat de Linux, se puede conseguir nivel root sobreescribiendo un buffer en /usr/bin/zgv

&lt;Solaris>

Se trata de un sistema mejorado de la misma casa que SunOS 
(por supuesto, SUN). Las ·ltimas versiones de este sistema 
se caracterizan por contener un mejorado sistema de WebNFS.

Pero como todo sistema, Solaris tiene tambiΘn muchos bugs. 
Los mßs importantes son:

*Se pueden crear o borrar cualquier tipo de ficheros como si fuΘsemos root usando el statd (s≤lo en la versi≤n 2.5.1)
*El sistema peta si el syslog recibe un mensage y no puede resolver la IP que lo ha producido. 
*En cualquier sistema Solaris 2.x, podemos petar o reiniciar el sistema con un ping flood (enviando una gran cantidad de paquetes de manera que se quede bloqueado) 
*Se pueden aprovechar los archivos /usr/bin/ps y /usr/ucb/ps para conseguir acceso root en cualquier sistema Solaris 
*Asφ mismo, sobreescribiendo un b·fer determinado en /usr/bin/fdformat tambiΘn podemos conseguir root en cualquier Solaris 2.x 
*TambiΘn se puede aprovechar y explotar /usr/lib/nis/nispopulate en los sistemas Solaris 2.5 òSobreescribiendo un b·fer determinado en el archivo passwd podemos enROOTarnos, s≤lo en la versi≤n 2.5, igualmente, en esta versi≤n podemos explotar /usr/openwin/bin/kcms_calibrate para obtener root

&lt;HP-UX>

HP-UX ha sido fabricado por la conocida multinacional Hewlett 
Packard. Se han hecho multitud de versiones de este sistema, 
tanto es asφ que una de las ·ltimas versiones es la 9.01. A 
diferencia de otros sistemas UNIX, presenta pocos bugs, de 
los cuales destaco:

*SAM (System Administration Manager) puede ser usado en 
cualquier sistema HP-UX para modificar archivos. 
*En la versi≤n HP-UX 9, el programa rpc.mountd contiene un bug 
que puede ser explotado para obtener privilegios NFS.

d4rk-cl4w
PortalHack Team
http://portalhack.cjb.net
---------------------------------------------------------[ph3-03.txt]--
```

</div>
